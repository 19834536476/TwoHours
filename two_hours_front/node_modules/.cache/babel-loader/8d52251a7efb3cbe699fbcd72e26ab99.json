{"ast":null,"code":"import \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.regexp.test.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport SHAEncrypt from \"@/components/SHAEncrypt\";\nexport default {\n  name: \"Register\",\n  components: {\n    SHAEncrypt: SHAEncrypt\n  },\n  // 数据模型\n  data: function data() {\n    return {\n      // 账号规则\n      format: /^\\w{4,24}$/,\n\n      /* 动画控制器 */\n      show: true,\n\n      /* 表单数据模型 */\n      form: {\n        id: '',\n        psw: '',\n        checkPsw: '',\n        verifyCode: ''\n      },\n\n      /* 同意协议 */\n      checked: false,\n      // 已注册跳转\n      registered: false,\n      verifyCodeShow: false\n    };\n  },\n  // 组件激活\n  activated: function activated() {\n    // 刷新验证码\n    this.changeVerifyImg();\n    this.verifyCodeShow = true; // 开启动画\n\n    this.show = false;\n  },\n  // 通过路由规则，离开该组件时被调用\n  beforeRouteLeave: function beforeRouteLeave(to, from, next) {\n    // 关闭动画\n    this.show = true;\n    this.verifyCodeShow = false;\n\n    if (this.Registered) {\n      // 数据销毁\n      this.form.id = '';\n      this.form.psw = '';\n      this.form.checkPsw = '';\n      this.form.verifyCode = '';\n      this.checked = false;\n      this.Registered = false;\n    }\n\n    next();\n  },\n  // 方法模型\n  methods: {\n    // 切换验证码图片\n    changeVerifyImg: function changeVerifyImg() {\n      document.getElementById(\"verifyCodeImg\").src = \"/checkCodeServlet?\" + new Date().getMilliseconds();\n    },\n    // 验证账号格式\n    idBlur: function idBlur() {\n      if (this.format.test(this.form.id) === false) {\n        this.$message.error('账号长度应在4-24位之间！');\n        return false;\n      }\n\n      return true;\n    },\n    // 验证二次密码格式\n    checkPswBlur: function checkPswBlur() {\n      if (this.form.psw !== this.form.checkPsw || this.form.checkPsw === '') {\n        this.$message.error('两次输入的密码不同！');\n        return false;\n      }\n\n      return true;\n    },\n    // 提交表单\n    onSubmit: function onSubmit() {\n      var _this = this;\n\n      // 检查数据格式\n      if (!this.idBlur()) {\n        return;\n      }\n\n      if (!this.checkPswBlur()) {\n        return;\n      } // 验证码格式\n\n\n      var formCode = /^\\w{4}$/;\n\n      if (formCode.test(this.form.verifyCode) === false) {\n        this.$message.error('验证码格式有误！');\n        return;\n      } // 检查勾选协议\n\n\n      if (this.checked === false) {\n        this.$message.warning('请勾选同意协议~');\n        return;\n      } // password加密\n\n\n      this.form.psw = SHAEncrypt.methods.sha1(this.form.psw); // checkPassword加密\n\n      this.form.checkPsw = SHAEncrypt.methods.sha1(this.form.checkPsw); // 发送表单给后端\n\n      this.$axios.post(\"/LoginCon/register\", this.form).then(function (res) {\n        if (res.data.flag) {\n          // 执行数据销毁\n          _this.Registered = true; // 注册成功\n\n          _this.$message.success(res.data.msg + \"即将跳转到登陆界面！\"); // 2秒后跳转\n\n\n          setTimeout(function () {\n            _this.$router.push({\n              name: 'Login'\n            });\n          }, 2000);\n        } else {\n          _this.form.psw = '';\n          _this.form.checkPsw = ''; // 注册失败\n\n          _this.$message.warning(res.data.msg);\n        } // 切换验证码\n\n\n        _this.changeVerifyImg();\n      });\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoEA;AACA;AACAA,kBADA;AAEAC;AACAC;AADA,GAFA;AAKA;AACAC,MANA,kBAMA;AACA;AACA;AACAC,0BAFA;;AAGA;AACAC,gBAJA;;AAKA;AACAC;AACAC,cADA;AAEAC,eAFA;AAGAC,oBAHA;AAIAC;AAJA,OANA;;AAYA;AACAC,oBAbA;AAcA;AACAC,uBAfA;AAgBAC;AAhBA;AAkBA,GAzBA;AA0BA;AACAC,WA3BA,uBA2BA;AACA;AACA;AACA,+BAHA,CAIA;;AACA;AACA,GAjCA;AAkCA;AACAC,kBAnCA,4BAmCAC,EAnCA,EAmCAC,IAnCA,EAmCAC,IAnCA,EAmCA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACAA;AACA,GAjDA;AAkDA;AACAC;AACA;AACAC,mBAFA,6BAEA;AACAC;AACA,KAJA;AAKA;AACAC,UANA,oBAMA;AACA;AACA;AACA;AACA;;AACA;AACA,KAZA;AAaA;AACAC,gBAdA,0BAcA;AACA;AACA;AACA;AACA;;AACA;AACA,KApBA;AAqBA;AACAC,YAtBA,sBAsBA;AAAA;;AACA;AACA;AACA;AACA;;AACA;AACA;AACA,OAPA,CAQA;;;AACA;;AACA;AACA;AACA;AACA,OAbA,CAcA;;;AACA;AACA;AACA;AACA,OAlBA,CAmBA;;;AACA,6DApBA,CAqBA;;AACA,uEAtBA,CAuBA;;AACA;AACA;AACA;AACA,kCAFA,CAGA;;AACA,8DAJA,CAKA;;;AACAC;AAAA;AAAAzB;AAAA;AAAA;AACA,SAPA,MAOA;AACA;AACA,mCAFA,CAGA;;AACA;AACA,SAbA,CAcA;;;AACA;AACA,OAhBA;AAiBA;AA/DA;AAnDA","names":["name","components","SHAEncrypt","data","format","show","form","id","psw","checkPsw","verifyCode","checked","registered","verifyCodeShow","activated","beforeRouteLeave","to","from","next","methods","changeVerifyImg","document","idBlur","checkPswBlur","onSubmit","setTimeout"],"sourceRoot":"src/pages/login","sources":["Register.vue"],"sourcesContent":["<template>\r\n    <div>\r\n        <el-container>\r\n            <!-- 侧边图-->\r\n            <el-aside width=\"300px\">\r\n                <img id=\"shape\" src=\"imgs/login/shape.png\" alt=\"Logo\">\r\n            </el-aside>\r\n            <!-- 主空间 -->\r\n            <el-main id=\"elMain\">\r\n                <!-- logo -->\r\n                <div id=\"logo\">\r\n                    <router-link :to=\"{name:'MainPage'}\"><el-image src=\"imgs/login/logo.png\" id=\"logoImg\" :fit=\"'scale-down'\" alt=\"Logo\"></el-image></router-link>\r\n                </div>\r\n                <!-- info -->\r\n                <div id=\"info\">\r\n                    <!-- 介绍 -->\r\n                    <div class=\"information\">欢迎注册</div>\r\n                    <div class=\"information\">畅享百万资源</div>\r\n                    <div style=\"visibility: hidden\">占行</div>\r\n                    <!-- 详细-->\r\n                    <div class=\"details\">如果您已经拥有账户，您可以 </div>\r\n                    <!-- 超链接-->\r\n                    <router-link class=\"register\" :to=\"{name:'Login'}\" >点我登录</router-link>\r\n                </div>\r\n                <!-- center -->\r\n                <div id=\"center\">\r\n                    <transition name=\"el-fade-in-linear\">\r\n                        <img style=\"transition:3s\" v-show=\"!show\" src=\"imgs/login/center.png\" alt=\"图片下班了~\">\r\n                    </transition>\r\n                </div>\r\n                <!-- form表单 -->\r\n                <div id=\"form\"> <!-- 设置校验及反馈图标 -->\r\n                    <el-form ref=\"form\" :model=\"form\" label-width=\"80px\">\r\n                        <el-form-item> <!-- 账号 长度限制24 自带清除 -->\r\n                            <el-input class=\"input\" v-model=\"form.id\" @blur=\"idBlur\" placeholder=\"学号或工号用于登录\" maxlength=\"24\" autocomplete=\"off\" clearable></el-input>\r\n                        </el-form-item>\r\n                        <el-form-item> <!-- 密码 自带显示密码 -->\r\n                            <el-input class=\"input\" v-model=\"form.psw\" placeholder=\"密码\" maxlength=\"24\" autocomplete=\"off\" clearable show-password></el-input>\r\n                        </el-form-item>\r\n                        <el-form-item> <!-- 确认密码 自带显示密码 -->\r\n                            <el-input class=\"input\" v-model=\"form.checkPsw\" @blur=\"checkPswBlur\" placeholder=\"确认密码\" maxlength=\"24\" autocomplete=\"off\" clearable show-password></el-input>\r\n                        </el-form-item>\r\n                        <el-form-item v-show=\"verifyCodeShow\"> <!-- 验证码 -->\r\n                            <el-input id=\"verifyCodeBox\" class=\"input\" v-model=\"form.verifyCode\" maxlength=\"4\" autocomplete=\"off\" placeholder=\"验证码\"></el-input>\r\n                        </el-form-item>\r\n                        <el-form-item> <!-- 同意协议 -->\r\n                            <span id=\"user-rules\"><el-checkbox id=\"iCheckbox\" v-model=\"checked\" label=\" \"></el-checkbox>我同意<router-link id=\"agree-rules\" :to=\"{name:'PrivacyPolicy'}\">《安全协议》和《隐私协议》</router-link></span>\r\n                        </el-form-item>\r\n                        <el-form-item>  <!-- 注册确认按钮 -->\r\n                            <el-button type=\"primary\" @click=\"onSubmit\" id=\"confirm\"><span id=\"btLogin\">注册</span></el-button>\r\n                        </el-form-item>\r\n                        <el-form-item>  <!-- 版权信息 -->\r\n                            <span id=\"form-info\">Copyright © 2022 Jczone. All rights reserved.</span>\r\n                        </el-form-item>\r\n                    </el-form>\r\n                </div>\r\n                <!-- 验证码图片单独定位 -->\r\n                <div id=\"verifyCode\">\r\n                    <img id=\"verifyCodeImg\" src=\"/checkCodeServlet\" @click=\"changeVerifyImg\" alt=\"图片下班了~\">  <!-- 验证码图片 -->\r\n                </div>\r\n            </el-main>\r\n        </el-container>\r\n\r\n    </div>\r\n\r\n</template>\r\n\r\n<script>\r\n    import SHAEncrypt from \"@/components/SHAEncrypt\";\r\n    export default {\r\n        name: \"Register\",\r\n        components:{\r\n            SHAEncrypt,\r\n        },\r\n        // 数据模型\r\n        data(){\r\n            return {\r\n                // 账号规则\r\n                format: /^\\w{4,24}$/,\r\n                /* 动画控制器 */\r\n                show: true,\r\n                /* 表单数据模型 */\r\n                form:{\r\n                    id:'',\r\n                    psw:'',\r\n                    checkPsw:'',\r\n                    verifyCode:'',\r\n                },\r\n                /* 同意协议 */\r\n                checked: false ,\r\n                // 已注册跳转\r\n                registered:false,\r\n                verifyCodeShow: false,\r\n            }\r\n        },\r\n        // 组件激活\r\n        activated() {\r\n            // 刷新验证码\r\n            this.changeVerifyImg();\r\n            this.verifyCodeShow = true;\r\n            // 开启动画\r\n            this.show = false;\r\n        },\r\n        // 通过路由规则，离开该组件时被调用\r\n        beforeRouteLeave (to, from, next) {\r\n            // 关闭动画\r\n            this.show = true;\r\n            this.verifyCodeShow = false;\r\n            if(this.Registered){\r\n                // 数据销毁\r\n                this.form.id = '';\r\n                this.form.psw = '';\r\n                this.form.checkPsw = '';\r\n                this.form.verifyCode = '';\r\n                this.checked = false;\r\n                this.Registered = false;\r\n            }\r\n            next();\r\n        },\r\n        // 方法模型\r\n        methods: {\r\n            // 切换验证码图片\r\n            changeVerifyImg(){\r\n                document.getElementById(\"verifyCodeImg\").src  = \"/checkCodeServlet?\"+new Date().getMilliseconds();\r\n            },\r\n            // 验证账号格式\r\n            idBlur(){\r\n                if(this.format.test(this.form.id) === false){\r\n                    this.$message.error('账号长度应在4-24位之间！');\r\n                    return false;\r\n                }\r\n                return true;\r\n            },\r\n            // 验证二次密码格式\r\n            checkPswBlur(){\r\n                if(this.form.psw !== this.form.checkPsw || this.form.checkPsw === ''){\r\n                    this.$message.error('两次输入的密码不同！');\r\n                    return false;\r\n                }\r\n                return true;\r\n            },\r\n            // 提交表单\r\n            onSubmit(){\r\n                // 检查数据格式\r\n                if(!this.idBlur()){\r\n                    return;\r\n                }\r\n                if(!this.checkPswBlur()){\r\n                    return;\r\n                }\r\n                // 验证码格式\r\n                let formCode = /^\\w{4}$/;\r\n                if(formCode.test(this.form.verifyCode) === false){\r\n                    this.$message.error('验证码格式有误！');\r\n                    return;\r\n                }\r\n                // 检查勾选协议\r\n                if(this.checked === false){\r\n                    this.$message.warning('请勾选同意协议~');\r\n                    return;\r\n                }\r\n                // password加密\r\n                this.form.psw = SHAEncrypt.methods.sha1(this.form.psw);\r\n                // checkPassword加密\r\n                this.form.checkPsw = SHAEncrypt.methods.sha1(this.form.checkPsw);\r\n                // 发送表单给后端\r\n                this.$axios.post(\"/LoginCon/register\",this.form).then((res)=>{\r\n                    if(res.data.flag){\r\n                        // 执行数据销毁\r\n                        this.Registered = true;\r\n                        // 注册成功\r\n                        this.$message.success(res.data.msg + \"即将跳转到登陆界面！\");\r\n                        // 2秒后跳转\r\n                        setTimeout(()=> {this.$router.push({name:'Login'});}, 2000);\r\n                    }else{\r\n                        this.form.psw = '';\r\n                        this.form.checkPsw = '';\r\n                        // 注册失败\r\n                        this.$message.warning(res.data.msg);\r\n                    }\r\n                    // 切换验证码\r\n                    this.changeVerifyImg();\r\n                });\r\n            },\r\n\r\n        },\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    /* 侧边图 */\r\n    #shape{\r\n        height:97.7vh;\r\n    }\r\n    /*\r\n     * main 元素定位\r\n     */\r\n    #elMain{\r\n        position: relative;\r\n    }\r\n    /* Logo */\r\n    #logo{\r\n        top: 15%;\r\n        left: 1%;\r\n        position: absolute;\r\n    }\r\n    ::v-deep #logoImg{\r\n        width: 240px;\r\n        height: 79px;\r\n    }\r\n    /* info */\r\n    #info{\r\n        /* 位置 */\r\n        top: 35%;\r\n        left: 1%;\r\n        position: absolute;\r\n        /* 窗口大小 */\r\n        width: 18%;\r\n        height: 30%;\r\n    }\r\n    /* 介绍 */\r\n    .information{\r\n        font-family: \"微软雅黑\";\r\n        font-size: 35px;\r\n        margin-bottom: 8px;\r\n        /* 文字间距 */\r\n        letter-spacing: 3px;\r\n    }\r\n    /* 详细 */\r\n    .details{\r\n        font-family: \"微软雅黑\";\r\n        font-size: 20px;\r\n        color: #3c3f45;\r\n        margin-bottom: 7px;\r\n        /* 文字间距 */\r\n        letter-spacing: 1px;\r\n    }\r\n    /* 注册超链接*/\r\n    .register{\r\n        text-decoration: none;\r\n        font-size: 18px;\r\n        font-weight: 500;\r\n        color: #299E58;\r\n        /* 文字间距 */\r\n        letter-spacing: 1px;\r\n    }\r\n    /* 注册超链接悬浮 */\r\n    .register:hover{\r\n        text-decoration: underline;\r\n        color: #228143;\r\n    }\r\n    /* center */\r\n    #center{\r\n        top: 20%;\r\n        left: 20%;\r\n        position: absolute;\r\n    }\r\n\r\n    /*\r\n     * form 表单\r\n     */\r\n    #form{\r\n        /* 位置 */\r\n        top: 18%;\r\n        left: 52%;\r\n        position: absolute;\r\n        /* 窗口大小 */\r\n        width: 30%;\r\n        height: 50%;\r\n    }\r\n    /* 输入框 */\r\n    ::v-deep .el-input__inner {\r\n        font-size: 16px;\r\n        height: 60px;\r\n        border-radius: 8px;\r\n        background-color: #EBF0F6;\r\n    }\r\n    /* 验证码输入 */\r\n    ::v-deep #verifyCodeBox{\r\n        width: 45%;\r\n    }\r\n    /* 注意项 */\r\n    #user-rules{\r\n        left: 10px;\r\n        position: relative;\r\n        font-size: 16px;\r\n        font-weight: 500;\r\n        color: #b5b7b4;\r\n        /* 文字间距 */\r\n        letter-spacing: 1px;\r\n    }\r\n    /* checkBox选中色 */\r\n    .el-checkbox__input.is-checked .el-checkbox__inner{\r\n        background-color:#299E58;\r\n        border-color: #228143;\r\n    }\r\n    /* checkbox选中边框色 */\r\n    .el-checkbox__input.is-focus .el-checkbox__inner{\r\n        border-color: #299E58;\r\n    }\r\n    /* checkBox悬浮鼠标边框色*/\r\n    .el-checkbox__inner:hover{\r\n        border-color: #299E58;\r\n    }\r\n    /* 用户协议超链接 */\r\n    #agree-rules{\r\n        text-decoration: none;\r\n        color:  #299E58;\r\n    }\r\n    /* 用户协议悬浮 */\r\n    #agree-rules:hover{\r\n        text-decoration: underline;\r\n        color: #228143;\r\n    }\r\n    /* 登录按钮 */\r\n    #confirm{\r\n        height: 55px;\r\n        width: 100%;\r\n        /* 圆角半径 */\r\n        border-radius: 10px;\r\n        background-color: #299E58;\r\n    }\r\n    /* 登录按钮活动 */\r\n    #confirm:hover{\r\n        background-color: #228143;\r\n    }\r\n    /* 登录文字 */\r\n    #btLogin{\r\n        color: #ffffff;\r\n        font-size: 20px;\r\n        font-weight: 500;\r\n        font-family: \"微软雅黑\";\r\n        /* 文字间距 */\r\n        letter-spacing: 10px;\r\n    }\r\n    /* 验证码单独设置 */\r\n    #verifyCode{\r\n        /* 位置 */\r\n        top: 44.2%;\r\n        left: 69.5%;\r\n        position: absolute;\r\n    }\r\n    /* 验证码 */\r\n    #verifyCodeImg{\r\n        /* 大小 */\r\n        width: 190px;\r\n        height: 75px;\r\n    }\r\n    /* 版权信息*/\r\n    #form-info{\r\n        /* 位置偏移 */\r\n        left: 30px;\r\n        position: relative;\r\n        color: #808892;\r\n        font-size: 14px;\r\n        font-family: \"微软雅黑\";\r\n        /* 文字间距 */\r\n        letter-spacing: 1px;\r\n    }\r\n\r\n</style>"]},"metadata":{},"sourceType":"module"}