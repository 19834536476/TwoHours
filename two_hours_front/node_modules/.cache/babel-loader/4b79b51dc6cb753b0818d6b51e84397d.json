{"ast":null,"code":"import \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.regexp.test.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport SHAEncrypt from \"@/components/SHAEncrypt\";\nexport default {\n  name: \"Login\",\n  components: {\n    SHAEncrypt: SHAEncrypt\n  },\n  data: function data() {\n    return {\n      // 用户类别-对应pageTitle数组下标\n      type: '1',\n      pageTitle: [\"管理员\", \"欢迎登录\"],\n      // 动画控制器\n      show: true,\n      // 表单数据模型\n      form: {\n        id: '',\n        psw: '',\n        verifyCode: '',\n        type: ''\n      },\n      verifyCodeShow: false\n    };\n  },\n  beforeMount: function beforeMount() {\n    // 获取用户类型\n    this.getType();\n  },\n  mounted: function mounted() {\n    // 刷新验证码\n    this.changeVerifyImg();\n    this.verifyCodeShow = true;\n    this.show = false;\n  },\n  // 方法模型\n  methods: {\n    // 从路由参数中获取类型\n    getType: function getType() {\n      this.type = this.$route.query.type; // 越界检测\n\n      if (this.type !== '1' && this.type !== '123') this.type = '1';\n      if (this.type === '123') this.type = '0';\n    },\n    // 切换验证码图片\n    changeVerifyImg: function changeVerifyImg() {\n      document.getElementById(\"verifyCodeImg\").src = \"/checkCodeServlet?\" + new Date().getMilliseconds();\n    },\n    // 提交表单\n    onSubmit: function onSubmit() {\n      var _this = this;\n\n      // 补充用户信息\n      this.form.type = this.type;\n      var form = /^\\w{4,24}$/; // 验证账号格式\n\n      if (form.test(this.form.id) === false) {\n        this.$message.error('账号格式有误哦~');\n        return;\n      } // 验证密码格式\n\n\n      if (form.test(this.form.psw) === false) {\n        this.$message.error('密码格式有误哦~');\n        return;\n      } // 验证码格式\n\n\n      var formCode = /^\\w{4}$/;\n\n      if (formCode.test(this.form.verifyCode) === false) {\n        this.$message.error('验证码格式有误哦~');\n        return;\n      } // password加密\n\n\n      this.form.psw = SHAEncrypt.methods.sha1(this.form.psw); // 发送表单给后端\n\n      this.$axios.post(\"/LoginCon/login\", this.form).then(function (res) {\n        if (res.data.flag) {\n          // 登陆成功\n          _this.$message.success(\"登陆成功！\");\n\n          if (_this.type === '1') // 用户登录\n            {\n              _this.$router.push({\n                name: 'UserMainPage'\n              });\n            } else if (_this.type === '0') // 管理员登录\n            {\n              _this.$router.push({\n                name: 'AdminMainPage'\n              });\n            }\n        } else {\n          _this.form.psw = ''; // 登录失败\n\n          _this.$message.warning(res.data.msg);\n        } // 切换验证码\n\n\n        _this.changeVerifyImg();\n      });\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqEA;AACA;AACAA,eADA;AAEAC;AACAC;AADA,GAFA;AAKAC,MALA,kBAKA;AACA;AACA;AACAC,eAFA;AAGAC,gCAHA;AAIA;AACAC,gBALA;AAMA;AACAC;AACAC,cADA;AAEAC,eAFA;AAGAC,sBAHA;AAIAN;AAJA,OAPA;AAaAO;AAbA;AAeA,GArBA;AAsBAC,aAtBA,yBAsBA;AACA;AACA;AACA,GAzBA;AA0BAC,SA1BA,qBA0BA;AACA;AACA;AACA;AACA;AACA,GA/BA;AAgCA;AACAC;AACA;AACAC,WAFA,qBAEA;AACA,yCADA,CAEA;;AACA;AACA;AACA,KAPA;AAQA;AACAC,mBATA,6BASA;AACAC;AACA,KAXA;AAYA;AACAC,YAbA,sBAaA;AAAA;;AACA;AACA;AACA,8BAHA,CAIA;;AACA;AACA;AACA;AACA,OARA,CASA;;;AACA;AACA;AACA;AACA,OAbA,CAcA;;;AACA;;AACA;AACA;AACA;AACA,OAnBA,CAoBA;;;AACA,6DArBA,CAsBA;;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;AACAlB;AADA;AAGA,aALA,MAMA;AACA;AACA;AACAA;AADA;AAGA;AACA,SAfA,MAeA;AACA,8BADA,CAEA;;AACA;AACA,SApBA,CAqBA;;;AACA;AACA,OAvBA;AAwBA;AA5DA;AAjCA","names":["name","components","SHAEncrypt","data","type","pageTitle","show","form","id","psw","verifyCode","verifyCodeShow","beforeMount","mounted","methods","getType","changeVerifyImg","document","onSubmit"],"sourceRoot":"src/pages/login","sources":["Login.vue"],"sourcesContent":["<template>\r\n    <div>\r\n\r\n        <el-container>\r\n            <!-- 侧边图-->\r\n            <el-aside width=\"300px\">\r\n                <img id=\"shape\" src=\"imgs/login/shape.png\" alt=\"Logo\">\r\n            </el-aside>\r\n            <!-- 主空间 -->\r\n            <el-main id=\"elMain\">\r\n                <!-- logo -->\r\n                <div id=\"logo\">\r\n                    <router-link :to=\"{name:'MainPage'}\"><el-image src=\"imgs/login/logo.png\" id=\"logoImg\" :fit=\"'scale-down'\" alt=\"Logo\"></el-image></router-link>\r\n                </div>\r\n                <!-- info -->\r\n                <div id=\"info\">\r\n                    <!-- 介绍 -->\r\n                    <div class=\"information\">欢迎登录</div>\r\n                    <div class=\"information\">享优质教育资源</div>\r\n                    <div style=\"visibility: hidden\">占行</div>\r\n                    <!-- 详细-->\r\n                    <div class=\"details\">如果您还没有账户，您可以 </div>\r\n                    <!-- 超链接-->\r\n                    <router-link class=\"register\" :to=\"{name:'Register'}\">点我注册</router-link>\r\n                </div>\r\n                <!-- center -->\r\n                <div id=\"center\">\r\n                    <transition name=\"el-fade-in-linear\">\r\n                        <img style=\"transition:3s\" v-show=\"!show\" src=\"imgs/login/center.png\" alt=\"图片下班了~\">\r\n                    </transition>\r\n                </div>\r\n                <!-- form标题 -->\r\n                <div id=\"form-title\"> {{pageTitle[type]}}</div>\r\n                <!-- form表单 -->\r\n                <div id=\"form\">\r\n                    <el-form ref=\"form\" :model=\"form\" label-width=\"80px\">\r\n                        <el-form-item> <!-- 账号 长度限制24 自带清除 -->\r\n                            <el-input class=\"input\" v-model=\"form.id\" placeholder=\"用户ID\" maxlength=\"24\" clearable></el-input>\r\n                        </el-form-item>\r\n                        <el-form-item> <!-- 密码 自带显示密码 -->\r\n                            <el-input class=\"input\" v-model=\"form.psw\" placeholder=\"密码\" maxlength=\"24\" clearable show-password></el-input>\r\n                        </el-form-item>\r\n                        <el-form-item> <!-- 验证码 -->\r\n                            <el-input id=\"verifyCodeBox\" class=\"input\" v-model=\"form.verifyCode\" maxlength=\"4\" placeholder=\"验证码\"></el-input>\r\n                        </el-form-item>\r\n                        <el-form-item> <!-- 忘记密码 -->\r\n                            <router-link id=\"forgotPsw-sy\" :to=\"{name:'ForgetPsw'}\">忘记密码？</router-link>\r\n                        </el-form-item>\r\n                        <el-form-item>  <!-- 登陆确认按钮 -->\r\n                            <el-button type=\"primary\" @click=\"onSubmit\" id=\"confirm\"><span id=\"btLogin\">登录</span></el-button>\r\n                        </el-form-item>\r\n                        <el-form-item>  <!-- 版权信息 -->\r\n                            <span id=\"form-info\">Copyright © 2022 Jczone. All rights reserved.</span>\r\n                        </el-form-item>\r\n                    </el-form>\r\n                </div>\r\n                <!-- 验证码图片单独定位 -->\r\n                <div id=\"verifyCode\" v-show=\"verifyCodeShow\">\r\n                    <img src=\"/checkCodeServlet\" id=\"verifyCodeImg\" @click=\"changeVerifyImg\" alt=\"图片下班了~\">  <!-- 验证码图片 -->\r\n                </div>\r\n\r\n            </el-main>\r\n        </el-container>\r\n\r\n    </div>\r\n\r\n</template>\r\n\r\n<script>\r\n    import SHAEncrypt from \"@/components/SHAEncrypt\";\r\n    export default {\r\n        name: \"Login\",\r\n        components:{\r\n            SHAEncrypt,\r\n        },\r\n        data(){\r\n            return{\r\n                // 用户类别-对应pageTitle数组下标\r\n                type: '1',\r\n                pageTitle:[\"管理员\",\"欢迎登录\"],\r\n                // 动画控制器\r\n                show: true,\r\n                // 表单数据模型\r\n                form:{\r\n                id: '',\r\n                    psw: '',\r\n                    verifyCode:'',\r\n                    type:'',\r\n                },\r\n                verifyCodeShow:false,\r\n            }\r\n        },\r\n        beforeMount() {\r\n            // 获取用户类型\r\n            this.getType();\r\n        },\r\n        mounted() {\r\n            // 刷新验证码\r\n            this.changeVerifyImg();\r\n            this.verifyCodeShow = true;\r\n            this.show = false;\r\n        },\r\n        // 方法模型\r\n        methods: {\r\n            // 从路由参数中获取类型\r\n            getType(){\r\n                this.type = this.$route.query.type;\r\n                // 越界检测\r\n                if(this.type !== '1' && this.type !== '123' )this.type = '1';\r\n                if(this.type === '123')this.type = '0';\r\n            },\r\n            // 切换验证码图片\r\n            changeVerifyImg(){\r\n                document.getElementById(\"verifyCodeImg\").src  = \"/checkCodeServlet?\"+new Date().getMilliseconds();\r\n            },\r\n            // 提交表单\r\n            onSubmit(){\r\n                // 补充用户信息\r\n                this.form.type = this.type;\r\n                let form =  /^\\w{4,24}$/;\r\n                // 验证账号格式\r\n                if(form.test(this.form.id) === false){\r\n                    this.$message.error('账号格式有误哦~');\r\n                    return;\r\n                }\r\n                // 验证密码格式\r\n                if(form.test(this.form.psw) === false){\r\n                    this.$message.error('密码格式有误哦~');\r\n                    return;\r\n                }\r\n                // 验证码格式\r\n                let formCode = /^\\w{4}$/;\r\n                if(formCode.test(this.form.verifyCode) === false){\r\n                    this.$message.error('验证码格式有误哦~');\r\n                    return;\r\n                }\r\n                // password加密\r\n                 this.form.psw = SHAEncrypt.methods.sha1(this.form.psw);\r\n                // 发送表单给后端\r\n                this.$axios.post(\"/LoginCon/login\",this.form).then((res)=>{\r\n                    if(res.data.flag){\r\n                        // 登陆成功\r\n                        this.$message.success(\"登陆成功！\");\r\n                        if(this.type === '1') // 用户登录\r\n                        {\r\n                            this.$router.push({\r\n                                name:'UserMainPage',\r\n                            })\r\n                        }\r\n                        else if (this.type === '0')// 管理员登录\r\n                        {\r\n                            this.$router.push({\r\n                                name: 'AdminMainPage',\r\n                            })\r\n                        }\r\n                    }else{\r\n                        this.form.psw = '';\r\n                        // 登录失败\r\n                        this.$message.warning(res.data.msg);\r\n                    }\r\n                    // 切换验证码\r\n                    this.changeVerifyImg();\r\n                });\r\n            },\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    /* 侧边图 */\r\n    #shape{\r\n        height:97.7vh;\r\n    }\r\n    /*\r\n     * main 元素定位\r\n     */\r\n    #elMain{\r\n        position: relative;\r\n    }\r\n    /* Logo */\r\n    #logo{\r\n        top: 15%;\r\n        left: 1%;\r\n        position: absolute;\r\n    }\r\n    ::v-deep #logoImg{\r\n        width: 240px;\r\n        height: 79px;\r\n    }\r\n    /* info */\r\n    #info{\r\n        /* 位置 */\r\n        top: 35%;\r\n        left: 1%;\r\n        position: absolute;\r\n        /* 窗口大小 */\r\n        width: 18%;\r\n        height: 30%;\r\n    }\r\n    /* 介绍 */\r\n    .information{\r\n        font-family: \"微软雅黑\";\r\n        font-size: 35px;\r\n        margin-bottom: 8px;\r\n        /* 文字间距 */\r\n        letter-spacing: 3px;\r\n    }\r\n    /* 详细 */\r\n    .details{\r\n        font-family: \"微软雅黑\";\r\n        font-size: 20px;\r\n        color: #3c3f45;\r\n        margin-bottom: 7px;\r\n        /* 文字间距 */\r\n        letter-spacing: 1px;\r\n    }\r\n    /* 注册超链接*/\r\n    .register{\r\n        text-decoration: none;\r\n        font-size: 18px;\r\n        font-weight: 500;\r\n        color: #3a75ff;\r\n        /* 文字间距 */\r\n        letter-spacing: 1px;\r\n    }\r\n    /* 注册超链接悬浮 */\r\n    .register:hover{\r\n        text-decoration: underline;\r\n        color: #4a95f1;\r\n    }\r\n    /* center */\r\n    #center{\r\n        top: 20%;\r\n        left: 20%;\r\n        position: absolute;\r\n    }\r\n    /*\r\n     * form 表单\r\n     */\r\n    /* 输入框 */\r\n    ::v-deep .el-input__inner {\r\n        font-size: 16px;\r\n        height: 60px;\r\n        border-radius: 8px;\r\n        background-color: #EBF0F6;\r\n    }\r\n    #form-title{\r\n        /* 位置偏移 */\r\n        top: 20%;\r\n        left: 67%;\r\n        position: absolute;\r\n        color: #808892;\r\n        font-size: 20px;\r\n        font-family: \"微软雅黑\";\r\n        /* 文字间距 */\r\n        letter-spacing: 1px;\r\n    }\r\n    #form{\r\n        /* 位置 */\r\n        top: 27%;\r\n        left: 52%;\r\n        position: absolute;\r\n        /* 窗口大小 */\r\n        width: 30%;\r\n        height: 50%;\r\n    }\r\n    /* 验证码输入 */\r\n    ::v-deep #verifyCodeBox{\r\n        width: 45%;\r\n    }\r\n    /* 忘记密码超链接 */\r\n    #forgotPsw-sy{\r\n        left: 10px;\r\n        position: relative;\r\n        text-decoration: none;\r\n        font-size: 16px;\r\n        font-weight: 500;\r\n        color: #b5b7b4;\r\n        /* 文字间距 */\r\n        letter-spacing: 1px;\r\n    }\r\n    /* 忘记密码悬浮 */\r\n    #forgotPsw-sy:hover{\r\n        text-decoration: underline;\r\n        color: #888a88;\r\n    }\r\n    /* 登录按钮 */\r\n    #confirm{\r\n        height: 55px;\r\n        width: 100%;\r\n        /* 圆角半径 */\r\n        border-radius: 10px;\r\n        background-color: #4460F0;\r\n    }\r\n    /* 登录按钮活动 */\r\n    #confirm:hover{\r\n        background-color: #3024ba;\r\n    }\r\n    /* 登录文字 */\r\n    #btLogin{\r\n        color: #ffffff;\r\n        font-size: 20px;\r\n        font-weight: 500;\r\n        font-family: \"微软雅黑\";\r\n        /* 文字间距 */\r\n        letter-spacing: 10px;\r\n    }\r\n    /* 验证码单独设置 */\r\n    #verifyCode{\r\n        /* 位置 */\r\n        top: 44.2%;\r\n        left: 69.5%;\r\n        position: absolute;\r\n    }\r\n    /* 验证码 */\r\n    #verifyCodeImg{\r\n        /* 大小 */\r\n        width: 190px;\r\n        height: 75px;\r\n    }\r\n    /* 版权信息*/\r\n    #form-info{\r\n        /* 位置偏移 */\r\n        left: 30px;\r\n        position: relative;\r\n        color: #808892;\r\n        font-size: 14px;\r\n        font-family: \"微软雅黑\";\r\n        /* 文字间距 */\r\n        letter-spacing: 1px;\r\n    }\r\n\r\n</style>"]},"metadata":{},"sourceType":"module"}