{"ast":null,"code":"import \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.regexp.test.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport SHAEncrypt from \"@/components/SHAEncrypt\";\nexport default {\n  name: \"ForgetPsw\",\n  components: {\n    SHAEncrypt: SHAEncrypt\n  },\n  // 数据模型\n  data: function data() {\n    return {\n      /* 动画控制器 */\n      show: true,\n\n      /* 表单数据模型 */\n      form: {\n        id: '',\n        psw: '',\n        checkPsw: '',\n        answer1is: '',\n        answer2is: '',\n        question1: '问题1',\n        answer1: '',\n        question2: '问题2',\n        answer2: ''\n      },\n      showForm1: true,\n      showForm2: false,\n      showForm3: false\n    };\n  },\n  mounted: function mounted() {\n    this.show = false;\n  },\n  // 方法模型\n  methods: {\n    // 提交表单1 验证账号\n    onSubmit1: function onSubmit1() {\n      var _this = this;\n\n      var form = /^\\w{4,24}$/; // 验证账号格式\n\n      if (form.test(this.form.id) === false) {\n        this.$message.error('账号长度应在4-24位之间！');\n        return;\n      } // 发送表单给后端\n\n\n      this.$axios.post(\"/LoginCon/getQuestion\", this.form).then(function (res) {\n        if (res.data.flag) {\n          // 验证成功\n          _this.form.question1 = res.data.data.question1;\n          _this.form.question2 = res.data.data.question2;\n\n          if (_this.form.question1 == null || _this.form.question2 == null) {\n            // 未设置密保问题\n            setTimeout(function () {\n              _this.$message.success(\"您未设置密保问题，请联系管理员修改。即将跳转到登陆界面！\");\n            }, 0); // 2秒后跳转\n\n            setTimeout(function () {\n              _this.$router.push({\n                name: 'Login'\n              });\n            }, 2000);\n          } else {\n            _this.$message.success(\"验证成功\");\n\n            _this.form.answer1 = res.data.data.answer1;\n            _this.form.answer2 = res.data.data.answer2; // 切换显示表单\n\n            _this.showForm1 = false;\n            _this.showForm2 = true;\n          }\n        } else {\n          // 验证失败\n          _this.$message.warning(\"账号不存在\");\n        }\n      });\n    },\n    // 提交表单2 验证自定义问题\n    onSubmit2: function onSubmit2() {\n      if (this.form.answer1 === this.form.answer1is && this.form.answer2 === this.form.answer2is) {\n        // 验证成功 切换显示表单\n        this.showForm2 = false;\n        this.showForm3 = true;\n        this.$message.success(\"验证成功\");\n      } else {\n        // 验证失败\n        this.$message.warning(\"答案错误\");\n      }\n    },\n    // 提交表单3\n    onSubmit3: function onSubmit3() {\n      var _this2 = this;\n\n      if (this.form.psw !== this.form.checkPsw || this.form.checkPsw === '') {\n        this.$message.warning('两次输入的密码不同！');\n        return false;\n      } else {\n        // password加密\n        this.form.psw = SHAEncrypt.methods.sha1(this.form.psw); // checkPassword加密\n\n        this.form.checkPsw = SHAEncrypt.methods.sha1(this.form.checkPsw);\n        this.$axios.post(\"/LoginCon/updatePsw\", this.form).then(function (res) {\n          if (res.data.flag) {\n            // 修改成功\n            _this2.$message.success(res.data.msg + \"即将跳转到登陆界面！\"); // 2秒后跳转\n\n\n            setTimeout(function () {\n              _this2.$router.push({\n                name: 'Login'\n              });\n            }, 2000);\n          } else {\n            _this2.form.psw = '';\n            _this2.form.checkPsw = ''; // 验证失败\n\n            _this2.$message.warning(res.data.msg);\n          }\n        });\n      }\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsFA;AACA;AACAA,mBADA;AAEAC;AACAC;AADA,GAFA;AAKA;AACAC,MANA,kBAMA;AACA;AACA;AACAC,gBAFA;;AAGA;AACAC;AACAC,cADA;AAEAC,eAFA;AAGAC,oBAHA;AAIAC,qBAJA;AAKAC,qBALA;AAOAC,wBAPA;AAQAC,mBARA;AASAC,wBATA;AAUAC;AAVA,OAJA;AAgBAC,qBAhBA;AAiBAC,sBAjBA;AAkBAC;AAlBA;AAoBA,GA3BA;AA4BAC,SA5BA,qBA4BA;AACA;AACA,GA9BA;AA+BA;AACAC;AACA;AACAC,aAFA,uBAEA;AAAA;;AACA,8BADA,CAEA;;AACA;AACA;AACA;AACA,OANA,CAOA;;;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACAC;AAAA;AAAA,kBAFA,CAGA;;AACAA;AAAA;AAAArB;AAAA;AAAA;AACA,WALA,MAKA;AACA;;AACA;AACA,uDAHA,CAIA;;AACA;AACA;AACA;AACA,SAjBA,MAiBA;AACA;AACA;AACA;AACA,OAtBA;AAuBA,KAjCA;AAkCA;AACAsB,aAnCA,uBAmCA;AACA;AACA;AACA;AACA;AACA;AACA,OALA,MAKA;AACA;AACA;AACA;AACA,KA7CA;AA8CA;AACAC,aA/CA,uBA+CA;AAAA;;AACA;AACA;AACA;AACA,OAHA,MAGA;AACA;AACA,+DAFA,CAGA;;AACA;AACA;AACA;AACA;AACA,iEAFA,CAGA;;;AACAF;AAAA;AAAArB;AAAA;AAAA;AACA,WALA,MAKA;AACA;AACA,sCAFA,CAGA;;AACA;AACA;AACA,SAZA;AAaA;AACA;AAtEA;AAhCA","names":["name","components","SHAEncrypt","data","show","form","id","psw","checkPsw","answer1is","answer2is","question1","answer1","question2","answer2","showForm1","showForm2","showForm3","mounted","methods","onSubmit1","setTimeout","onSubmit2","onSubmit3"],"sourceRoot":"src/pages/login","sources":["ForgetPsw.vue"],"sourcesContent":["<template>\r\n    <div>\r\n\r\n        <el-container>\r\n            <!-- 侧边图-->\r\n            <el-aside width=\"300px\">\r\n                <img id=\"shape\" src=\"imgs/login/shape.png\" alt=\"Logo\">\r\n            </el-aside>\r\n            <!-- 主空间 -->\r\n            <el-main id=\"elMain\">\r\n                <!-- logo -->\r\n                <div id=\"logo\">\r\n                    <router-link :to=\"{name:'MainPage'}\"><el-image src=\"imgs/login/logo.png\" id=\"logoImg\" :fit=\"'scale-down'\" alt=\"Logo\"></el-image></router-link>\r\n                </div>\r\n                <!-- info -->\r\n                <div id=\"info\">\r\n                    <!-- 介绍 -->\r\n                    <div class=\"information\">重置密码</div>\r\n                    <div class=\"information\">用密保问题找回</div>\r\n                    <div style=\"visibility: hidden\">占行</div>\r\n                    <!-- 详细-->\r\n                    <div class=\"details\">想起您的密码了？您可以 </div>\r\n                    <!-- 超链接-->\r\n                    <router-link class=\"returnLogin\" :to=\"{name:'Login'}\" >点我返回</router-link>\r\n                </div>\r\n                <!-- center -->\r\n                <div id=\"center\">\r\n                    <transition name=\"el-fade-in-linear\">\r\n                        <img style=\"transition:3s\" v-show=\"!show\" src=\"imgs/login/center.png\" alt=\"图片下班了~\">\r\n                    </transition>\r\n                </div>\r\n                <!-- form表单 -->\r\n                <div id=\"form\">\r\n                    <el-form ref=\"form\" :model=\"form\" label-width=\"80px\">\r\n                        <!-- 显示-验证ID后隐藏 -->\r\n                        <el-form-item v-if=\"showForm1\">  <!-- form标题 -->\r\n                            <div class=\"input-title\">在此输入您的ID</div>\r\n                        </el-form-item>\r\n                        <el-form-item v-if=\"showForm1\"> <!-- 账号 长度限制24 自带清除 -->\r\n                            <el-input class=\"input\" v-model=\"form.id\" placeholder=\"用户ID\" maxlength=\"24\" clearable></el-input>\r\n                        </el-form-item>\r\n                        <el-form-item v-if=\"showForm1\">  <!-- 确认按钮 -->\r\n                            <el-button type=\"primary\" @click=\"onSubmit1\" class=\"confirm\"><span class=\"btLogin\">确认</span></el-button>\r\n                        </el-form-item>\r\n                        <!-- 隐藏-验证ID后显示 -->\r\n                        <el-form-item v-if=\"showForm2\">  <!-- 问题1 -->\r\n                            <div class=\"input-title\">{{form.question1}}</div>\r\n                        </el-form-item>\r\n                        <el-form-item v-if=\"showForm2\"> <!-- 答案1 -->\r\n                            <el-input class=\"input\" v-model=\"form.answer1is\" maxlength=\"24\" clearable></el-input>\r\n                        </el-form-item>\r\n                        <el-form-item v-if=\"showForm2\">  <!-- 问题2 -->\r\n                            <div  class=\"input-title\">{{form.question2}}</div>\r\n                        </el-form-item>\r\n                        <el-form-item v-if=\"showForm2\"> <!-- 答案2 -->\r\n                            <el-input class=\"input\" v-model=\"form.answer2is\" maxlength=\"24\" clearable></el-input>\r\n                        </el-form-item>\r\n                        <el-form-item v-if=\"showForm2\">  <!-- 确认按钮 -->\r\n                            <el-button type=\"primary\" @click=\"onSubmit2\" class=\"confirm\"><span class=\"btLogin\">确认</span></el-button>\r\n                        </el-form-item>\r\n                        <!-- 隐藏-验证回答后显示 -->\r\n                        <el-form-item v-if=\"showForm3\"> <!-- 密码 自带显示密码 -->\r\n                            <el-input class=\"input\" v-model=\"form.psw\" placeholder=\"新密码\" maxlength=\"24\" autocomplete=\"off\" clearable show-password></el-input>\r\n                        </el-form-item>\r\n                        <el-form-item v-if=\"showForm3\"> <!-- 确认密码 自带显示密码 -->\r\n                            <el-input class=\"input\" v-model=\"form.checkPsw\" placeholder=\"确认密码\" maxlength=\"24\" autocomplete=\"off\" clearable show-password></el-input>\r\n                        </el-form-item>\r\n                        <el-form-item v-if=\"showForm3\">  <!-- 确认按钮 -->\r\n                            <el-button type=\"primary\" @click=\"onSubmit3\" class=\"confirm\"><span class=\"btLogin\">确认</span></el-button>\r\n                        </el-form-item>\r\n                        <!-- 版权信息始终显示 -->\r\n                        <el-form-item>  <!-- 版权信息 -->\r\n                            <span id=\"form-info\">Copyright © 2022 Jczone. All rights reserved.</span>\r\n                        </el-form-item>\r\n                    </el-form>\r\n                </div>\r\n            </el-main>\r\n        </el-container>\r\n\r\n\r\n\r\n    </div>\r\n\r\n</template>\r\n\r\n<script>\r\n    import SHAEncrypt from \"@/components/SHAEncrypt\";\r\n    export default {\r\n        name: \"ForgetPsw\",\r\n        components:{\r\n            SHAEncrypt,\r\n        },\r\n        // 数据模型\r\n        data(){\r\n            return {\r\n                /* 动画控制器 */\r\n                show: true,\r\n                /* 表单数据模型 */\r\n                form:{\r\n                id:'',\r\n                psw:'',\r\n                checkPsw:'',\r\n                answer1is:'',\r\n                answer2is:'',\r\n\r\n                question1:'问题1',\r\n                answer1:'',\r\n                question2:'问题2',\r\n                answer2:'',\r\n                },\r\n                showForm1: true,\r\n                showForm2: false,\r\n                showForm3: false,\r\n            }\r\n        },\r\n        mounted(){\r\n            this.show = false;\r\n        },\r\n        // 方法模型\r\n        methods: {\r\n            // 提交表单1 验证账号\r\n            onSubmit1(){\r\n                let form =  /^\\w{4,24}$/;\r\n                // 验证账号格式\r\n                if(form.test(this.form.id) === false){\r\n                    this.$message.error('账号长度应在4-24位之间！');\r\n                    return;\r\n                }\r\n                // 发送表单给后端\r\n                this.$axios.post(\"/LoginCon/getQuestion\",this.form).then((res)=>{\r\n                    if(res.data.flag){\r\n                        // 验证成功\r\n                        this.form.question1 = res.data.data.question1;\r\n                        this.form.question2 = res.data.data.question2;\r\n                        if(this.form.question1 == null ||  this.form.question2 == null){\r\n                            // 未设置密保问题\r\n                            setTimeout(()=>{this.$message.success(\"您未设置密保问题，请联系管理员修改。即将跳转到登陆界面！\");},0)\r\n                            // 2秒后跳转\r\n                            setTimeout(()=>{this.$router.push({name:'Login'});}, 2000);\r\n                        }else{\r\n                            this.$message.success(\"验证成功\");\r\n                            this.form.answer1 = res.data.data.answer1;\r\n                            this.form.answer2 = res.data.data.answer2;\r\n                            // 切换显示表单\r\n                            this.showForm1 = false ;\r\n                            this.showForm2 = true;\r\n                        }\r\n                    }else{\r\n                        // 验证失败\r\n                        this.$message.warning(\"账号不存在\");\r\n                    }\r\n                });\r\n            },\r\n            // 提交表单2 验证自定义问题\r\n            onSubmit2(){\r\n                if(this.form.answer1 === this.form.answer1is && this.form.answer2 === this.form.answer2is){\r\n                    // 验证成功 切换显示表单\r\n                    this.showForm2 = false ;\r\n                    this.showForm3 = true;\r\n                    this.$message.success(\"验证成功\");\r\n                }else{\r\n                    // 验证失败\r\n                    this.$message.warning(\"答案错误\");\r\n                }\r\n            },\r\n            // 提交表单3\r\n            onSubmit3(){\r\n                if(this.form.psw !== this.form.checkPsw || this.form.checkPsw === ''){\r\n                    this.$message.warning('两次输入的密码不同！');\r\n                    return false;\r\n                }else{\r\n                    // password加密\r\n                    this.form.psw = SHAEncrypt.methods.sha1(this.form.psw);\r\n                    // checkPassword加密\r\n                    this.form.checkPsw = SHAEncrypt.methods.sha1(this.form.checkPsw);\r\n                    this.$axios.post(\"/LoginCon/updatePsw\",this.form).then((res)=>{\r\n                        if(res.data.flag){\r\n                            // 修改成功\r\n                            this.$message.success(res.data.msg + \"即将跳转到登陆界面！\");\r\n                            // 2秒后跳转\r\n                            setTimeout(()=> {this.$router.push({name:'Login'});}, 2000);\r\n                        }else{\r\n                            this.form.psw = '';\r\n                            this.form.checkPsw = '';\r\n                            // 验证失败\r\n                            this.$message.warning(res.data.msg);\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    /*\r\n     * 侧边图\r\n     */\r\n    #shape{\r\n        height:97.7vh;\r\n    }\r\n    /*\r\n     * main 元素定位\r\n     */\r\n    #elMain{\r\n        position: relative;\r\n    }\r\n    /* Logo */\r\n    #logo{\r\n        top: 15%;\r\n        left: 1%;\r\n        position: absolute;\r\n    }\r\n    ::v-deep #logoImg{\r\n        width: 240px;\r\n        height: 79px;\r\n    }\r\n    /* info */\r\n    #info{\r\n        /* 位置 */\r\n        top: 35%;\r\n        left: 1%;\r\n        position: absolute;\r\n        /* 窗口大小 */\r\n        width: 18%;\r\n        height: 30%;\r\n    }\r\n    /* 介绍 */\r\n    .information{\r\n        font-family: \"微软雅黑\";\r\n        font-size: 35px;\r\n        margin-bottom: 8px;\r\n        /* 文字间距 */\r\n        letter-spacing: 3px;\r\n    }\r\n    /* 详细 */\r\n    .details{\r\n        font-family: \"微软雅黑\";\r\n        font-size: 20px;\r\n        color: #3c3f45;\r\n        margin-bottom: 7px;\r\n        /* 文字间距 */\r\n        letter-spacing: 1px;\r\n    }\r\n    /* 返回超链接 */\r\n    .returnLogin{\r\n        text-decoration: none;\r\n        font-size: 18px;\r\n        font-weight: 500;\r\n        color: #3a75ff;\r\n        /* 文字间距 */\r\n        letter-spacing: 1px;\r\n    }\r\n    /* 返回超链接悬浮 */\r\n    .returnLogin:hover{\r\n        text-decoration: underline;\r\n        color: #4a95f1;\r\n    }\r\n    /* center */\r\n    #center{\r\n        top: 20%;\r\n        left: 20%;\r\n        position: absolute;\r\n    }\r\n    /*\r\n     * form 表单\r\n     */\r\n    #form{\r\n        /* 位置 */\r\n        top: 27%;\r\n        left: 52%;\r\n        position: absolute;\r\n        /* 窗口大小 */\r\n        width: 30%;\r\n        height: 50%;\r\n    }\r\n    /* 输入提示 */\r\n    .input-title{\r\n        color: #000000;\r\n        font-size: 20px;\r\n        font-family: \"微软雅黑\";\r\n        font-weight: 400;\r\n        /* 文字间距 */\r\n        letter-spacing: 1px;\r\n    }\r\n    /* 输入框 */\r\n    ::v-deep .el-input__inner {\r\n        font-size: 16px;\r\n        height: 60px;\r\n        border-radius: 8px;\r\n        background-color: #EBF0F6;\r\n    }\r\n    /* 确认按钮 */\r\n    .confirm{\r\n        height: 55px;\r\n        width: 100%;\r\n        /* 圆角半径 */\r\n        border-radius: 10px;\r\n        background-color: #4460F0;\r\n    }\r\n    /* 确认按钮活动 */\r\n    .confirm:hover{\r\n        background-color: #3024ba;\r\n    }\r\n    /* 确认文字 */\r\n    .btLogin{\r\n        color: #ffffff;\r\n        font-size: 20px;\r\n        font-weight: 500;\r\n        font-family: \"微软雅黑\";\r\n        /* 文字间距 */\r\n        letter-spacing: 10px;\r\n    }\r\n    /* 版权信息*/\r\n    #form-info{\r\n        /* 位置偏移 */\r\n        left: 30px;\r\n        position: relative;\r\n        color: #808892;\r\n        font-size: 14px;\r\n        font-family: \"微软雅黑\";\r\n        /* 文字间距 */\r\n        letter-spacing: 1px;\r\n    }\r\n\r\n</style>"]},"metadata":{},"sourceType":"module"}