{"ast":null,"code":"import \"core-js/modules/es.function.name.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport TableExport from \"@/components/TableExport\";\nexport default {\n  name: \"AdmCourseManage\",\n  components: {\n    TableExport: TableExport\n  },\n  data: function data() {\n    return {\n      // 课程数据\n      course: '',\n      // 激活标签项\n      activeName: '',\n      // 加载动画\n      loading: false,\n      // 表格数据\n      tableData: [],\n      // 当前页码\n      currentPage: 1,\n      // 分页大小\n      pageSize: 10,\n      // 总页码数\n      totalCount: 1,\n      // 查询表单\n      searchForm: {\n        title: ''\n      },\n      // 内置查询表单\n      searchFormIn: {\n        title: ''\n      },\n      // 数据获取路径\n      url: '',\n      // 用户信息获取路径\n      getUserInfoUrl: '/CourseUser/getPageByCondition',\n      // 文件获取路径\n      getResUrl: '/Resource/getPageByCondition',\n      // 通知获取路径\n      getNtcUrl: '/Notice/getNoticeByTitle',\n      // 讨论获取路径\n      getDicUrl: '/Discussion/getDiscussionByTitle',\n      // 删除文件路径\n      delUrl: '',\n      // 用户信息删除路径\n      delUserInfoUrl: '/CourseUser/deleteById/',\n      // 文件获取路径\n      delResUrl: '/Resource/deleteById/',\n      // 通知获取路径\n      delNtcUrl: '/Notice/deleteById/',\n      // 讨论获取路径\n      delDicUrl: '/Discussion/deleteById/'\n    };\n  },\n  created: function created() {\n    this.getCourse(); // 激活标签\n\n    this.activeName = '1'; // 初始化url\n\n    this.url = this.getUserInfoUrl;\n    this.delUrl = this.delUserInfoUrl; // 开启加载动画\n\n    this.loading = true; // 查询数据\n\n    this.getData(this.url);\n  },\n  methods: {\n    // 获取课程信息\n    getCourse: function getCourse() {\n      var _this = this;\n\n      var course = {\n        courseId: this.$route.params.courseId\n      };\n      this.$axios.post(\"/CourseView/getCourseInfoById\", course).then(function (res) {\n        if (res.data.flag) {\n          // 保存用户数据\n          _this.course = res.data.data;\n        } else {\n          // 服务故障\n          _this.$message.error(\"数据拉取失败！\");\n        }\n      });\n    },\n    // 返回章节区\n    goBack: function goBack() {\n      this.$router.go(-1);\n    },\n    // 标签点击\n    handleClick: function handleClick(tab) {\n      this.loading = true; // this.tableData.length = 0;\n\n      this.tableData = [];\n\n      switch (tab._props.name) {\n        case '1':\n          this.url = this.getUserInfoUrl;\n          this.delUrl = this.delUserInfoUrl;\n          break;\n\n        case '2':\n          this.url = this.getResUrl;\n          this.delUrl = this.delResUrl;\n          break;\n\n        case '3':\n          this.url = this.getNtcUrl;\n          this.delUrl = this.delNtcUrl;\n          break;\n\n        case '4':\n          this.url = this.getDicUrl;\n          this.delUrl = this.delDicUrl;\n          break;\n      }\n\n      this.getData(this.url);\n    },\n    // 表格颜色控制\n    tableRowClassName: function tableRowClassName(_ref) {\n      var rowIndex = _ref.rowIndex;\n\n      if (rowIndex % 4 === 1) {\n        return 'warning-row';\n      } else if (rowIndex % 4 === 3) {\n        return 'success-row';\n      }\n\n      return '';\n    },\n    // 搜索表单\n    searchOnSubmit: function searchOnSubmit(title) {\n      this.searchFormIn.title = title;\n      this.getData(this.url);\n      /* 清空搜索条件 */\n\n      this.searchForm.title = '';\n    },\n    // 获取文件数据\n    getData: function getData(url) {\n      var _this2 = this;\n\n      this.searchFormIn[\"pageSize\"] = this.pageSize;\n      this.searchFormIn[\"currentPage\"] = this.currentPage;\n      this.$axios.post(url, this.searchFormIn).then(function (res) {\n        if (res.data.flag) {\n          /* 保存公告数据 */\n          setTimeout(function () {\n            _this2.loading = false;\n            _this2.tableData = res.data.data.records;\n            /* 保存分页数据 */\n\n            _this2.totalCount = res.data.data.total;\n            _this2.currentPage = res.data.data.current;\n            _this2.pageSize = res.data.data.size;\n          }, 200);\n        } else {\n          // 服务故障\n          _this2.$message.error(\"信息获取失败！\");\n        }\n      });\n    },\n    // 删除数据\n    deleteRow: function deleteRow(id) {\n      var _this3 = this;\n\n      // 弹框确认\n      this.$confirm('此操作将永久删除该项及其相关数据, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(function () {\n        // 执行删除\n        _this3.$axios.get(_this3.delUrl + id).then(function (resp) {\n          if (resp.data.flag) {\n            // 删除成功，刷新数据\n            _this3.getData(_this3.url);\n\n            _this3.$message.success('删除成功！');\n          } else {\n            _this3.$message.error('删除失败！');\n          }\n        });\n      }).catch(function () {\n        // 取消删除\n        _this3.$message.info('取消删除');\n      });\n    },\n    //分页大小变化\n    handleSizeChange: function handleSizeChange(val) {\n      this.pageSize = val; // 查询所有数据\n\n      this.getData(this.url);\n    },\n    // 当前页变化\n    handleCurrentChange: function handleCurrentChange(val) {\n      this.currentPage = val; // 查询所有数据\n\n      this.getData(this.url);\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8VA;AACA;AACAA,yBADA;AAEAC;AACAC;AADA,GAFA;AAKAC,MALA,kBAKA;AACA;AACA;AACAC,gBAFA;AAGA;AACAC,oBAJA;AAKA;AACAC,oBANA;AAOA;AACAC,mBARA;AASA;AACAC,oBAVA;AAWA;AACAC,kBAZA;AAaA;AACAC,mBAdA;AAeA;AACAC;AACAC;AADA,OAhBA;AAmBA;AACAC;AACAD;AADA,OApBA;AAuBA;AACAE,aAxBA;AAyBA;AACAC,sDA1BA;AA2BA;AACAC,+CA5BA;AA6BA;AACAC,2CA9BA;AA+BA;AACAC,mDAhCA;AAiCA;AACAC,gBAlCA;AAmCA;AACAC,+CApCA;AAqCA;AACAC,wCAtCA;AAuCA;AACAC,sCAxCA;AAyCA;AACAC;AA1CA;AA4CA,GAlDA;AAmDAC,SAnDA,qBAmDA;AACA,qBADA,CAEA;;AACA,0BAHA,CAIA;;AACA;AACA,sCANA,CAOA;;AACA,wBARA,CASA;;AACA;AACA,GA9DA;AA+DAC;AACA;AACAC,aAFA,uBAEA;AAAA;;AACA;AAAAC;AAAA;AACA;AACA;AACA;AACA;AACA,SAHA,MAGA;AACA;AACA;AACA;AACA,OARA;AASA,KAbA;AAcA;AACAC,UAfA,oBAeA;AACA;AACA,KAjBA;AAkBA;AACAC,eAnBA,uBAmBAC,GAnBA,EAmBA;AACA,0BADA,CAEA;;AACA;;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;AAhBA;;AAkBA;AACA,KA1CA;AA2CA;AACAC,qBA5CA,mCA4CA;AAAA;;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;;AACA;AACA,KAnDA;AAoDA;AACAC,kBArDA,0BAqDApB,KArDA,EAqDA;AACA;AACA;AACA;;AACA;AACA,KA1DA;AA2DA;AACAqB,WA5DA,mBA4DAnB,GA5DA,EA4DA;AAAA;;AACA;AACA;AACA;AACA;AACA;AACAoB;AACA;AACA;AACA;;AACA;AACA;AACA;AACA,WAPA,EAOA,GAPA;AAQA,SAVA,MAUA;AACA;AACA;AACA;AACA,OAfA;AAgBA,KA/EA;AAgFA;AACAC,aAjFA,qBAiFAC,EAjFA,EAiFA;AAAA;;AACA;AACA;AACAC,+BADA;AAEAC,8BAFA;AAGAC;AAHA,SAIAC,IAJA,CAIA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA,WAJA,MAIA;AACA;AACA;AACA,SARA;AASA,OAfA,EAeAC,KAfA,CAeA;AACA;AACA;AACA,OAlBA;AAmBA,KAtGA;AAuGA;AACAC,oBAxGA,4BAwGAC,GAxGA,EAwGA;AACA,0BADA,CAEA;;AACA;AACA,KA5GA;AA6GA;AACAC,uBA9GA,+BA8GAD,GA9GA,EA8GA;AACA,6BADA,CAEA;;AACA;AACA;AAlHA;AA/DA","names":["name","components","TableExport","data","course","activeName","loading","tableData","currentPage","pageSize","totalCount","searchForm","title","searchFormIn","url","getUserInfoUrl","getResUrl","getNtcUrl","getDicUrl","delUrl","delUserInfoUrl","delResUrl","delNtcUrl","delDicUrl","created","methods","getCourse","courseId","goBack","handleClick","tab","tableRowClassName","searchOnSubmit","getData","setTimeout","deleteRow","id","confirmButtonText","cancelButtonText","type","then","catch","handleSizeChange","val","handleCurrentChange"],"sourceRoot":"src/pages/admin/components","sources":["AdmCourseManage.vue"],"sourcesContent":["<template>\r\n    <div>\r\n        <!-- 页头 -->\r\n        <el-page-header @back=\"goBack\" title=\"返回\" :content=\"course.courseName\" id=\"pageHeader\"></el-page-header>\r\n        <el-card :body-style=\"{ padding: '0px' }\">\r\n            <div id=\"ManageCard\">\r\n                <el-tabs v-model=\"activeName\" @tab-click=\"handleClick\">\r\n                    <!--　用户管理　-->\r\n                    <el-tab-pane label=\"用户管理\" name=\"1\">\r\n                        <!-- 功能菜单 -->\r\n                        <el-row style=\"position: relative; height: 90px\">\r\n                            <!--按钮-->\r\n                            <el-col :span=\"6\" id=\"functionMenu\">\r\n                                <TableExport style=\"margin-left: 1em;\" table-id=\"user-table\"></TableExport>\r\n                            </el-col>\r\n                            <!--搜索表单-->\r\n                            <el-col :span=\"8\">\r\n                                <el-form :inline=\"true\" :model=\"searchForm\" class=\"file-form-select\">\r\n                                    <el-form-item label=\"搜索内容\">\r\n                                        <el-input v-model=\"searchForm.title\" placeholder=\"文件名\"></el-input>\r\n                                    </el-form-item>\r\n                                    <el-form-item>\r\n                                        <el-button type=\"primary\" @click=\"searchOnSubmit(searchForm.title)\">查询</el-button>\r\n                                    </el-form-item>\r\n                                    <el-form-item>\r\n                                        <el-button type=\"success\" @click=\"searchOnSubmit('')\">重置</el-button>\r\n                                    </el-form-item>\r\n                                </el-form>\r\n                            </el-col>\r\n                        </el-row>\r\n                        <!-- 表格 -->\r\n                        <template>\r\n                            <el-table\r\n                                    id=\"user-table\"\r\n                                    v-loading=\"loading\"\r\n                                    :data=\"tableData\"\r\n                                    style=\"width: 100%\"\r\n                                    :row-class-name=\"tableRowClassName\">\r\n                                <el-table-column\r\n                                        label=\"序号\"\r\n                                        type=\"index\"\r\n                                        align=\"center\"\r\n                                        width=\"100\">\r\n                                </el-table-column>\r\n                                <el-table-column\r\n                                        prop=\"username\"\r\n                                        label=\"名称\"\r\n                                        align=\"center\">\r\n                                </el-table-column>\r\n                                <el-table-column\r\n                                        prop=\"resDlNum\"\r\n                                        label=\"课件下载次数\"\r\n                                        align=\"center\"\r\n                                        sortable>\r\n                                </el-table-column>\r\n                                <el-table-column\r\n                                        prop=\"discussionCreateNum\"\r\n                                        label=\"创建讨论数\"\r\n                                        align=\"center\"\r\n                                        sortable>\r\n                                </el-table-column>\r\n                                <el-table-column\r\n                                        prop=\"chapterViewTime\"\r\n                                        label=\"章节观看时长\"\r\n                                        align=\"center\"\r\n                                        sortable>\r\n                                </el-table-column>\r\n                                <el-table-column\r\n                                        prop=\"chapterViewNum\"\r\n                                        label=\"章节观看次数\"\r\n                                        align=\"center\"\r\n                                        sortable>\r\n                                </el-table-column>\r\n                                <el-table-column\r\n                                        prop=\"replyNum\"\r\n                                        label=\"发表回复数\"\r\n                                        align=\"center\"\r\n                                        sortable>\r\n                                </el-table-column>\r\n                                <el-table-column\r\n                                        prop=\"formatDateShort\"\r\n                                        label=\"加入时间\"\r\n                                        align=\"center\"\r\n                                        sortable>\r\n                                </el-table-column>\r\n                                <el-table-column\r\n                                        align=\"center\"\r\n                                        label=\"操作\">\r\n                                    <template slot-scope=\"scope\">\r\n                                        <el-button type=\"danger\" @click=\"deleteRow(scope.row.id)\">移出课堂</el-button>\r\n                                    </template>\r\n                                </el-table-column>\r\n                            </el-table>\r\n                        </template>\r\n                        <!--分页工具条 数据小于10条不展示-->\r\n                        <el-pagination\r\n                                class=\"pageBar\"\r\n                                v-show=\"totalCount >= 10\"\r\n                                @size-change=\"handleSizeChange\"\r\n                                @current-change=\"handleCurrentChange\"\r\n                                :current-page=\"currentPage\"\r\n                                :page-sizes=\"[5, 10, 15, 20, 50, 100]\"\r\n                                :page-size=\"pageSize\"\r\n                                layout=\"total, sizes, prev, pager, next, jumper\"\r\n                                :total=\"totalCount\">\r\n                        </el-pagination>\r\n                    </el-tab-pane>\r\n                    <!--　文件管理　-->\r\n                    <el-tab-pane label=\"文件管理\" name=\"2\">\r\n                        <!-- 功能菜单 -->\r\n                        <el-row style=\"position: relative; height: 90px\">\r\n                            <!--搜索表单-->\r\n                            <el-col :span=\"8\">\r\n                                <el-form :inline=\"true\" :model=\"searchForm\" class=\"file-form-select\">\r\n                                    <el-form-item label=\"搜索内容\">\r\n                                        <el-input v-model=\"searchForm.title\" placeholder=\"文件名\"></el-input>\r\n                                    </el-form-item>\r\n                                    <el-form-item>\r\n                                        <el-button type=\"primary\" @click=\"searchOnSubmit(searchForm.title)\">查询</el-button>\r\n                                    </el-form-item>\r\n                                    <el-form-item>\r\n                                        <el-button type=\"success\" @click=\"searchOnSubmit('')\">重置</el-button>\r\n                                    </el-form-item>\r\n                                </el-form>\r\n                            </el-col>\r\n                        </el-row>\r\n                        <!-- 表格 -->\r\n                        <template>\r\n                            <el-table\r\n                                    v-loading=\"loading\"\r\n                                    :data=\"tableData\"\r\n                                    style=\"width: 100%\"\r\n                                    :row-class-name=\"tableRowClassName\">\r\n                                <el-table-column\r\n                                        label=\"序号\"\r\n                                        type=\"index\"\r\n                                        width=\"100\"\r\n                                        align=\"center\">\r\n                                </el-table-column>\r\n                                <el-table-column\r\n                                        prop=\"resourceName\"\r\n                                        label=\"文件名\"\r\n                                        width=\"400\"\r\n                                        align=\"center\"\r\n                                        sortable>\r\n                                </el-table-column>\r\n                                <el-table-column\r\n                                        prop=\"resourceSizeStr\"\r\n                                        label=\"文件大小\"\r\n                                        align=\"center\">\r\n                                </el-table-column>\r\n                                <el-table-column\r\n                                        prop=\"downloadNum\"\r\n                                        label=\"下载量\"\r\n                                        sortable\r\n                                        align=\"center\">\r\n                                </el-table-column>\r\n                                <el-table-column\r\n                                        prop=\"formatDate\"\r\n                                        label=\"创建日期\"\r\n                                        sortable\r\n                                        align=\"center\">\r\n                                </el-table-column>\r\n\r\n                                <el-table-column\r\n                                        align=\"center\"\r\n                                        label=\"操作\">\r\n                                    <template slot-scope=\"scope\">\r\n                                        <el-button type=\"danger\" @click=\"deleteRow(scope.row.resourceId)\">删除</el-button>\r\n                                    </template>\r\n                                </el-table-column>\r\n                            </el-table>\r\n                        </template>\r\n                        <!--分页工具条 数据小于10条不展示-->\r\n                        <el-pagination\r\n                                class=\"pageBar\"\r\n                                v-show=\"totalCount >= 10\"\r\n                                @size-change=\"handleSizeChange\"\r\n                                @current-change=\"handleCurrentChange\"\r\n                                :current-page=\"currentPage\"\r\n                                :page-sizes=\"[5, 10, 15, 20, 50, 100]\"\r\n                                :page-size=\"pageSize\"\r\n                                layout=\"total, sizes, prev, pager, next, jumper\"\r\n                                :total=\"totalCount\">\r\n                        </el-pagination>\r\n                    </el-tab-pane>\r\n                    <!-- 通知管理 -->\r\n                    <el-tab-pane label=\"通知管理\" name=\"3\">\r\n                        <!-- 功能菜单 -->\r\n                        <el-row style=\"position: relative; height: 90px\">\r\n                            <!--搜索表单-->\r\n                            <el-col :span=\"8\">\r\n                                <el-form :inline=\"true\" :model=\"searchForm\" class=\"file-form-select\">\r\n                                    <el-form-item label=\"搜索内容\">\r\n                                        <el-input v-model=\"searchForm.title\" placeholder=\"文件名\"></el-input>\r\n                                    </el-form-item>\r\n                                    <el-form-item>\r\n                                        <el-button type=\"primary\" @click=\"searchOnSubmit(searchForm.title)\">查询</el-button>\r\n                                    </el-form-item>\r\n                                    <el-form-item>\r\n                                        <el-button type=\"success\" @click=\"searchOnSubmit('')\">重置</el-button>\r\n                                    </el-form-item>\r\n                                </el-form>\r\n                            </el-col>\r\n                        </el-row>\r\n                        <!-- 表格 -->\r\n                        <template>\r\n                            <el-table\r\n                                    v-loading=\"loading\"\r\n                                    :data=\"tableData\"\r\n                                    style=\"width: 100%\"\r\n                                    :row-class-name=\"tableRowClassName\">\r\n                                <el-table-column\r\n                                        label=\"序号\"\r\n                                        type=\"index\"\r\n                                        align=\"center\"\r\n                                        width=\"100\">\r\n                                </el-table-column>\r\n                                <el-table-column\r\n                                        prop=\"title\"\r\n                                        label=\"标题\"\r\n                                        align=\"center\"\r\n                                        sortable\r\n                                        width=\"400\">\r\n                                </el-table-column>\r\n                                <el-table-column\r\n                                        prop=\"hits\"\r\n                                        label=\"点击量\"\r\n                                        align=\"center\"\r\n                                        sortable>\r\n                                </el-table-column>\r\n                                <el-table-column\r\n                                        prop=\"formatDate\"\r\n                                        label=\"创建日期\"\r\n                                        align=\"center\"\r\n                                        sortable>\r\n                                </el-table-column>\r\n                                <el-table-column\r\n                                        align=\"center\"\r\n                                        label=\"操作\">\r\n                                    <template slot-scope=\"scope\">\r\n                                        <el-button type=\"danger\" @click=\"deleteRow(scope.row.noticeId)\">删除</el-button>\r\n                                    </template>\r\n                                </el-table-column>\r\n                            </el-table>\r\n                        </template>\r\n                        <!--分页工具条 数据小于10条不展示-->\r\n                        <el-pagination\r\n                                class=\"pageBar\"\r\n                                v-show=\"totalCount >= 10\"\r\n                                @size-change=\"handleSizeChange\"\r\n                                @current-change=\"handleCurrentChange\"\r\n                                :current-page=\"currentPage\"\r\n                                :page-sizes=\"[5, 10, 15, 20, 50, 100]\"\r\n                                :page-size=\"pageSize\"\r\n                                layout=\"total, sizes, prev, pager, next, jumper\"\r\n                                :total=\"totalCount\">\r\n                        </el-pagination>\r\n                    </el-tab-pane>\r\n                    <!-- 讨论管理 -->\r\n                    <el-tab-pane label=\"讨论管理\" name=\"4\">\r\n                        <!-- 功能菜单 -->\r\n                        <el-row style=\"position: relative; height: 90px\">\r\n                            <!--搜索表单-->\r\n                            <el-col :span=\"8\">\r\n                                <el-form :inline=\"true\" :model=\"searchForm\" class=\"file-form-select\">\r\n                                    <el-form-item label=\"搜索内容\">\r\n                                        <el-input v-model=\"searchForm.title\" placeholder=\"文件名\"></el-input>\r\n                                    </el-form-item>\r\n                                    <el-form-item>\r\n                                        <el-button type=\"primary\" @click=\"searchOnSubmit(searchForm.title)\">查询</el-button>\r\n                                    </el-form-item>\r\n                                    <el-form-item>\r\n                                        <el-button type=\"success\" @click=\"searchOnSubmit('')\">重置</el-button>\r\n                                    </el-form-item>\r\n                                </el-form>\r\n                            </el-col>\r\n                        </el-row>\r\n                        <!-- 表格 -->\r\n                        <template>\r\n                            <el-table\r\n                                    v-loading=\"loading\"\r\n                                    :data=\"tableData\"\r\n                                    style=\"width: 100%\"\r\n                                    :row-class-name=\"tableRowClassName\">\r\n                                <el-table-column\r\n                                        label=\"序号\"\r\n                                        type=\"index\"\r\n                                        align=\"center\"\r\n                                        width=\"100\">\r\n                                </el-table-column>\r\n                                <el-table-column\r\n                                        prop=\"title\"\r\n                                        label=\"标题\"\r\n                                        align=\"center\"\r\n                                        sortable>\r\n                                </el-table-column>\r\n                                <el-table-column\r\n                                        prop=\"username\"\r\n                                        label=\"发布者\"\r\n                                        align=\"center\"\r\n                                        sortable>\r\n                                </el-table-column>\r\n                                <el-table-column\r\n                                        prop=\"hits\"\r\n                                        label=\"点击量\"\r\n                                        align=\"center\"\r\n                                        sortable>\r\n                                </el-table-column>\r\n                                <el-table-column\r\n                                        prop=\"likes\"\r\n                                        label=\"点赞数\"\r\n                                        align=\"center\"\r\n                                        sortable>\r\n                                </el-table-column>\r\n                                <el-table-column\r\n                                        prop=\"formatDate\"\r\n                                        label=\"创建日期\"\r\n                                        align=\"center\"\r\n                                        sortable>\r\n                                </el-table-column>\r\n                                <el-table-column\r\n                                        align=\"center\"\r\n                                        label=\"操作\">\r\n                                    <template slot-scope=\"scope\">\r\n                                        <el-button type=\"danger\" @click=\"deleteRow(scope.row.discussionId)\">删除</el-button>\r\n                                    </template>\r\n                                </el-table-column>\r\n                            </el-table>\r\n                        </template>\r\n                        <!--分页工具条 数据小于10条不展示-->\r\n                        <el-pagination\r\n                                class=\"pageBar\"\r\n                                v-show=\"totalCount >= 10\"\r\n                                @size-change=\"handleSizeChange\"\r\n                                @current-change=\"handleCurrentChange\"\r\n                                :current-page=\"currentPage\"\r\n                                :page-sizes=\"[5, 10, 15, 20, 50, 100]\"\r\n                                :page-size=\"pageSize\"\r\n                                layout=\"total, sizes, prev, pager, next, jumper\"\r\n                                :total=\"totalCount\">\r\n                        </el-pagination>\r\n                    </el-tab-pane>\r\n                </el-tabs>\r\n            </div>\r\n        </el-card>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import TableExport from \"@/components/TableExport\";\r\n    export default {\r\n        name: \"AdmCourseManage\",\r\n        components:{\r\n            TableExport,\r\n        },\r\n        data(){\r\n            return{\r\n                // 课程数据\r\n                course:'',\r\n                // 激活标签项\r\n                activeName: '',\r\n                // 加载动画\r\n                loading:false,\r\n                // 表格数据\r\n                tableData:[],\r\n                // 当前页码\r\n                currentPage: 1,\r\n                // 分页大小\r\n                pageSize: 10,\r\n                // 总页码数\r\n                totalCount: 1,\r\n                // 查询表单\r\n                searchForm:{\r\n                    title:'',\r\n                },\r\n                // 内置查询表单\r\n                searchFormIn:{\r\n                    title:'',\r\n                },\r\n                // 数据获取路径\r\n                url:'',\r\n                // 用户信息获取路径\r\n                getUserInfoUrl:'/CourseUser/getPageByCondition',\r\n                // 文件获取路径\r\n                getResUrl:'/Resource/getPageByCondition',\r\n                // 通知获取路径\r\n                getNtcUrl:'/Notice/getNoticeByTitle',\r\n                // 讨论获取路径\r\n                getDicUrl:'/Discussion/getDiscussionByTitle',\r\n                // 删除文件路径\r\n                delUrl:'',\r\n                // 用户信息删除路径\r\n                delUserInfoUrl:'/CourseUser/deleteById/',\r\n                // 文件获取路径\r\n                delResUrl:'/Resource/deleteById/',\r\n                // 通知获取路径\r\n                delNtcUrl:'/Notice/deleteById/',\r\n                // 讨论获取路径\r\n                delDicUrl:'/Discussion/deleteById/',\r\n            }\r\n        },\r\n        created() {\r\n            this.getCourse();\r\n            // 激活标签\r\n            this.activeName = '1';\r\n            // 初始化url\r\n            this.url = this.getUserInfoUrl;\r\n            this.delUrl = this.delUserInfoUrl;\r\n            // 开启加载动画\r\n            this.loading = true;\r\n            // 查询数据\r\n            this.getData(this.url);\r\n        },\r\n        methods:{\r\n            // 获取课程信息\r\n            getCourse(){\r\n                let course = {courseId: this.$route.params.courseId};\r\n                this.$axios.post(\"/CourseView/getCourseInfoById\", course).then((res)=>{\r\n                    if(res.data.flag){\r\n                        // 保存用户数据\r\n                        this.course = res.data.data;\r\n                    }else{\r\n                        // 服务故障\r\n                        this.$message.error(\"数据拉取失败！\");\r\n                    }\r\n                });\r\n            },\r\n            // 返回章节区\r\n            goBack(){\r\n                this.$router.go(-1);\r\n            },\r\n            // 标签点击\r\n            handleClick(tab) {\r\n                this.loading = true;\r\n                // this.tableData.length = 0;\r\n                this.tableData = [];\r\n                switch (tab._props.name) {\r\n                    case '1':\r\n                        this.url = this.getUserInfoUrl;\r\n                        this.delUrl = this.delUserInfoUrl;\r\n                        break;\r\n                    case '2':\r\n                        this.url = this.getResUrl;\r\n                        this.delUrl = this.delResUrl;\r\n                        break;\r\n                    case '3':\r\n                        this.url = this.getNtcUrl;\r\n                        this.delUrl = this.delNtcUrl;\r\n                        break;\r\n                    case '4':\r\n                        this.url = this.getDicUrl;\r\n                        this.delUrl = this.delDicUrl;\r\n                        break;\r\n                }\r\n                this.getData(this.url);\r\n            },\r\n            // 表格颜色控制\r\n            tableRowClassName({rowIndex}) {\r\n                if (rowIndex%4 === 1) {\r\n                    return 'warning-row';\r\n                } else if (rowIndex%4 === 3) {\r\n                    return 'success-row';\r\n                }\r\n                return '';\r\n            },\r\n            // 搜索表单\r\n            searchOnSubmit(title){\r\n                this.searchFormIn.title = title;\r\n                this.getData(this.url);\r\n                /* 清空搜索条件 */\r\n                this.searchForm.title='';\r\n            },\r\n            // 获取文件数据\r\n            getData(url){\r\n                this.searchFormIn[\"pageSize\"]=this.pageSize;\r\n                this.searchFormIn[\"currentPage\"]=this.currentPage;\r\n                this.$axios.post(url,this.searchFormIn).then((res)=>{\r\n                    if(res.data.flag){\r\n                        /* 保存公告数据 */\r\n                        setTimeout(()=>{\r\n                            this.loading=false;\r\n                            this.tableData = res.data.data.records;\r\n                            /* 保存分页数据 */\r\n                            this.totalCount = res.data.data.total;\r\n                            this.currentPage = res.data.data.current;\r\n                            this.pageSize = res.data.data.size;\r\n                            },200);\r\n                    }else{\r\n                        // 服务故障\r\n                        this.$message.error(\"信息获取失败！\");\r\n                    }\r\n                });\r\n            },\r\n            // 删除数据\r\n            deleteRow(id){\r\n                // 弹框确认\r\n                this.$confirm('此操作将永久删除该项及其相关数据, 是否继续?', '提示', {\r\n                    confirmButtonText: '确定',\r\n                    cancelButtonText: '取消',\r\n                    type: 'warning'\r\n                }).then(() => {\r\n                    // 执行删除\r\n                    this.$axios.get(this.delUrl + id).then(resp=>{\r\n                        if(resp.data.flag){\r\n                            // 删除成功，刷新数据\r\n                            this.getData(this.url);\r\n                            this.$message.success('删除成功！');\r\n                        }else{\r\n                            this.$message.error('删除失败！');\r\n                        }\r\n                    })\r\n                }).catch(() => {\r\n                    // 取消删除\r\n                    this.$message.info('取消删除');\r\n                });\r\n            },\r\n            //分页大小变化\r\n            handleSizeChange(val) {\r\n                this.pageSize = val;\r\n                // 查询所有数据\r\n                this.getData(this.url);\r\n            },\r\n            // 当前页变化\r\n            handleCurrentChange(val) {\r\n                this.currentPage = val;\r\n                // 查询所有数据\r\n                this.getData(this.url);\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    ::v-deep .el-page-header__left:hover{\r\n        color: #3a75ff;\r\n    }\r\n\r\n    /* 返回签字体大小 */\r\n    ::v-deep .el-page-header__title {\r\n        font-size: 17px;\r\n        font-weight: 500;\r\n    }\r\n    /* 返回签模型 */\r\n    #pageHeader{\r\n        width: 300px;\r\n        margin-left: 20px;\r\n        margin-top: 20px;\r\n        margin-bottom: 20px;\r\n    }\r\n    /*　管理卡片　*/\r\n    #ManageCard{\r\n        min-height: 30em;\r\n        width: 95%;\r\n        margin: 1em 2em;\r\n    }\r\n    /* 功能栏 */\r\n    #functionMenu{\r\n        position: absolute;\r\n        display: block;\r\n        margin-top: 20px;\r\n        margin-left: 20px;\r\n    }\r\n    ::v-deep .el-tabs__item {\r\n        font-size: 16px;\r\n    }\r\n    /* 搜索框 */\r\n    .file-form-select{\r\n        left: 200%;\r\n        margin-top: 20px;\r\n        position: relative;\r\n    }\r\n    /* 表格文字大小 */\r\n    .el-table{\r\n        font-size: 17px;\r\n    }\r\n    /* 分页工具条上框 */\r\n    .pageBar{\r\n        margin-top: 20px;\r\n    }\r\n</style>"]},"metadata":{},"sourceType":"module"}