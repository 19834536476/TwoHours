{"ast":null,"code":"//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport UserAvatar from \"@/components/UserAvatar\";\nexport default {\n  name: \"StuExamScore\",\n  components: {\n    UserAvatar: UserAvatar\n  },\n  data: function data() {\n    return {\n      exam: {},\n      // 考试信息\n      activeNames: [],\n      // 试题激活项\n      studentExam: {},\n      // 考试数据\n      subjects: [] // 试题集合\n\n    };\n  },\n  created: function created() {\n    this.getExam();\n  },\n  methods: {\n    // 查询考试数据\n    getExam: function getExam() {\n      var _this = this;\n\n      var exam = {\n        examId: this.$route.params.examId\n      };\n      this.$axios.post(\"/Exam/getExamById\", exam).then(function (res) {\n        if (res.data.flag) {\n          /* 保存公告数据 */\n          _this.exam = res.data.data;\n\n          _this.getSubject(); // 获取标准答案\n\n\n          _this.getStudentExam(); // 获取考试信息\n\n        } else {\n          // 服务故障\n          _this.$message.error(\"信息获取失败！\");\n        }\n      });\n    },\n    // 查询试题数据\n    getSubject: function getSubject() {\n      var _this2 = this;\n\n      this.$axios.post(\"/Paper/getPaperByExamId\", this.exam).then(function (res) {\n        if (res.data.flag) {\n          /* 保存公告数据 */\n          _this2.subjects = res.data.data;\n        } else {\n          // 服务故障\n          _this2.$message.error(\"信息获取失败！\");\n        }\n      });\n    },\n    // 获取本人的考试信息\n    getStudentExam: function getStudentExam() {\n      var _this3 = this;\n\n      this.$axios.post(\"/Answer/getOneUserAnswer\", this.exam).then(function (res) {\n        if (res.data.flag) {\n          _this3.studentExam = res.data.data;\n          console.log(_this3.studentExam);\n        } else {\n          // 服务故障\n          _this3.$message.error(\"信息获取失败！\");\n        }\n      });\n    },\n    // 全部折叠\n    allHidden: function allHidden() {\n      this.activeNames = [];\n    },\n    // 全部展开\n    allShow: function allShow() {\n      this.allHidden();\n      /* 激活全部题组 */\n\n      for (var i = 0; i < this.studentExam.solutions.length; i++) {\n        this.$set(this.activeNames, i, i);\n      }\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuLA;AACA;AACAA,sBADA;AAEAC;AACAC;AADA,GAFA;AAKAC,MALA,kBAKA;AACA;AACAC,cADA;AACA;AACAC,qBAFA;AAEA;AACAC,qBAHA;AAGA;AACAC,kBAJA,CAIA;;AAJA;AAMA,GAZA;AAaAC,SAbA,qBAaA;AACA;AACA,GAfA;AAgBAC;AACA;AACAC,WAFA,qBAEA;AAAA;;AACA;AAAAC;AAAA;AACA;AACA;AACA;AACA;;AACA,6BAHA,CAGA;;;AACA,iCAJA,CAIA;;AACA,SALA,MAKA;AACA;AACA;AACA;AACA,OAVA;AAWA,KAfA;AAgBA;AACAC,cAjBA,wBAiBA;AAAA;;AACA;AACA;AACA;AACA;AACA,SAHA,MAGA;AACA;AACA;AACA;AACA,OARA;AASA,KA3BA;AA4BA;AACAC,kBA7BA,4BA6BA;AAAA;;AACA;AACA;AACA;AACAC;AACA,SAHA,MAGA;AACA;AACA;AACA;AACA,OARA;AASA,KAvCA;AAwCA;AACAC,aAzCA,uBAyCA;AACA;AACA,KA3CA;AA4CA;AACAC,WA7CA,qBA6CA;AACA;AACA;;AACA;AAAA;AAAA;AACA;AAjDA;AAhBA","names":["name","components","UserAvatar","data","exam","activeNames","studentExam","subjects","created","methods","getExam","examId","getSubject","getStudentExam","console","allHidden","allShow"],"sourceRoot":"src/pages/user/studentComponents","sources":["StuExamScore.vue"],"sourcesContent":["<template>\r\n    <div>\r\n        <!-- 考试详情 -->\r\n        <el-card :body-style=\"{ padding: '0px'}\" style=\"margin-top: 2em\">\r\n            <div id=\"examCards\">\r\n                <!-- 标题和时间 -->\r\n                <div style=\"margin-top: 1.2em;\">\r\n                    <span id=\"examTitle\">{{exam.title}}</span>\r\n                    <span id=\"examDate\">{{exam.formatCreateDate}}</span>\r\n                </div>\r\n                <!-- 内容 -->\r\n                <div id=\"examDetails\" v-html=\"exam.detail\">{{exam.detail}}</div>\r\n            </div>\r\n        </el-card>\r\n        <!-- 分界线 -->\r\n        <el-divider id=\"myDivider\"><div style=\"font-size: 18px\">考试成绩</div></el-divider>\r\n\r\n        <!-- 考生数据 -->\r\n        <el-card id=\"subjectCard\">\r\n            <!-- 功能区 -->\r\n            <div id=\"functionCard\">\r\n                <span style=\"font-size:16px; margin-left: 0.8em; position: relative;\">\r\n                    <span class=\"tagBox\">\r\n                        <user-avatar class=\"userAvatar\" :src=\"studentExam.userAvatar\" :width=\"45\" :height=\"45\"></user-avatar>\r\n                        <span class=\"username\">{{studentExam.username}}</span>\r\n                        <el-tag class=\"subjectTag\" v-if=\"studentExam.submit\">已交卷</el-tag>\r\n                        <el-tag class=\"subjectTag\" v-else type=\"danger\"  >未交卷</el-tag>\r\n                        <el-tag class=\"subjectTag\" type=\"success\" v-if=\"studentExam.isCheckedBool\">已判卷</el-tag>\r\n                        <el-tag class=\"subjectTag\" type=\"warning\" v-else-if=\"studentExam.submit\">待评分</el-tag>\r\n                        <el-tag class=\"subjectTag\" type=\"success\" v-if=\"studentExam.systemCheckedBool\">客观题：{{studentExam.objectiveScore}}分</el-tag>\r\n                        <el-tag class=\"subjectTag\" type=\"success\" v-if=\"studentExam.isCheckedBool\">总分：{{studentExam.score}}分</el-tag>\r\n                    </span>\r\n                </span>\r\n                <el-button type=\"text\" class=\"conSubjectButton\" @click=\"allHidden\">全部折叠</el-button>\r\n                <el-button type=\"text\" class=\"conSubjectButton\" @click=\"allShow\">全部展开</el-button>\r\n            </div>\r\n            <!-- 数据区 -->\r\n            <div v-if=\"studentExam.submit\" class=\"subjectContent\">\r\n                <el-collapse v-model=\"activeNames\">\r\n                    <el-collapse-item v-for=\"(solution,i) in studentExam.solutions\" :key=\"i\" :name=\"i\">\r\n                        <!-- 标题行：显示题号/题型/得分 -->\r\n                        <template slot=\"title\">\r\n                            <el-row style=\"width: 90em;font-size: 15px\">\r\n                                <!-- 题号 -->\r\n                                <el-col :span=\"1\" style=\"text-align: right\">\r\n                                    <div style=\"margin-right: 0.8em\">{{i+1}}.</div>\r\n                                </el-col>\r\n                                <!-- 题型和分数 -->\r\n                                <el-col :span=\"2\">\r\n                                    <!-- 选择题 -->\r\n                                    <div v-if=\"solution.subjectType === 1\">\r\n                                        <el-tag class=\"normalTag subjectTypeTag\" v-if=\"solution.answerNum > 1\">多选（{{subjects[i].choice.score}}分）</el-tag>\r\n                                        <el-tag class=\"normalTag subjectTypeTag\" v-else>单选（{{subjects[i].choice.score}}分）</el-tag>\r\n                                    </div>\r\n                                    <!-- 填空题 -->\r\n                                    <div v-else-if=\"solution.subjectType === 2\">\r\n                                        <el-tag class=\"normalTag subjectTypeTag\">填空（{{subjects[i].filling.score}}分）</el-tag>\r\n                                    </div>\r\n                                    <!-- 判断题 -->\r\n                                    <div v-else-if=\"solution.subjectType === 3\">\r\n                                        <el-tag class=\"normalTag subjectTypeTag\">判断（{{subjects[i].trueFalse.score}}分）</el-tag>\r\n                                    </div>\r\n                                    <!-- 简答题 -->\r\n                                    <div v-else-if=\"solution.subjectType === 4\">\r\n                                        <el-tag class=\"normalTag subjectTypeTag\">简答（{{subjects[i].questionAnswer.score}}分）</el-tag>\r\n                                    </div>\r\n                                </el-col>\r\n                                <!-- 得分 -->\r\n                                <el-col :span=\"2\">\r\n                                    <!-- 选择题 -->\r\n                                    <div v-if=\"solution.subjectType === 1\">\r\n                                        <el-tag type=\"success\" class=\"normalTag scoreTag\" v-if=\"solution.score === subjects[i].choice.score\" >得分：{{solution.score}}分</el-tag>\r\n                                        <el-tag type=\"warning\" class=\"normalTag scoreTag\" v-else-if=\"solution.score > 0\" >得分：{{solution.score}}分</el-tag>\r\n                                        <!-- 0分项目 -->\r\n                                        <el-tag type=\"danger\"  class=\"normalTag scoreTag\" v-else >得分：{{solution.score}}分</el-tag>\r\n                                    </div>\r\n                                    <!-- 填空题 -->\r\n                                    <div v-else-if=\"solution.subjectType === 2\">\r\n                                        <el-tag type=\"success\" class=\"normalTag scoreTag\" v-if=\"solution.score === subjects[i].filling.score\" >得分：{{solution.score}}分</el-tag>\r\n                                        <el-tag type=\"warning\" class=\"normalTag scoreTag\" v-else-if=\"solution.score > 0\" >得分：{{solution.score}}分</el-tag>\r\n                                        <!-- 0分项目 -->\r\n                                        <el-tag type=\"danger\"  class=\"normalTag scoreTag\" v-else >得分：{{solution.score}}分</el-tag>\r\n                                    </div>\r\n                                    <!-- 判断题 -->\r\n                                    <div v-else-if=\"solution.subjectType === 3\">\r\n                                        <el-tag type=\"success\" class=\"normalTag scoreTag\" v-if=\"solution.score === subjects[i].trueFalse.score\" >得分：{{solution.score}}分</el-tag>\r\n                                        <el-tag type=\"warning\" class=\"normalTag scoreTag\" v-else-if=\"solution.score > 0\" >得分：{{solution.score}}分</el-tag>\r\n                                        <!-- 0分项目 -->\r\n                                        <el-tag type=\"danger\"  class=\"normalTag scoreTag\" v-else >得分：{{solution.score}}分</el-tag>\r\n                                    </div>\r\n                                    <!-- 简答题 -->\r\n                                    <div v-else-if=\"solution.subjectType === 4\">\r\n                                        <span v-if=\"studentExam.isCheckedBool\">\r\n                                            <el-tag type=\"success\" class=\"normalTag scoreTag\" v-if=\"solution.score === subjects[i].questionAnswer.score\" >得分：{{solution.score}}分</el-tag>\r\n                                            <el-tag type=\"warning\" class=\"normalTag scoreTag\" v-else-if=\"solution.score > 0\" >得分：{{solution.score}}分</el-tag>\r\n                                            <!-- 0分项目 -->\r\n                                            <el-tag type=\"danger\"  class=\"normalTag scoreTag\" v-else >得分：{{solution.score}}分</el-tag>\r\n                                        </span>\r\n                                        <span v-else >\r\n                                            <el-tag type=\"info\"  class=\"normalTag scoreTag\" >待评分</el-tag>\r\n                                        </span>\r\n                                    </div>\r\n                                </el-col>\r\n                            </el-row>\r\n                        </template>\r\n                        <!-- 展示答题数据和标准答案 -->\r\n                        <div class=\"stdDiv\" style=\"font-size:16px;width: 90%;position: relative;left: 2em\">\r\n                            <!-- 选择题 -->\r\n                            <div v-if=\"solution.subjectType == 1\">\r\n                                <!-- 用户答案 -->\r\n                                <div class=\"stdDiv\">\r\n                                    <el-tag type=\"success\">用户答案</el-tag>\r\n                                    <!-- 多选题 -->\r\n                                    <span v-if=\"solution.answerNum > 1\">\r\n                                        <span v-for=\"(answers,an) in solution.answerOptions\" :key=\"'an'+an\">\r\n                                            <span style=\"margin: 0 0.4em\" v-if=\"answers.answerBool\">选项{{an+1}}</span>\r\n                                        </span>\r\n                                    </span>\r\n                                    <!-- 单选题 -->\r\n                                    <span v-else>\r\n                                        <span v-for=\"(options1,op1) in subjects[i].choiceOptions\" :key=\"'op1'+op1\">\r\n                                            <span style=\"margin: 0 0.4em\" v-if=\"options1.num == solution.answer\">选项{{op1+1}}</span>\r\n                                        </span>\r\n                                    </span>\r\n                                </div>\r\n                                <!-- 标准答案 -->\r\n                                <div class=\"stdDiv\">\r\n                                    <el-tag>标准答案</el-tag>\r\n                                    <span v-for=\"(options,op) in subjects[i].choiceOptions\" :key=\"'op'+op\">\r\n                                        <span style=\"margin: 0 0.4em\" v-if=\"options.isAnswerBool\">选项{{op+1}}</span>\r\n                                    </span>\r\n                                </div>\r\n                            </div>\r\n                            <!-- 填空题 -->\r\n                            <div v-else-if=\"solution.subjectType == 2\">\r\n                                <!-- 用户答案 -->\r\n                                <div class=\"stdDiv\">\r\n                                    <el-tag type=\"success\">用户答案</el-tag>\r\n                                    <span class=\"lrDiv\" v-for=\"(aBlank,num1) in solution.answerOptions\" :key=\"'u'+num1\">{{num1+1}}.{{aBlank.answer}}</span>\r\n                                </div>\r\n                                <!-- 标准答案 -->\r\n                                <div class=\"stdDiv\">\r\n                                    <el-tag>标准答案</el-tag>\r\n                                    <span class=\"lrDiv\" v-for=\"(stdBlank,num2) in subjects[i].fillingBlanks\" :key=\"'a'+num2\">{{num2+1}}.{{stdBlank.content}}</span>\r\n                                </div>\r\n                            </div>\r\n                            <!-- 判断题 -->\r\n                            <div v-else-if=\"solution.subjectType == 3\">\r\n                                <!-- 用户答案 -->\r\n                                <div class=\"stdDiv\">\r\n                                    <el-tag type=\"success\">用户答案</el-tag>\r\n                                    <span class=\"lrDiv\">{{solution.answerStr}}</span>\r\n                                </div>\r\n                                <!-- 标准答案 -->\r\n                                <div class=\"stdDiv\">\r\n                                    <el-tag>标准答案</el-tag>\r\n                                    <span class=\"lrDiv\">{{subjects[i].trueFalse.answerStr}}</span>\r\n                                </div>\r\n                            </div>\r\n                            <!-- 简答题 -->\r\n                            <div v-else-if=\"solution.subjectType == 4\">\r\n                                <!-- 用户答案 -->\r\n                                <div class=\"stdDiv\">\r\n                                    <el-tag type=\"success\">用户答案</el-tag>\r\n                                    <div v-html=\"solution.answer\">{{solution.answer}}</div>\r\n                                </div>\r\n                                <!-- 标准答案 -->\r\n                                <div class=\"stdDiv\">\r\n                                    <el-tag>标准答案</el-tag>\r\n                                    <span v-html=\"subjects[i].questionAnswer.answer\">{{subjects[i].questionAnswer.answer}}</span>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </el-collapse-item>\r\n                </el-collapse>\r\n            </div>\r\n            <!-- 用户未提交 -->\r\n            <div v-else style=\"text-align: center;color:#797979\">暂无数据</div>\r\n        </el-card>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import UserAvatar from \"@/components/UserAvatar\";\r\n    export default {\r\n        name: \"StuExamScore\",\r\n        components:{\r\n            UserAvatar,\r\n        },\r\n        data(){\r\n            return{\r\n                exam:{},            // 考试信息\r\n                activeNames:[],     // 试题激活项\r\n                studentExam:{},     // 考试数据\r\n                subjects:[],        // 试题集合\r\n            }\r\n        },\r\n        created() {\r\n            this.getExam();\r\n        },\r\n        methods:{\r\n            // 查询考试数据\r\n            getExam(){\r\n                let exam = {examId:this.$route.params.examId};\r\n                this.$axios.post(\"/Exam/getExamById\", exam).then((res)=>{\r\n                    if(res.data.flag){\r\n                        /* 保存公告数据 */\r\n                        this.exam = res.data.data;\r\n                        this.getSubject();      // 获取标准答案\r\n                        this.getStudentExam();  // 获取考试信息\r\n                    }else{\r\n                        // 服务故障\r\n                        this.$message.error(\"信息获取失败！\");\r\n                    }\r\n                });\r\n            },\r\n            // 查询试题数据\r\n            getSubject(){\r\n                this.$axios.post(\"/Paper/getPaperByExamId\", this.exam).then((res)=>{\r\n                    if(res.data.flag){\r\n                        /* 保存公告数据 */\r\n                        this.subjects = res.data.data;\r\n                    }else{\r\n                        // 服务故障\r\n                        this.$message.error(\"信息获取失败！\");\r\n                    }\r\n                });\r\n            },\r\n            // 获取本人的考试信息\r\n            getStudentExam(){\r\n                this.$axios.post(\"/Answer/getOneUserAnswer\",this.exam).then((res)=>{\r\n                    if(res.data.flag){\r\n                        this.studentExam = res.data.data;\r\n                        console.log(this.studentExam);\r\n                    }else{\r\n                        // 服务故障\r\n                        this.$message.error(\"信息获取失败！\");\r\n                    }\r\n                });\r\n            },\r\n            // 全部折叠\r\n            allHidden(){\r\n                this.activeNames = [];\r\n            },\r\n            // 全部展开\r\n            allShow(){\r\n                this.allHidden();\r\n                /* 激活全部题组 */\r\n                for(let i = 0;i<this.studentExam.solutions.length;i++) this.$set(this.activeNames,i,i);\r\n            },\r\n        },\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    /* 信息卡片 */\r\n    #examCards{\r\n        width: 90%;\r\n        min-height: 10em;\r\n        margin: auto;\r\n    }\r\n    /* 考试标题 */\r\n    #examTitle{\r\n        margin-bottom: 1.2em;\r\n        font-size: 28px;\r\n        font-weight: 600;\r\n        font-family: \"微软雅黑\";\r\n    }\r\n    /* 发表时间 */\r\n    #examDate{\r\n        color: #8a8a8a;\r\n        margin-left: 1.2em;\r\n    }\r\n    /* 详情 */\r\n    #examDetails{\r\n        margin-top: 20px;\r\n        margin-bottom: 20px;\r\n    }\r\n    /* 分割线 */\r\n    ::v-deep#myDivider{\r\n        margin: 2em 0;\r\n    }\r\n    /**\r\n     * 功能栏\r\n     */\r\n    /* 题目卡片区 */\r\n    #subjectCard{\r\n        padding: 0;\r\n        position: relative;\r\n    }\r\n    /* 功能栏 */\r\n    #functionCard{\r\n        margin-bottom: 2em;\r\n    }\r\n    /* 展开折叠按钮 */\r\n    .conSubjectButton{\r\n        left: 95em;\r\n        top: 0.5em;\r\n        position: relative;\r\n    }\r\n    /**\r\n     * 标题栏\r\n     */\r\n    /* 标签整体 */\r\n    .tagBox{\r\n        left: 2.5em;\r\n        width: 90em;\r\n        position: absolute;\r\n    }\r\n    /* 用户头像显示 */\r\n    .userAvatar{\r\n        top: 0.3em;\r\n        position: relative;\r\n    }\r\n    /* 用户名显示 */\r\n    .username{\r\n        left: 2.4em;\r\n        margin: 0 1em;\r\n        bottom: 1em;\r\n        position: absolute;\r\n    }\r\n    /*　题目标签　*/\r\n    .subjectTag{\r\n        margin: 0 0.4em;\r\n        left: 5.5em;\r\n        bottom: 0.7em;\r\n        position: relative;\r\n    }\r\n    /**\r\n     * 内容区\r\n     */\r\n    .subjectContent{\r\n        width: 93%;\r\n        left: 3em;\r\n        position: relative;\r\n    }\r\n    /* 答案区tag */\r\n    .normalTag{\r\n        margin: 0 0.4em;\r\n    }\r\n    /* 题型tag */\r\n    .subjectTypeTag{\r\n        min-width: 85%;\r\n    }\r\n    /* 得分tag */\r\n    .scoreTag{\r\n        min-width: 75%;\r\n    }\r\n    /* div 标准 */\r\n    .stdDiv{\r\n        margin: 0.3em 0;\r\n    }\r\n    /* 左右空隙div */\r\n    .lrDiv{\r\n        margin: 0 0.3em;\r\n    }\r\n</style>"]},"metadata":{},"sourceType":"module"}