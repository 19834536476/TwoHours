{"ast":null,"code":"import _typeof from \"F:/Desktop/two_hours_front/node_modules/@babel/runtime/helpers/esm/typeof.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.match.js\";\nimport \"core-js/modules/es.array.join.js\";\nimport \"core-js/modules/es.string.replace.js\";\n\n// @ts-nocheck\n// ========================================================================  \n//  XML.ObjTree -- XML source code from/to JavaScript object like E4X  \n// ========================================================================  \nvar XML = function XML() {}; //  constructor  \n\n\nXML.ObjTree = function () {\n  return this;\n}; //  class variables  \n\n\nXML.ObjTree.VERSION = \"0.23\"; //  object prototype  \n\nXML.ObjTree.prototype.xmlDecl = '<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\\n';\nXML.ObjTree.prototype.attr_prefix = '-'; //  method: parseXML( xmlsource )  \n\nXML.ObjTree.prototype.parseXML = function (xml) {\n  var root;\n\n  if (window.DOMParser) {\n    var xmldom = new DOMParser(); //      xmldom.async = false;           // DOMParser is always sync-mode  \n\n    var dom = xmldom.parseFromString(xml, \"application/xml\");\n    if (!dom) return;\n    root = dom.documentElement;\n  } else if (window.ActiveXObject) {\n    xmldom = new ActiveXObject('Microsoft.XMLDOM');\n    xmldom.async = false;\n    xmldom.loadXML(xml);\n    root = xmldom.documentElement;\n  }\n\n  if (!root) return;\n  return this.parseDOM(root);\n}; //  method: parseHTTP( url, options, callback )  \n\n\nXML.ObjTree.prototype.parseHTTP = function (url, options, callback) {\n  var myopt = {};\n\n  for (var key in options) {\n    myopt[key] = options[key]; // copy object  \n  }\n\n  if (!myopt.method) {\n    if (typeof myopt.postBody == \"undefined\" && typeof myopt.postbody == \"undefined\" && typeof myopt.parameters == \"undefined\") {\n      myopt.method = \"get\";\n    } else {\n      myopt.method = \"post\";\n    }\n  }\n\n  if (callback) {\n    myopt.asynchronous = true; // async-mode  \n\n    var __this = this;\n\n    var __func = callback;\n    var __save = myopt.onComplete;\n\n    myopt.onComplete = function (trans) {\n      var tree;\n\n      if (trans && trans.responseXML && trans.responseXML.documentElement) {\n        tree = __this.parseDOM(trans.responseXML.documentElement);\n      }\n\n      __func(tree, trans);\n\n      if (__save) __save(trans);\n    };\n  } else {\n    myopt.asynchronous = false; // sync-mode  \n  }\n\n  var trans;\n\n  if (typeof HTTP != \"undefined\" && HTTP.Request) {\n    myopt.uri = url;\n    var req = new HTTP.Request(myopt); // JSAN  \n\n    if (req) trans = req.transport;\n  } else if (typeof Ajax != \"undefined\" && Ajax.Request) {\n    var req = new Ajax.Request(url, myopt); // ptorotype.js  \n\n    if (req) trans = req.transport;\n  }\n\n  if (callback) return trans;\n\n  if (trans && trans.responseXML && trans.responseXML.documentElement) {\n    return this.parseDOM(trans.responseXML.documentElement);\n  }\n}; //  method: parseDOM( documentroot )  \n\n\nXML.ObjTree.prototype.parseDOM = function (root) {\n  if (!root) return;\n  this.__force_array = {};\n\n  if (this.force_array) {\n    for (var i = 0; i < this.force_array.length; i++) {\n      this.__force_array[this.force_array[i]] = 1;\n    }\n  }\n\n  var json = this.parseElement(root); // parse root node  \n\n  if (this.__force_array[root.nodeName]) {\n    json = [json];\n  }\n\n  if (root.nodeType != 11) {\n    // DOCUMENT_FRAGMENT_NODE  \n    var tmp = {};\n    tmp[root.nodeName] = json; // root nodeName  \n\n    json = tmp;\n  }\n\n  return json;\n}; //  method: parseElement( element )  \n\n\nXML.ObjTree.prototype.parseElement = function (elem) {\n  //  COMMENT_NODE  \n  if (elem.nodeType == 7) {\n    return;\n  } //  TEXT_NODE CDATA_SECTION_NODE  \n\n\n  if (elem.nodeType == 3 || elem.nodeType == 4) {\n    var bool = elem.nodeValue.match(/[^\\x00-\\x20]/);\n    if (bool == null) return; // ignore white spaces  \n\n    return elem.nodeValue;\n  }\n\n  var retval;\n  var cnt = {}; //  parse attributes  \n\n  if (elem.attributes && elem.attributes.length) {\n    retval = {};\n\n    for (var i = 0; i < elem.attributes.length; i++) {\n      var key = elem.attributes[i].nodeName;\n      if (typeof key != \"string\") continue;\n      var val = elem.attributes[i].nodeValue;\n      if (!val) continue;\n      key = this.attr_prefix + key;\n      if (typeof cnt[key] == \"undefined\") cnt[key] = 0;\n      cnt[key]++;\n      this.addNode(retval, key, cnt[key], val);\n    }\n  } //  parse child nodes (recursive)  \n\n\n  if (elem.childNodes && elem.childNodes.length) {\n    var textonly = true;\n    if (retval) textonly = false; // some attributes exists  \n\n    for (var i = 0; i < elem.childNodes.length && textonly; i++) {\n      var ntype = elem.childNodes[i].nodeType;\n      if (ntype == 3 || ntype == 4) continue;\n      textonly = false;\n    }\n\n    if (textonly) {\n      if (!retval) retval = \"\";\n\n      for (var i = 0; i < elem.childNodes.length; i++) {\n        retval += elem.childNodes[i].nodeValue;\n      }\n    } else {\n      if (!retval) retval = {};\n\n      for (var i = 0; i < elem.childNodes.length; i++) {\n        var key = elem.childNodes[i].nodeName;\n        if (typeof key != \"string\") continue;\n        var val = this.parseElement(elem.childNodes[i]);\n        if (!val) continue;\n        if (typeof cnt[key] == \"undefined\") cnt[key] = 0;\n        cnt[key]++;\n        this.addNode(retval, key, cnt[key], val);\n      }\n    }\n  }\n\n  return retval;\n}; //  method: addNode( hash, key, count, value )  \n\n\nXML.ObjTree.prototype.addNode = function (hash, key, cnts, val) {\n  if (this.__force_array[key]) {\n    if (cnts == 1) hash[key] = [];\n    hash[key][hash[key].length] = val; // push  \n  } else if (cnts == 1) {\n    // 1st sibling  \n    hash[key] = val;\n  } else if (cnts == 2) {\n    // 2nd sibling  \n    hash[key] = [hash[key], val];\n  } else {\n    // 3rd sibling and more  \n    hash[key][hash[key].length] = val;\n  }\n}; //  method: writeXML( tree )  \n\n\nXML.ObjTree.prototype.writeXML = function (tree) {\n  var xml = this.hash_to_xml(null, tree);\n  return this.xmlDecl + xml;\n}; //  method: hash_to_xml( tagName, tree )  \n\n\nXML.ObjTree.prototype.hash_to_xml = function (name, tree) {\n  var elem = [];\n  var attr = [];\n\n  for (var key in tree) {\n    if (!tree.hasOwnProperty(key)) continue;\n    var val = tree[key];\n\n    if (key.charAt(0) != this.attr_prefix) {\n      if (typeof val == \"undefined\" || val == null) {\n        elem[elem.length] = \"<\" + key + \" />\";\n      } else if (_typeof(val) == \"object\" && val.constructor == Array) {\n        elem[elem.length] = this.array_to_xml(key, val);\n      } else if (_typeof(val) == \"object\") {\n        elem[elem.length] = this.hash_to_xml(key, val);\n      } else {\n        elem[elem.length] = this.scalar_to_xml(key, val);\n      }\n    } else {\n      attr[attr.length] = \" \" + key.substring(1) + '=\"' + this.xml_escape(val) + '\"';\n    }\n  }\n\n  var jattr = attr.join(\"\");\n  var jelem = elem.join(\"\");\n\n  if (typeof name == \"undefined\" || name == null) {// no tag  \n  } else if (elem.length > 0) {\n    if (jelem.match(/\\n/)) {\n      jelem = \"<\" + name + jattr + \">\\n\" + jelem + \"</\" + name + \">\\n\";\n    } else {\n      jelem = \"<\" + name + jattr + \">\" + jelem + \"</\" + name + \">\\n\";\n    }\n  } else {\n    jelem = \"<\" + name + jattr + \" />\\n\";\n  }\n\n  return jelem;\n}; //  method: array_to_xml( tagName, array )  \n\n\nXML.ObjTree.prototype.array_to_xml = function (name, array) {\n  var out = [];\n\n  for (var i = 0; i < array.length; i++) {\n    var val = array[i];\n\n    if (typeof val == \"undefined\" || val == null) {\n      out[out.length] = \"<\" + name + \" />\";\n    } else if (_typeof(val) == \"object\" && val.constructor == Array) {\n      out[out.length] = this.array_to_xml(name, val);\n    } else if (_typeof(val) == \"object\") {\n      out[out.length] = this.hash_to_xml(name, val);\n    } else {\n      out[out.length] = this.scalar_to_xml(name, val);\n    }\n  }\n\n  return out.join(\"\");\n}; //  method: scalar_to_xml( tagName, text )  \n\n\nXML.ObjTree.prototype.scalar_to_xml = function (name, text) {\n  if (name == \"#text\") {\n    return this.xml_escape(text);\n  } else {\n    return \"<\" + name + \">\" + this.xml_escape(text) + \"</\" + name + \">\\n\";\n  }\n}; //  method: xml_escape( text )  \n\n\nXML.ObjTree.prototype.xml_escape = function (text) {\n  return text.replace(/&/g, '&').replace(/</g, '<').replace(/>/g, '>').replace(/\"/g, '\"');\n};\n/*\n// ========================================================================\n\n=head1 NAME\n\nXML.ObjTree -- XML source code from/to JavaScript object like E4X\n\n=head1 SYNOPSIS\n\nvar xotree = new XML.ObjTree();\nvar tree1 = {\nroot: {\nnode: \"Hello, World!\"\n}\n};\nvar xml1 = xotree.writeXML( tree1 );        // object tree to XML source\nalert( \"xml1: \"+xml1 );\n\nvar xml2 = '<?xml version=\"1.0\"?><response><error>0</error></response>';\nvar tree2 = xotree.parseXML( xml2 );        // XML source to object tree\nalert( \"error: \"+tree2.response.error );\n\n=head1 DESCRIPTION\n\nXML.ObjTree class is a parser/generater between XML source code\nand JavaScript object like E4X, ECMAScript for XML.\nThis is a JavaScript version of the XML::TreePP module for Perl.\nThis also works as a wrapper for XMLHTTPRequest and successor to JKL.ParseXML class\nwhen this is used with prototype.js or JSAN's HTTP.Request class.\n\n=head2 JavaScript object tree format\n\nA sample XML source:\n\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<family name=\"Kawasaki\">\n<father>Yasuhisa</father>\n<mother>Chizuko</mother>\n<children>\n<girl>Shiori</girl>\n<boy>Yusuke</boy>\n<boy>Kairi</boy>\n</children>\n</family>\n\nIts JavaScript object tree like JSON/E4X:\n\n{\n'family': {\n'-name':    'Kawasaki',\n'father':   'Yasuhisa',\n'mother':   'Chizuko',\n'children': {\n'girl': 'Shiori'\n'boy': [\n'Yusuke',\n'Kairi'\n]\n}\n}\n};\n\nEach elements are parsed into objects:\n\ntree.family.father;             # the father's given name.\n\nPrefix '-' is inserted before every attributes' name.\n\ntree.family[\"-name\"];           # this family's family name\n\nA array is used because this family has two boys.\n\ntree.family.children.boy[0];    # first boy's name\ntree.family.children.boy[1];    # second boy's name\ntree.family.children.girl;      # (girl has no other sisiters)\n\n=head1 METHODS\n\n=head2 xotree = new XML.ObjTree()\n\nThis constructor method returns a new XML.ObjTree object.\n\n=head2 xotree.force_array = [ \"rdf:li\", \"item\", \"-xmlns\" ];\n\nThis property allows you to specify a list of element names\nwhich should always be forced into an array representation.\nThe default value is null, it means that context of the elements\nwill determine to make array or to keep it scalar.\n\n=head2 xotree.attr_prefix = '@';\n\nThis property allows you to specify a prefix character which is\ninserted before each attribute names.\nInstead of default prefix '-', E4X-style prefix '@' is also available.\nThe default character is '-'.\nOr set '@' to access attribute values like E4X, ECMAScript for XML.\nThe length of attr_prefix must be just one character and not be empty.\n\n=head2 tree = xotree.parseXML( xmlsrc );\n\nThis method loads an XML document using the supplied string\nand returns its JavaScript object converted.\n\n=head2 tree = xotree.parseDOM( domnode );\n\nThis method parses a DOM tree (ex. responseXML.documentElement)\nand returns its JavaScript object converted.\n\n=head2 tree = xotree.parseHTTP( url, options );\n\nThis method loads a XML file from remote web server\nand returns its JavaScript object converted.\nXMLHTTPRequest's synchronous mode is always used.\nThis mode blocks the process until the response is completed.\n\nFirst argument is a XML file's URL\nwhich must exist in the same domain as parent HTML file's.\nCross-domain loading is not available for security reasons.\n\nSecond argument is options' object which can contains some parameters:\nmethod, postBody, parameters, onLoading, etc.\n\nThis method requires JSAN's L<HTTP.Request> class or prototype.js's Ajax.Request class.\n\n=head2 xotree.parseHTTP( url, options, callback );\n\nIf a callback function is set as third argument,\nXMLHTTPRequest's asynchronous mode is used.\n\nThis mode calls a callback function with XML file's JavaScript object converted\nafter the response is completed.\n\n=head2 xmlsrc = xotree.writeXML( tree );\n\nThis method parses a JavaScript object tree\nand returns its XML source generated.\n\n=head1 EXAMPLES\n\n=head2 Text node and attributes\n\nIf a element has both of a text node and attributes\nor both of a text node and other child nodes,\ntext node's value is moved to a special node named \"#text\".\n\nvar xotree = new XML.ObjTree();\nvar xmlsrc = '<span class=\"author\">Kawasaki Yusuke</span>';\nvar tree = xotree.parseXML( xmlsrc );\nvar class = tree.span[\"-class\"];        # attribute\nvar name  = tree.span[\"#text\"];         # text node\n\n=head2 parseHTTP() method with HTTP-GET and sync-mode\n\nHTTP/Request.js or prototype.js must be loaded before calling this method.\n\nvar xotree = new XML.ObjTree();\nvar url = \"http://example.com/index.html\";\nvar tree = xotree.parseHTTP( url );\nxotree.attr_prefix = '@';                   // E4X-style\nalert( tree.html[\"@lang\"] );\n\nThis code shows C<lang=\"\"> attribute from a X-HTML source code.\n\n=head2 parseHTTP() method with HTTP-POST and async-mode\n\nThird argument is a callback function which is called on onComplete.\n\nvar xotree = new XML.ObjTree();\nvar url = \"http://example.com/mt-tb.cgi\";\nvar opts = {\npostBody:   \"title=...&excerpt=...&url=...&blog_name=...\"\n};\nvar func = function ( tree ) {\nalert( tree.response.error );\n};\nxotree.parseHTTP( url, opts, func );\n\nThis code send a trackback ping and shows its response code.\n\n=head2 Simple RSS reader\n\nThis is a RSS reader which loads RDF file and displays all items.\n\nvar xotree = new XML.ObjTree();\nxotree.force_array = [ \"rdf:li\", \"item\" ];\nvar url = \"http://example.com/news-rdf.xml\";\nvar func = function( tree ) {\nvar elem = document.getElementById(\"rss_here\");\nfor( var i=0; i<tree[\"rdf:RDF\"].item.length; i++ ) {\nvar divtag = document.createElement( \"div\" );\nvar atag = document.createElement( \"a\" );\natag.href = tree[\"rdf:RDF\"].item[i].link;\nvar title = tree[\"rdf:RDF\"].item[i].title;\nvar tnode = document.createTextNode( title );\natag.appendChild( tnode );\ndivtag.appendChild( atag );\nelem.appendChild( divtag );\n}\n};\nxotree.parseHTTP( url, {}, func );\n\n=head2  XML-RPC using writeXML, prototype.js and parseDOM\n\nIf you wish to use prototype.js's Ajax.Request class by yourself:\n\nvar xotree = new XML.ObjTree();\nvar reqtree = {\nmethodCall: {\nmethodName: \"weblogUpdates.ping\",\nparams: {\nparam: [\n{ value: \"Kawa.net xp top page\" },  // 1st param\n{ value: \"http://www.kawa.net/\" }   // 2nd param\n]\n}\n}\n};\nvar reqxml = xotree.writeXML( reqtree );       // JS-Object to XML code\nvar url = \"http://example.com/xmlrpc\";\nvar func = function( req ) {\nvar resdom = req.responseXML.documentElement;\nxotree.force_array = [ \"member\" ];\nvar restree = xotree.parseDOM( resdom );   // XML-DOM to JS-Object\nalert( restree.methodResponse.params.param.value.struct.member[0].value.string );\n};\nvar opt = {\nmethod:         \"post\",\npostBody:       reqxml,\nasynchronous:   true,\nonComplete:     func\n};\nnew Ajax.Request( url, opt );\n\n=head1 AUTHOR\n\nYusuke Kawasaki http://www.kawa.net/\n=head1 COPYRIGHT AND LICENSE\n\nCopyright (c) 2005-2006 Yusuke Kawasaki. All rights reserved.\nThis program is free software; you can redistribute it and/or\nmodify it under the Artistic license. Or whatever license I choose,\nwhich I will do instead of keeping this documentation like it is.\n\n=cut\n// ========================================================================\n*/\n\n\nvar lfXml2Json = function lfXml2Json(xmlData) {\n  return new XML.ObjTree().parseXML(xmlData);\n};\n\nexport { lfXml2Json };","map":{"version":3,"sources":["F:/Desktop/two_hours_front/node_modules/@logicflow/extension/es/bpmn-adapter/xml2json.js"],"names":["XML","ObjTree","VERSION","prototype","xmlDecl","attr_prefix","parseXML","xml","root","window","DOMParser","xmldom","dom","parseFromString","documentElement","ActiveXObject","async","loadXML","parseDOM","parseHTTP","url","options","callback","myopt","key","method","postBody","postbody","parameters","asynchronous","__this","__func","__save","onComplete","trans","tree","responseXML","HTTP","Request","uri","req","transport","Ajax","__force_array","force_array","i","length","json","parseElement","nodeName","nodeType","tmp","elem","bool","nodeValue","match","retval","cnt","attributes","val","addNode","childNodes","textonly","ntype","hash","cnts","writeXML","hash_to_xml","name","attr","hasOwnProperty","charAt","constructor","Array","array_to_xml","scalar_to_xml","substring","xml_escape","jattr","join","jelem","array","out","text","replace","lfXml2Json","xmlData"],"mappings":"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,GAAyD,KAAhE;AACH;AACJ,CAPD,C,CAQA;;;AACApE,GAAG,CAACC,OAAJ,CAAYE,SAAZ,CAAsB0E,UAAtB,GAAmC,UAAUM,IAAV,EAAgB;AAC/C,SAAOA,IAAI,CAACC,OAAL,CAAa,IAAb,EAAmB,GAAnB,EAAwBA,OAAxB,CAAgC,IAAhC,EAAsC,GAAtC,EAA2CA,OAA3C,CAAmD,IAAnD,EAAyD,GAAzD,EAA8DA,OAA9D,CAAsE,IAAtE,EAA4E,GAA5E,CAAP;AACH,CAFD;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,IAAIC,UAAU,GAAG,SAAbA,UAAa,CAAUC,OAAV,EAAmB;AAChC,SAAO,IAAItF,GAAG,CAACC,OAAR,GAAkBK,QAAlB,CAA2BgF,OAA3B,CAAP;AACH,CAFD;;AAGA,SAASD,UAAT","sourcesContent":["// @ts-nocheck\n// ========================================================================  \n//  XML.ObjTree -- XML source code from/to JavaScript object like E4X  \n// ========================================================================  \nvar XML = function () { };\n//  constructor  \nXML.ObjTree = function () {\n    return this;\n};\n//  class variables  \nXML.ObjTree.VERSION = \"0.23\";\n//  object prototype  \nXML.ObjTree.prototype.xmlDecl = '<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\\n';\nXML.ObjTree.prototype.attr_prefix = '-';\n//  method: parseXML( xmlsource )  \nXML.ObjTree.prototype.parseXML = function (xml) {\n    var root;\n    if (window.DOMParser) {\n        var xmldom = new DOMParser();\n        //      xmldom.async = false;           // DOMParser is always sync-mode  \n        var dom = xmldom.parseFromString(xml, \"application/xml\");\n        if (!dom)\n            return;\n        root = dom.documentElement;\n    }\n    else if (window.ActiveXObject) {\n        xmldom = new ActiveXObject('Microsoft.XMLDOM');\n        xmldom.async = false;\n        xmldom.loadXML(xml);\n        root = xmldom.documentElement;\n    }\n    if (!root)\n        return;\n    return this.parseDOM(root);\n};\n//  method: parseHTTP( url, options, callback )  \nXML.ObjTree.prototype.parseHTTP = function (url, options, callback) {\n    var myopt = {};\n    for (var key in options) {\n        myopt[key] = options[key]; // copy object  \n    }\n    if (!myopt.method) {\n        if (typeof (myopt.postBody) == \"undefined\" &&\n            typeof (myopt.postbody) == \"undefined\" &&\n            typeof (myopt.parameters) == \"undefined\") {\n            myopt.method = \"get\";\n        }\n        else {\n            myopt.method = \"post\";\n        }\n    }\n    if (callback) {\n        myopt.asynchronous = true; // async-mode  \n        var __this = this;\n        var __func = callback;\n        var __save = myopt.onComplete;\n        myopt.onComplete = function (trans) {\n            var tree;\n            if (trans && trans.responseXML && trans.responseXML.documentElement) {\n                tree = __this.parseDOM(trans.responseXML.documentElement);\n            }\n            __func(tree, trans);\n            if (__save)\n                __save(trans);\n        };\n    }\n    else {\n        myopt.asynchronous = false; // sync-mode  \n    }\n    var trans;\n    if (typeof (HTTP) != \"undefined\" && HTTP.Request) {\n        myopt.uri = url;\n        var req = new HTTP.Request(myopt); // JSAN  \n        if (req)\n            trans = req.transport;\n    }\n    else if (typeof (Ajax) != \"undefined\" && Ajax.Request) {\n        var req = new Ajax.Request(url, myopt); // ptorotype.js  \n        if (req)\n            trans = req.transport;\n    }\n    if (callback)\n        return trans;\n    if (trans && trans.responseXML && trans.responseXML.documentElement) {\n        return this.parseDOM(trans.responseXML.documentElement);\n    }\n};\n//  method: parseDOM( documentroot )  \nXML.ObjTree.prototype.parseDOM = function (root) {\n    if (!root)\n        return;\n    this.__force_array = {};\n    if (this.force_array) {\n        for (var i = 0; i < this.force_array.length; i++) {\n            this.__force_array[this.force_array[i]] = 1;\n        }\n    }\n    var json = this.parseElement(root); // parse root node  \n    if (this.__force_array[root.nodeName]) {\n        json = [json];\n    }\n    if (root.nodeType != 11) { // DOCUMENT_FRAGMENT_NODE  \n        var tmp = {};\n        tmp[root.nodeName] = json; // root nodeName  \n        json = tmp;\n    }\n    return json;\n};\n//  method: parseElement( element )  \nXML.ObjTree.prototype.parseElement = function (elem) {\n    //  COMMENT_NODE  \n    if (elem.nodeType == 7) {\n        return;\n    }\n    //  TEXT_NODE CDATA_SECTION_NODE  \n    if (elem.nodeType == 3 || elem.nodeType == 4) {\n        var bool = elem.nodeValue.match(/[^\\x00-\\x20]/);\n        if (bool == null)\n            return; // ignore white spaces  \n        return elem.nodeValue;\n    }\n    var retval;\n    var cnt = {};\n    //  parse attributes  \n    if (elem.attributes && elem.attributes.length) {\n        retval = {};\n        for (var i = 0; i < elem.attributes.length; i++) {\n            var key = elem.attributes[i].nodeName;\n            if (typeof (key) != \"string\")\n                continue;\n            var val = elem.attributes[i].nodeValue;\n            if (!val)\n                continue;\n            key = this.attr_prefix + key;\n            if (typeof (cnt[key]) == \"undefined\")\n                cnt[key] = 0;\n            cnt[key]++;\n            this.addNode(retval, key, cnt[key], val);\n        }\n    }\n    //  parse child nodes (recursive)  \n    if (elem.childNodes && elem.childNodes.length) {\n        var textonly = true;\n        if (retval)\n            textonly = false; // some attributes exists  \n        for (var i = 0; i < elem.childNodes.length && textonly; i++) {\n            var ntype = elem.childNodes[i].nodeType;\n            if (ntype == 3 || ntype == 4)\n                continue;\n            textonly = false;\n        }\n        if (textonly) {\n            if (!retval)\n                retval = \"\";\n            for (var i = 0; i < elem.childNodes.length; i++) {\n                retval += elem.childNodes[i].nodeValue;\n            }\n        }\n        else {\n            if (!retval)\n                retval = {};\n            for (var i = 0; i < elem.childNodes.length; i++) {\n                var key = elem.childNodes[i].nodeName;\n                if (typeof (key) != \"string\")\n                    continue;\n                var val = this.parseElement(elem.childNodes[i]);\n                if (!val)\n                    continue;\n                if (typeof (cnt[key]) == \"undefined\")\n                    cnt[key] = 0;\n                cnt[key]++;\n                this.addNode(retval, key, cnt[key], val);\n            }\n        }\n    }\n    return retval;\n};\n//  method: addNode( hash, key, count, value )  \nXML.ObjTree.prototype.addNode = function (hash, key, cnts, val) {\n    if (this.__force_array[key]) {\n        if (cnts == 1)\n            hash[key] = [];\n        hash[key][hash[key].length] = val; // push  \n    }\n    else if (cnts == 1) { // 1st sibling  \n        hash[key] = val;\n    }\n    else if (cnts == 2) { // 2nd sibling  \n        hash[key] = [hash[key], val];\n    }\n    else { // 3rd sibling and more  \n        hash[key][hash[key].length] = val;\n    }\n};\n//  method: writeXML( tree )  \nXML.ObjTree.prototype.writeXML = function (tree) {\n    var xml = this.hash_to_xml(null, tree);\n    return this.xmlDecl + xml;\n};\n//  method: hash_to_xml( tagName, tree )  \nXML.ObjTree.prototype.hash_to_xml = function (name, tree) {\n    var elem = [];\n    var attr = [];\n    for (var key in tree) {\n        if (!tree.hasOwnProperty(key))\n            continue;\n        var val = tree[key];\n        if (key.charAt(0) != this.attr_prefix) {\n            if (typeof (val) == \"undefined\" || val == null) {\n                elem[elem.length] = \"<\" + key + \" />\";\n            }\n            else if (typeof (val) == \"object\" && val.constructor == Array) {\n                elem[elem.length] = this.array_to_xml(key, val);\n            }\n            else if (typeof (val) == \"object\") {\n                elem[elem.length] = this.hash_to_xml(key, val);\n            }\n            else {\n                elem[elem.length] = this.scalar_to_xml(key, val);\n            }\n        }\n        else {\n            attr[attr.length] = \" \" + (key.substring(1)) + '=\"' + (this.xml_escape(val)) + '\"';\n        }\n    }\n    var jattr = attr.join(\"\");\n    var jelem = elem.join(\"\");\n    if (typeof (name) == \"undefined\" || name == null) {\n        // no tag  \n    }\n    else if (elem.length > 0) {\n        if (jelem.match(/\\n/)) {\n            jelem = \"<\" + name + jattr + \">\\n\" + jelem + \"</\" + name + \">\\n\";\n        }\n        else {\n            jelem = \"<\" + name + jattr + \">\" + jelem + \"</\" + name + \">\\n\";\n        }\n    }\n    else {\n        jelem = \"<\" + name + jattr + \" />\\n\";\n    }\n    return jelem;\n};\n//  method: array_to_xml( tagName, array )  \nXML.ObjTree.prototype.array_to_xml = function (name, array) {\n    var out = [];\n    for (var i = 0; i < array.length; i++) {\n        var val = array[i];\n        if (typeof (val) == \"undefined\" || val == null) {\n            out[out.length] = \"<\" + name + \" />\";\n        }\n        else if (typeof (val) == \"object\" && val.constructor == Array) {\n            out[out.length] = this.array_to_xml(name, val);\n        }\n        else if (typeof (val) == \"object\") {\n            out[out.length] = this.hash_to_xml(name, val);\n        }\n        else {\n            out[out.length] = this.scalar_to_xml(name, val);\n        }\n    }\n    return out.join(\"\");\n};\n//  method: scalar_to_xml( tagName, text )  \nXML.ObjTree.prototype.scalar_to_xml = function (name, text) {\n    if (name == \"#text\") {\n        return this.xml_escape(text);\n    }\n    else {\n        return \"<\" + name + \">\" + this.xml_escape(text) + \"</\" + name + \">\\n\";\n    }\n};\n//  method: xml_escape( text )  \nXML.ObjTree.prototype.xml_escape = function (text) {\n    return text.replace(/&/g, '&').replace(/</g, '<').replace(/>/g, '>').replace(/\"/g, '\"');\n};\n/*\n// ========================================================================\n\n=head1 NAME\n\nXML.ObjTree -- XML source code from/to JavaScript object like E4X\n\n=head1 SYNOPSIS\n\nvar xotree = new XML.ObjTree();\nvar tree1 = {\nroot: {\nnode: \"Hello, World!\"\n}\n};\nvar xml1 = xotree.writeXML( tree1 );        // object tree to XML source\nalert( \"xml1: \"+xml1 );\n\nvar xml2 = '<?xml version=\"1.0\"?><response><error>0</error></response>';\nvar tree2 = xotree.parseXML( xml2 );        // XML source to object tree\nalert( \"error: \"+tree2.response.error );\n\n=head1 DESCRIPTION\n\nXML.ObjTree class is a parser/generater between XML source code\nand JavaScript object like E4X, ECMAScript for XML.\nThis is a JavaScript version of the XML::TreePP module for Perl.\nThis also works as a wrapper for XMLHTTPRequest and successor to JKL.ParseXML class\nwhen this is used with prototype.js or JSAN's HTTP.Request class.\n\n=head2 JavaScript object tree format\n\nA sample XML source:\n\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<family name=\"Kawasaki\">\n<father>Yasuhisa</father>\n<mother>Chizuko</mother>\n<children>\n<girl>Shiori</girl>\n<boy>Yusuke</boy>\n<boy>Kairi</boy>\n</children>\n</family>\n\nIts JavaScript object tree like JSON/E4X:\n\n{\n'family': {\n'-name':    'Kawasaki',\n'father':   'Yasuhisa',\n'mother':   'Chizuko',\n'children': {\n'girl': 'Shiori'\n'boy': [\n'Yusuke',\n'Kairi'\n]\n}\n}\n};\n\nEach elements are parsed into objects:\n\ntree.family.father;             # the father's given name.\n\nPrefix '-' is inserted before every attributes' name.\n\ntree.family[\"-name\"];           # this family's family name\n\nA array is used because this family has two boys.\n\ntree.family.children.boy[0];    # first boy's name\ntree.family.children.boy[1];    # second boy's name\ntree.family.children.girl;      # (girl has no other sisiters)\n\n=head1 METHODS\n\n=head2 xotree = new XML.ObjTree()\n\nThis constructor method returns a new XML.ObjTree object.\n\n=head2 xotree.force_array = [ \"rdf:li\", \"item\", \"-xmlns\" ];\n\nThis property allows you to specify a list of element names\nwhich should always be forced into an array representation.\nThe default value is null, it means that context of the elements\nwill determine to make array or to keep it scalar.\n\n=head2 xotree.attr_prefix = '@';\n\nThis property allows you to specify a prefix character which is\ninserted before each attribute names.\nInstead of default prefix '-', E4X-style prefix '@' is also available.\nThe default character is '-'.\nOr set '@' to access attribute values like E4X, ECMAScript for XML.\nThe length of attr_prefix must be just one character and not be empty.\n\n=head2 tree = xotree.parseXML( xmlsrc );\n\nThis method loads an XML document using the supplied string\nand returns its JavaScript object converted.\n\n=head2 tree = xotree.parseDOM( domnode );\n\nThis method parses a DOM tree (ex. responseXML.documentElement)\nand returns its JavaScript object converted.\n\n=head2 tree = xotree.parseHTTP( url, options );\n\nThis method loads a XML file from remote web server\nand returns its JavaScript object converted.\nXMLHTTPRequest's synchronous mode is always used.\nThis mode blocks the process until the response is completed.\n\nFirst argument is a XML file's URL\nwhich must exist in the same domain as parent HTML file's.\nCross-domain loading is not available for security reasons.\n\nSecond argument is options' object which can contains some parameters:\nmethod, postBody, parameters, onLoading, etc.\n\nThis method requires JSAN's L<HTTP.Request> class or prototype.js's Ajax.Request class.\n\n=head2 xotree.parseHTTP( url, options, callback );\n\nIf a callback function is set as third argument,\nXMLHTTPRequest's asynchronous mode is used.\n\nThis mode calls a callback function with XML file's JavaScript object converted\nafter the response is completed.\n\n=head2 xmlsrc = xotree.writeXML( tree );\n\nThis method parses a JavaScript object tree\nand returns its XML source generated.\n\n=head1 EXAMPLES\n\n=head2 Text node and attributes\n\nIf a element has both of a text node and attributes\nor both of a text node and other child nodes,\ntext node's value is moved to a special node named \"#text\".\n\nvar xotree = new XML.ObjTree();\nvar xmlsrc = '<span class=\"author\">Kawasaki Yusuke</span>';\nvar tree = xotree.parseXML( xmlsrc );\nvar class = tree.span[\"-class\"];        # attribute\nvar name  = tree.span[\"#text\"];         # text node\n\n=head2 parseHTTP() method with HTTP-GET and sync-mode\n\nHTTP/Request.js or prototype.js must be loaded before calling this method.\n\nvar xotree = new XML.ObjTree();\nvar url = \"http://example.com/index.html\";\nvar tree = xotree.parseHTTP( url );\nxotree.attr_prefix = '@';                   // E4X-style\nalert( tree.html[\"@lang\"] );\n\nThis code shows C<lang=\"\"> attribute from a X-HTML source code.\n\n=head2 parseHTTP() method with HTTP-POST and async-mode\n\nThird argument is a callback function which is called on onComplete.\n\nvar xotree = new XML.ObjTree();\nvar url = \"http://example.com/mt-tb.cgi\";\nvar opts = {\npostBody:   \"title=...&excerpt=...&url=...&blog_name=...\"\n};\nvar func = function ( tree ) {\nalert( tree.response.error );\n};\nxotree.parseHTTP( url, opts, func );\n\nThis code send a trackback ping and shows its response code.\n\n=head2 Simple RSS reader\n\nThis is a RSS reader which loads RDF file and displays all items.\n\nvar xotree = new XML.ObjTree();\nxotree.force_array = [ \"rdf:li\", \"item\" ];\nvar url = \"http://example.com/news-rdf.xml\";\nvar func = function( tree ) {\nvar elem = document.getElementById(\"rss_here\");\nfor( var i=0; i<tree[\"rdf:RDF\"].item.length; i++ ) {\nvar divtag = document.createElement( \"div\" );\nvar atag = document.createElement( \"a\" );\natag.href = tree[\"rdf:RDF\"].item[i].link;\nvar title = tree[\"rdf:RDF\"].item[i].title;\nvar tnode = document.createTextNode( title );\natag.appendChild( tnode );\ndivtag.appendChild( atag );\nelem.appendChild( divtag );\n}\n};\nxotree.parseHTTP( url, {}, func );\n\n=head2  XML-RPC using writeXML, prototype.js and parseDOM\n\nIf you wish to use prototype.js's Ajax.Request class by yourself:\n\nvar xotree = new XML.ObjTree();\nvar reqtree = {\nmethodCall: {\nmethodName: \"weblogUpdates.ping\",\nparams: {\nparam: [\n{ value: \"Kawa.net xp top page\" },  // 1st param\n{ value: \"http://www.kawa.net/\" }   // 2nd param\n]\n}\n}\n};\nvar reqxml = xotree.writeXML( reqtree );       // JS-Object to XML code\nvar url = \"http://example.com/xmlrpc\";\nvar func = function( req ) {\nvar resdom = req.responseXML.documentElement;\nxotree.force_array = [ \"member\" ];\nvar restree = xotree.parseDOM( resdom );   // XML-DOM to JS-Object\nalert( restree.methodResponse.params.param.value.struct.member[0].value.string );\n};\nvar opt = {\nmethod:         \"post\",\npostBody:       reqxml,\nasynchronous:   true,\nonComplete:     func\n};\nnew Ajax.Request( url, opt );\n\n=head1 AUTHOR\n\nYusuke Kawasaki http://www.kawa.net/\n=head1 COPYRIGHT AND LICENSE\n\nCopyright (c) 2005-2006 Yusuke Kawasaki. All rights reserved.\nThis program is free software; you can redistribute it and/or\nmodify it under the Artistic license. Or whatever license I choose,\nwhich I will do instead of keeping this documentation like it is.\n\n=cut\n// ========================================================================\n*/\nvar lfXml2Json = function (xmlData) {\n    return new XML.ObjTree().parseXML(xmlData);\n};\nexport { lfXml2Json, };\n"]},"metadata":{},"sourceType":"module"}