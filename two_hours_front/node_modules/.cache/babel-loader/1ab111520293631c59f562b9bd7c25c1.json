{"ast":null,"code":"//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport SearchBox from \"@/components/SearchBox\";\nimport NoticeDrawer from \"@/components/NoticeDrawer\";\nimport Ckeditor4 from \"@/components/Ckeditor4\";\nexport default {\n  name: 'StuNoticeTab',\n  components: {\n    Ckeditor4: Ckeditor4,\n    SearchBox: SearchBox,\n    NoticeDrawer: NoticeDrawer\n  },\n  data: function data() {\n    return {\n      // 当前页码\n      noticeCurrentPage: 1,\n      // 分页大小\n      noticePageSize: 10,\n      // 总页码数\n      noticeTotalCount: 1,\n      // 搜索表单数据模型\n      searchTitle: {\n        title: ''\n      },\n      // 内置查询模型\n      searchNoticeByTitle: {\n        title: ''\n      },\n      // 通知数据列表\n      noticeTableData: [],\n      // 公告抽屉\n      noticeDrawer: false,\n      noticeDrawerContent: '' // 内容\n\n    };\n  },\n  created: function created() {\n    this.getNoticeByTitle();\n  },\n  methods: {\n    // 查找通知\n    // 系统内置一个title，默认为空，即全查询。每次条件查询都会把条件赋给该title。\n    // 因此这样点击分页栏时可以正常显示查询结果。\n    getNoticeByTitle: function getNoticeByTitle() {\n      var _this = this;\n\n      this.searchNoticeByTitle[\"pageSize\"] = this.noticePageSize;\n      this.searchNoticeByTitle[\"currentPage\"] = this.noticeCurrentPage;\n      this.$axios.post(\"/Notice/getNoticeByTitle\", this.searchNoticeByTitle).then(function (res) {\n        if (res.data.flag) {\n          /* 保存公告数据 */\n          _this.noticeTableData = res.data.data.records;\n          /* 保存分页数据 */\n\n          _this.noticeTotalCount = res.data.data.total;\n          _this.noticeCurrentPage = res.data.data.current;\n          _this.noticePageSize = res.data.data.size;\n        } else {\n          // 服务故障\n          _this.$message.error(\"信息获取失败！\");\n        }\n      });\n    },\n    // 表格颜色控制\n    tableRowClassName: function tableRowClassName(_ref) {\n      var row = _ref.row,\n          rowIndex = _ref.rowIndex;\n\n      if (rowIndex % 4 === 1) {\n        return 'warning-row';\n      } else if (rowIndex % 4 === 3) {\n        return 'success-row';\n      }\n\n      return '';\n    },\n    // 查询通知\n    searchNoticeOnSubmit: function searchNoticeOnSubmit(title) {\n      // 刷新查询条件\n      this.searchNoticeByTitle.title = title; // 执行查询\n\n      this.getNoticeByTitle();\n      /* 清空查询条件 */\n\n      this.searchTitle.title = '';\n    },\n    // 当某行数据被点击\n    noticeRowClick: function noticeRowClick(row, column) {\n      var _this2 = this;\n\n      // 排除操作列\n      if (column.label === '操作') return;\n      this.noticeDrawer = true;\n      this.noticeDrawerContent = row; // 发送一次请求\n\n      setTimeout(function () {\n        _this2.noticeDrawer = false;\n      }, 500);\n    },\n    // 分页大小变化\n    noticeHandleSizeChange: function noticeHandleSizeChange(val) {\n      this.noticePageSize = val; // 查询所有通知\n\n      this.getNoticeByTitle();\n    },\n    // 当前页变化\n    noticeHandleCurrentChange: function noticeHandleCurrentChange(val) {\n      this.noticeCurrentPage = val; // 查询所有通知\n\n      this.getNoticeByTitle();\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoEA;AACA;AACA;AACA;AACAA,sBADA;AAEAC;AACAC,wBADA;AAEAC,wBAFA;AAGAC;AAHA,GAFA;AAOAC,MAPA,kBAOA;AACA;AACA;AACAC,0BAFA;AAGA;AACAC,wBAJA;AAKA;AACAC,yBANA;AAOA;AACAC;AACAC;AADA,OARA;AAWA;AACAC;AACAD;AADA,OAZA;AAeA;AACAE,yBAhBA;AAiBA;AACAC,yBAlBA;AAmBAC,6BAnBA,CAmBA;;AAnBA;AAqBA,GA7BA;AA8BAC,SA9BA,qBA8BA;AACA;AACA,GAhCA;AAiCAC;AACA;AACA;AACA;AACAC,oBAJA,8BAIA;AAAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA,SAPA,MAOA;AACA;AACA;AACA;AACA,OAZA;AAaA,KApBA;AAqBA;AACAC,qBAtBA,mCAsBA;AAAA;AAAA;;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;;AACA;AACA,KA7BA;AA8BA;AACAC,wBA/BA,gCA+BAT,KA/BA,EA+BA;AACA;AACA,6CAFA,CAGA;;AACA;AACA;;AACA;AACA,KAtCA;AAuCA;AACAU,kBAxCA,0BAwCAC,GAxCA,EAwCAC,MAxCA,EAwCA;AAAA;;AACA;AACA;AACA;AACA,qCAJA,CAKA;;AACAC;AAAA;AAAA;AACA,KA/CA;AAgDA;AACAC,0BAjDA,kCAiDAC,GAjDA,EAiDA;AACA,gCADA,CAEA;;AACA;AACA,KArDA;AAsDA;AACAC,6BAvDA,qCAuDAD,GAvDA,EAuDA;AACA,mCADA,CAEA;;AACA;AACA;AA3DA;AAjCA","names":["name","components","Ckeditor4","SearchBox","NoticeDrawer","data","noticeCurrentPage","noticePageSize","noticeTotalCount","searchTitle","title","searchNoticeByTitle","noticeTableData","noticeDrawer","noticeDrawerContent","created","methods","getNoticeByTitle","tableRowClassName","searchNoticeOnSubmit","noticeRowClick","row","column","setTimeout","noticeHandleSizeChange","val","noticeHandleCurrentChange"],"sourceRoot":"src/pages/user/studentComponents","sources":["StuNoticeTab.vue"],"sourcesContent":["<template>\r\n    <div>\r\n        <!-- 功能菜单 -->\r\n        <el-row style=\"margin-top: 20px\">\r\n            <!--搜索表单-->\r\n            <el-col :span=\"7\" :offset=\"9\">\r\n                <search-box @onSubmit=\"searchNoticeOnSubmit\"></search-box>\r\n            </el-col>\r\n        </el-row>\r\n\r\n        <!-- 公告详情-抽屉1 -->\r\n        <notice-drawer v-model=\"noticeDrawer\" :notice=\"noticeDrawerContent\"></notice-drawer>\r\n\r\n        <!--表格-->\r\n        <template>\r\n            <el-table\r\n                    ref=\"noticeMultipleTable\"\r\n                    :data=\"noticeTableData\"\r\n                    style=\"width: 100%\"\r\n                    :row-class-name=\"tableRowClassName\"\r\n                    @row-click=\"noticeRowClick\">\r\n                <el-table-column\r\n                        label=\"序号\"\r\n                        type=\"index\"\r\n                        align=\"center\"\r\n                        width=\"100\">\r\n                </el-table-column>\r\n\r\n                <el-table-column\r\n                        prop=\"title\"\r\n                        label=\"标题\"\r\n                        align=\"center\"\r\n                        sortable\r\n                        width=\"400\">\r\n                </el-table-column>\r\n                <el-table-column\r\n                        prop=\"hits\"\r\n                        label=\"点击量\"\r\n                        align=\"center\"\r\n                        sortable>\r\n                </el-table-column>\r\n                <el-table-column\r\n                        prop=\"formatDate\"\r\n                        label=\"创建日期\"\r\n                        align=\"center\"\r\n                        sortable>\r\n                </el-table-column>\r\n\r\n            </el-table>\r\n        </template>\r\n\r\n        <!-- 分页工具条 数据小于10条不展示 -->\r\n        <el-pagination\r\n                id=\"pageBar\"\r\n                v-show=\"noticeTotalCount >= 10\"\r\n                @size-change=\"noticeHandleSizeChange\"\r\n                @current-change=\"noticeHandleCurrentChange\"\r\n                :current-page=\"noticeCurrentPage\"\r\n                :page-sizes=\"[5, 10, 15, 20, 50, 100]\"\r\n                :page-size=\"noticePageSize\"\r\n                layout=\"total, sizes, prev, pager, next, jumper\"\r\n                :total=\"noticeTotalCount\">\r\n        </el-pagination>\r\n\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import SearchBox from \"@/components/SearchBox\";\r\n    import NoticeDrawer from \"@/components/NoticeDrawer\";\r\n    import Ckeditor4 from \"@/components/Ckeditor4\";\r\n    export default {\r\n        name: 'StuNoticeTab',\r\n        components:{\r\n            Ckeditor4,\r\n            SearchBox,\r\n            NoticeDrawer\r\n        },\r\n        data(){\r\n            return{\r\n                // 当前页码\r\n                noticeCurrentPage: 1,\r\n                // 分页大小\r\n                noticePageSize: 10,\r\n                // 总页码数\r\n                noticeTotalCount: 1,\r\n                // 搜索表单数据模型\r\n                searchTitle:{\r\n                    title:'',\r\n                },\r\n                // 内置查询模型\r\n                searchNoticeByTitle:{\r\n                    title:'',\r\n                },\r\n                // 通知数据列表\r\n                noticeTableData:[],\r\n                // 公告抽屉\r\n                noticeDrawer:false,\r\n                noticeDrawerContent:'',     // 内容\r\n            }\r\n        },\r\n        created() {\r\n            this.getNoticeByTitle();\r\n        },\r\n        methods:{\r\n            // 查找通知\r\n            // 系统内置一个title，默认为空，即全查询。每次条件查询都会把条件赋给该title。\r\n            // 因此这样点击分页栏时可以正常显示查询结果。\r\n            getNoticeByTitle(){\r\n                this.searchNoticeByTitle[\"pageSize\"]=this.noticePageSize;\r\n                this.searchNoticeByTitle[\"currentPage\"]=this.noticeCurrentPage;\r\n                this.$axios.post(\"/Notice/getNoticeByTitle\",this.searchNoticeByTitle).then((res)=>{\r\n                    if(res.data.flag){\r\n                        /* 保存公告数据 */\r\n                        this.noticeTableData = res.data.data.records;\r\n                        /* 保存分页数据 */\r\n                        this.noticeTotalCount = res.data.data.total;\r\n                        this.noticeCurrentPage = res.data.data.current;\r\n                        this.noticePageSize = res.data.data.size;\r\n                    }else{\r\n                        // 服务故障\r\n                        this.$message.error(\"信息获取失败！\");\r\n                    }\r\n                });\r\n            },\r\n            // 表格颜色控制\r\n            tableRowClassName({row, rowIndex}) {\r\n                if (rowIndex%4 === 1) {\r\n                    return 'warning-row';\r\n                } else if (rowIndex%4 === 3) {\r\n                    return 'success-row';\r\n                }\r\n                return '';\r\n            },\r\n            // 查询通知\r\n            searchNoticeOnSubmit(title){\r\n                // 刷新查询条件\r\n                this.searchNoticeByTitle.title = title;\r\n                // 执行查询\r\n                this.getNoticeByTitle();\r\n                /* 清空查询条件 */\r\n                this.searchTitle.title='';\r\n            },\r\n            // 当某行数据被点击\r\n            noticeRowClick(row,column){\r\n                // 排除操作列\r\n                if(column.label === '操作')return;\r\n                this.noticeDrawer = true;\r\n                this.noticeDrawerContent = row;\r\n                // 发送一次请求\r\n                setTimeout(()=>{this.noticeDrawer = false; },500);\r\n            },\r\n            // 分页大小变化\r\n            noticeHandleSizeChange(val) {\r\n                this.noticePageSize = val;\r\n                // 查询所有通知\r\n                this.getNoticeByTitle();\r\n            },\r\n            // 当前页变化\r\n            noticeHandleCurrentChange(val) {\r\n                this.noticeCurrentPage = val;\r\n                // 查询所有通知\r\n                this.getNoticeByTitle();\r\n            },\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    /* 表格文字大小 */\r\n    .el-table{\r\n        font-size: 17px;\r\n    }\r\n    /* 表格行高控制 */\r\n    ::v-deep .el-table .el-table__cell{\r\n        padding: 12px 0;\r\n    }\r\n    /* 分页工具条上框 */\r\n    #pageBar{\r\n        margin-top: 20px;\r\n    }\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}