{"ast":null,"code":"import \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.replace.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport SearchBox from \"@/components/SearchBox\";\nimport Ckeditor4 from \"@/components/Ckeditor4\";\nexport default {\n  name: 'StuDiscussionTab',\n  components: {\n    SearchBox: SearchBox,\n    Ckeditor4: Ckeditor4\n  },\n  data: function data() {\n    return {\n      // 用户数据\n      user: '',\n      // 当前页码\n      currentPage: 1,\n      // 分页大小\n      pageSize: 10,\n      // 总页码数\n      totalCount: 1,\n      // 搜索表单数据模型\n      searchTitle: {\n        title: ''\n      },\n      // 内置查询模型\n      searchDiscussionByTitle: {\n        title: ''\n      },\n      // 创建讨论数据模型\n      createDiscussionData: {\n        title: '',\n        content: ''\n      },\n      // 编辑讨论数据模型\n      updateDiscussionData: {\n        discussionId: -1,\n        title: '',\n        content: ''\n      },\n      // 讨论发布对话框\n      discussionEditDialogVisible: false,\n      // 编辑讨论对话框\n      discussionUpdateDialogVisible: false,\n      // 讨论数据列表\n      discussionTableData: [],\n      // 对话框销毁器\n      closeDialog: false\n    };\n  },\n  created: function created() {\n    this.getUser();\n    this.getDiscussionByTitle();\n  },\n  methods: {\n    // 获取用户数据\n    getUser: function getUser() {\n      var _this = this;\n\n      this.$axios.get(\"/Users/isUserLogin\").then(function (res) {\n        if (res.data.flag) {\n          // 保存用户数据\n          _this.user = res.data.data;\n        } else {\n          _this.$router.replace({\n            name: 'Login'\n          });\n        }\n      });\n    },\n    // 查找讨论\n    // 系统内置一个title，默认为空，即全查询。每次条件查询都会把条件赋给该title。\n    // 因此这样点击分页栏时可以正常显示查询结果。\n    getDiscussionByTitle: function getDiscussionByTitle() {\n      var _this2 = this;\n\n      this.searchDiscussionByTitle[\"pageSize\"] = this.pageSize;\n      this.searchDiscussionByTitle[\"currentPage\"] = this.currentPage;\n      this.$axios.post(\"/Discussion/getDiscussionByTitle\", this.searchDiscussionByTitle).then(function (res) {\n        if (res.data.flag) {\n          /* 保存公告数据 */\n          _this2.discussionTableData = res.data.data.records;\n          /* 保存分页数据 */\n\n          _this2.totalCount = res.data.data.total;\n          _this2.currentPage = res.data.data.current;\n          _this2.pageSize = res.data.data.size;\n        } else {\n          // 服务故障\n          _this2.$message.error(\"信息获取失败！\");\n        }\n      });\n    },\n    // 表格颜色控制\n    tableRowClassName: function tableRowClassName(_ref) {\n      var row = _ref.row,\n          rowIndex = _ref.rowIndex;\n\n      if (rowIndex % 4 === 1) {\n        return 'warning-row';\n      } else if (rowIndex % 4 === 3) {\n        return 'success-row';\n      }\n\n      return '';\n    },\n    // 新建讨论\n    createDiscussionOnSubmit: function createDiscussionOnSubmit() {\n      this.discussionEditDialogVisible = true;\n      this.closeDialog = true;\n    },\n    // 查询讨论\n    searchDiscussionOnSubmit: function searchDiscussionOnSubmit(title) {\n      // 刷新查询条件\n      this.searchDiscussionByTitle.title = title; // 执行查询\n\n      this.getDiscussionByTitle();\n      /* 清空查询条件 */\n\n      this.searchTitle.title = '';\n    },\n    // 创建讨论\n    createDiscussion: function createDiscussion(discussion) {\n      var _this3 = this;\n\n      if (discussion.title === '' || discussion.content === '') {\n        this.$message.warning(\"请填写完整再提交！\");\n        return;\n      } // 保存到数据库\n\n\n      this.$axios.post(\"/Discussion/createDiscussion\", discussion).then(function (res) {\n        if (res.data.flag) {\n          // 修改成功\n          _this3.$message.success(res.data.msg); // 刷新课程数据\n\n\n          _this3.getDiscussionByTitle(); // 关闭编辑窗口\n\n\n          _this3.discussionEditDialogVisible = false; // 重置模型\n\n          _this3.createDiscussionData.title = '';\n          _this3.createDiscussionData.content = '';\n        } else {\n          // 服务故障\n          _this3.$message.error(res.data.msg);\n        }\n      });\n    },\n    // 编辑讨论激活\n    editDiscussion: function editDiscussion(row) {\n      // 预先绑定数据\n      this.updateDiscussionData.title = row.title;\n      this.updateDiscussionData.content = row.content;\n      this.updateDiscussionData.discussionId = row.discussionId;\n      this.closeDialog = true;\n      this.discussionUpdateDialogVisible = true;\n    },\n    // 编辑讨论\n    updateDiscussion: function updateDiscussion(discussion) {\n      var _this4 = this;\n\n      if (discussion.title === '' || discussion.content === '') {\n        this.$message.warning(\"请填写完整再提交！\");\n        return;\n      } // 保存到数据库\n\n\n      this.$axios.post(\"/Discussion/updateDiscussion\", discussion).then(function (res) {\n        if (res.data.flag) {\n          // 修改成功\n          _this4.$message.success(res.data.msg); // 刷新课程数据\n\n\n          _this4.getDiscussionByTitle(); // 关闭编辑窗口\n\n\n          _this4.discussionUpdateDialogVisible = false; // 重置模型\n\n          _this4.updateDiscussionData.title = '';\n          _this4.updateDiscussionData.discussionId = -1;\n          _this4.updateDiscussionData.content = '';\n        } else {\n          // 服务故障\n          _this4.$message.error(res.data.msg);\n        }\n      });\n    },\n    // 编辑讨论dialog销毁\n    discussionDialogHandleClose: function discussionDialogHandleClose() {\n      // 手动销毁\n      this.closeDialog = false;\n    },\n    // 当某行数据被点击\n    discussionRowClick: function discussionRowClick(row, column) {\n      // 排除操作列\n      if (column.label === '操作') return;\n      this.$router.push({\n        name: 'StuDiscussionView',\n        params: {\n          discussionId: row.discussionId\n        }\n      });\n    },\n    // 查看讨论\n    viewDiscussion: function viewDiscussion(row) {\n      this.$router.push({\n        name: 'StuDiscussionView',\n        params: {\n          discussionId: row.discussionId\n        }\n      });\n    },\n    // 删除讨论\n    deleteDiscussion: function deleteDiscussion(row) {\n      var _this5 = this;\n\n      // 弹框确认\n      this.$confirm('此操作将删除该讨论, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(function () {\n        var discussion = {\n          discussionId: row.discussionId\n        }; // 执行删除\n\n        _this5.$axios.post(\"/Discussion/deleteDiscussionById\", discussion).then(function (resp) {\n          if (resp.data.flag) {\n            // 删除成功，刷新数据\n            _this5.getDiscussionByTitle();\n\n            _this5.$message.success('删除成功！');\n          } else {\n            _this5.$message.error('删除失败！');\n          }\n        });\n      }).catch(function () {\n        // 取消删除\n        _this5.$message.info('取消删除');\n      });\n    },\n    // 分页大小变化\n    discussionHandleSizeChange: function discussionHandleSizeChange(val) {\n      this.pageSize = val; // 查询所有讨论\n\n      this.getDiscussionByTitle();\n    },\n    // 当前页变化\n    discussionHandleCurrentChange: function discussionHandleCurrentChange(val) {\n      this.currentPage = val; // 查询所有讨论\n\n      this.getDiscussionByTitle();\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["name","components","SearchBox","Ckeditor4","data","user","currentPage","pageSize","totalCount","searchTitle","title","searchDiscussionByTitle","createDiscussionData","content","updateDiscussionData","discussionId","discussionEditDialogVisible","discussionUpdateDialogVisible","discussionTableData","closeDialog","created","methods","getUser","getDiscussionByTitle","tableRowClassName","createDiscussionOnSubmit","searchDiscussionOnSubmit","createDiscussion","discussion","editDiscussion","row","updateDiscussion","discussionDialogHandleClose","discussionRowClick","column","params","viewDiscussion","deleteDiscussion","confirmButtonText","cancelButtonText","type","then","catch","discussionHandleSizeChange","val","discussionHandleCurrentChange"],"sourceRoot":"src/pages/user/studentComponents","sources":["StuDiscussionTab.vue"],"sourcesContent":["<template>\r\n    <div>\r\n        <!-- 功能菜单 -->\r\n        <el-row style=\"margin-top: 20px\">\r\n            <!--按钮-->\r\n            <el-col :span=\"7\">\r\n                <el-row>\r\n                    <el-col :span=\"22\" :offset=\"1\">\r\n                        <el-button type=\"primary\" plain @click=\"createDiscussionOnSubmit\">新建讨论</el-button>\r\n                    </el-col>\r\n                </el-row>\r\n            </el-col>\r\n            <!--搜索表单-->\r\n            <el-col :span=\"7\" :offset=\"9\">\r\n                <search-box @onSubmit=\"searchDiscussionOnSubmit\"></search-box>\r\n            </el-col>\r\n        </el-row>\r\n\r\n        <!--添加讨论对话框表单-->\r\n        <el-dialog\r\n                v-if=\"closeDialog\"\r\n                title=\"新建讨论\"\r\n                :visible.sync=\"discussionEditDialogVisible\"\r\n                @close=\"discussionDialogHandleClose\"\r\n                width=\"60%\">\r\n            <!-- 标题编辑 -->\r\n            <div class=\"discussionInput\">输入标题</div>\r\n            <el-input\r\n                    id=\"createDiscussionTitle\"\r\n                    type=\"textarea\"\r\n                    v-model=\"createDiscussionData.title\"\r\n                    maxlength=\"60\"\r\n                    show-word-limit>\r\n            </el-input>\r\n            <!-- 内容编辑 -->\r\n            <div class=\"discussionInput\">输入内容</div>\r\n            <Ckeditor4 v-model=\"createDiscussionData.content\"></Ckeditor4>\r\n            <el-button type=\"text\"\r\n                       style=\"font-size: 16px;margin-top: 15px\"\r\n                       @click=\"createDiscussion(createDiscussionData)\">\r\n                保存编辑\r\n            </el-button>\r\n        </el-dialog>\r\n\r\n        <!--编辑讨论对话框表单-->\r\n        <el-dialog\r\n                v-if=\"closeDialog\"\r\n                title=\"编辑讨论\"\r\n                :visible.sync=\"discussionUpdateDialogVisible\"\r\n                @close=\"discussionDialogHandleClose\"\r\n                width=\"60%\">\r\n            <!-- 标题编辑 -->\r\n            <div class=\"discussionInput\">输入标题</div>\r\n            <el-input\r\n                    id=\"updateDiscussionTitle\"\r\n                    type=\"textarea\"\r\n                    v-model=\"updateDiscussionData.title\"\r\n                    maxlength=\"60\"\r\n                    show-word-limit>\r\n            </el-input>\r\n            <!-- 内容编辑 -->\r\n            <div class=\"discussionInput\">输入内容</div>\r\n            <Ckeditor4 v-model=\"updateDiscussionData.content\"></Ckeditor4>\r\n            <el-button type=\"text\"\r\n                       style=\"font-size: 16px;margin-top: 15px\"\r\n                       @click=\"updateDiscussion(updateDiscussionData)\">\r\n                保存编辑\r\n            </el-button>\r\n        </el-dialog>\r\n\r\n        <!--表格-->\r\n        <template>\r\n            <el-table\r\n                    ref=\"discussionMultipleTable\"\r\n                    :data=\"discussionTableData\"\r\n                    style=\"width: 100%\"\r\n                    :row-class-name=\"tableRowClassName\"\r\n                    @row-click=\"discussionRowClick\">\r\n                <el-table-column\r\n                        label=\"序号\"\r\n                        type=\"index\"\r\n                        align=\"center\"\r\n                        width=\"100\">\r\n                </el-table-column>\r\n\r\n                <el-table-column\r\n                        prop=\"title\"\r\n                        label=\"标题\"\r\n                        align=\"center\"\r\n                        sortable>\r\n                </el-table-column>\r\n                <el-table-column\r\n                        prop=\"username\"\r\n                        label=\"发布者\"\r\n                        align=\"center\"\r\n                        sortable>\r\n                </el-table-column>\r\n                <el-table-column\r\n                        prop=\"hits\"\r\n                        label=\"点击量\"\r\n                        align=\"center\"\r\n                        sortable>\r\n                </el-table-column>\r\n                <el-table-column\r\n                        prop=\"likes\"\r\n                        label=\"点赞数\"\r\n                        align=\"center\"\r\n                        sortable>\r\n                </el-table-column>\r\n                <el-table-column\r\n                        prop=\"formatDate\"\r\n                        label=\"创建日期\"\r\n                        align=\"center\"\r\n                        sortable>\r\n                </el-table-column>\r\n\r\n                <el-table-column\r\n                        align=\"center\"\r\n                        label=\"操作\">\r\n                    <template slot-scope=\"scope\">\r\n                        <div v-if=\"scope.row.userId === user.userId\">\r\n                            <el-button type=\"primary\" @click=\"editDiscussion(scope.row)\">编辑</el-button>\r\n                            <el-button type=\"danger\" @click=\"deleteDiscussion(scope.row)\">删除</el-button>\r\n                        </div>\r\n                       <div  v-if=\"scope.row.userId !== user.userId\">\r\n                           <el-button type=\"primary\" @click=\"viewDiscussion(scope.row)\">详情</el-button>\r\n                       </div>\r\n                    </template>\r\n                </el-table-column>\r\n\r\n            </el-table>\r\n        </template>\r\n\r\n        <!-- 分页工具条 数据小于10条不展示 -->\r\n        <el-pagination\r\n                id=\"pageBar\"\r\n                v-show=\"totalCount >= 10\"\r\n                @size-change=\"discussionHandleSizeChange\"\r\n                @current-change=\"discussionHandleCurrentChange\"\r\n                :current-page=\"currentPage\"\r\n                :page-sizes=\"[5, 10, 15, 20, 50, 100]\"\r\n                :page-size=\"pageSize\"\r\n                layout=\"total, sizes, prev, pager, next, jumper\"\r\n                :total=\"totalCount\">\r\n        </el-pagination>\r\n\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import SearchBox from \"@/components/SearchBox\";\r\n    import Ckeditor4 from \"@/components/Ckeditor4\";\r\n    export default {\r\n        name: 'StuDiscussionTab',\r\n        components:{\r\n            SearchBox,\r\n            Ckeditor4,\r\n        },\r\n        data(){\r\n            return{\r\n                // 用户数据\r\n                user:'',\r\n                // 当前页码\r\n                currentPage: 1,\r\n                // 分页大小\r\n                pageSize: 10,\r\n                // 总页码数\r\n                totalCount: 1,\r\n                // 搜索表单数据模型\r\n                searchTitle:{\r\n                    title:'',\r\n                },\r\n                // 内置查询模型\r\n                searchDiscussionByTitle:{\r\n                    title:'',\r\n                },\r\n                // 创建讨论数据模型\r\n                createDiscussionData:{\r\n                    title:'',\r\n                    content:'',\r\n                },\r\n                // 编辑讨论数据模型\r\n                updateDiscussionData:{\r\n                    discussionId:-1,\r\n                    title:'',\r\n                    content:'',\r\n                },\r\n                // 讨论发布对话框\r\n                discussionEditDialogVisible:false,\r\n                // 编辑讨论对话框\r\n                discussionUpdateDialogVisible:false,\r\n                // 讨论数据列表\r\n                discussionTableData:[],\r\n                // 对话框销毁器\r\n                closeDialog:false,\r\n            }\r\n        },\r\n        created() {\r\n            this.getUser();\r\n            this.getDiscussionByTitle();\r\n        },\r\n        methods:{\r\n            // 获取用户数据\r\n            getUser(){\r\n                this.$axios.get(\"/Users/isUserLogin\").then((res)=>{\r\n                    if(res.data.flag){\r\n                        // 保存用户数据\r\n                        this.user = res.data.data;\r\n                    }else{\r\n                        this.$router.replace({\r\n                            name:'Login'\r\n                        })\r\n                    }\r\n                });\r\n            },\r\n            // 查找讨论\r\n            // 系统内置一个title，默认为空，即全查询。每次条件查询都会把条件赋给该title。\r\n            // 因此这样点击分页栏时可以正常显示查询结果。\r\n            getDiscussionByTitle(){\r\n                this.searchDiscussionByTitle[\"pageSize\"]=this.pageSize;\r\n                this.searchDiscussionByTitle[\"currentPage\"]=this.currentPage;\r\n                this.$axios.post(\"/Discussion/getDiscussionByTitle\",this.searchDiscussionByTitle).then((res)=>{\r\n                    if(res.data.flag){\r\n                        /* 保存公告数据 */\r\n                        this.discussionTableData = res.data.data.records;\r\n                        /* 保存分页数据 */\r\n                        this.totalCount = res.data.data.total;\r\n                        this.currentPage = res.data.data.current;\r\n                        this.pageSize = res.data.data.size;\r\n                    }else{\r\n                        // 服务故障\r\n                        this.$message.error(\"信息获取失败！\");\r\n                    }\r\n                });\r\n            },\r\n            // 表格颜色控制\r\n            tableRowClassName({row, rowIndex}) {\r\n                if (rowIndex%4 === 1) {\r\n                    return 'warning-row';\r\n                } else if (rowIndex%4 === 3) {\r\n                    return 'success-row';\r\n                }\r\n                return '';\r\n            },\r\n            // 新建讨论\r\n            createDiscussionOnSubmit(){\r\n                this.discussionEditDialogVisible=true;\r\n                this.closeDialog=true;\r\n            },\r\n            // 查询讨论\r\n            searchDiscussionOnSubmit(title){\r\n                // 刷新查询条件\r\n                this.searchDiscussionByTitle.title = title;\r\n                // 执行查询\r\n                this.getDiscussionByTitle();\r\n                /* 清空查询条件 */\r\n                this.searchTitle.title='';\r\n            },\r\n            // 创建讨论\r\n            createDiscussion(discussion){\r\n                if(discussion.title === '' || discussion.content === ''){\r\n                    this.$message.warning(\"请填写完整再提交！\");\r\n                    return;\r\n                }\r\n                // 保存到数据库\r\n                this.$axios.post(\"/Discussion/createDiscussion\",discussion).then((res)=>{\r\n                    if(res.data.flag){\r\n                        // 修改成功\r\n                        this.$message.success(res.data.msg);\r\n                        // 刷新课程数据\r\n                        this.getDiscussionByTitle();\r\n                        // 关闭编辑窗口\r\n                        this.discussionEditDialogVisible=false;\r\n                        // 重置模型\r\n                        this.createDiscussionData.title = '';\r\n                        this.createDiscussionData.content = '';\r\n                    }else{\r\n                        // 服务故障\r\n                        this.$message.error(res.data.msg);\r\n                    }\r\n                });\r\n            },\r\n            // 编辑讨论激活\r\n            editDiscussion(row){\r\n                // 预先绑定数据\r\n                this.updateDiscussionData.title = row.title;\r\n                this.updateDiscussionData.content = row.content;\r\n                this.updateDiscussionData.discussionId = row.discussionId;\r\n                this.closeDialog = true;\r\n                this.discussionUpdateDialogVisible = true;\r\n            },\r\n            // 编辑讨论\r\n            updateDiscussion(discussion){\r\n                if(discussion.title === '' || discussion.content === ''){\r\n                    this.$message.warning(\"请填写完整再提交！\");\r\n                    return;\r\n                }\r\n                // 保存到数据库\r\n                this.$axios.post(\"/Discussion/updateDiscussion\",discussion).then((res)=>{\r\n                    if(res.data.flag){\r\n                        // 修改成功\r\n                        this.$message.success(res.data.msg);\r\n                        // 刷新课程数据\r\n                        this.getDiscussionByTitle();\r\n                        // 关闭编辑窗口\r\n                        this.discussionUpdateDialogVisible=false;\r\n                        // 重置模型\r\n                        this.updateDiscussionData.title = '';\r\n                        this.updateDiscussionData.discussionId = -1;\r\n                        this.updateDiscussionData.content = '';\r\n                    }else{\r\n                        // 服务故障\r\n                        this.$message.error(res.data.msg);\r\n                    }\r\n                });\r\n            },\r\n            // 编辑讨论dialog销毁\r\n            discussionDialogHandleClose(){\r\n                // 手动销毁\r\n                this.closeDialog = false;\r\n            },\r\n            // 当某行数据被点击\r\n            discussionRowClick(row,column){\r\n                // 排除操作列\r\n                if(column.label === '操作')return;\r\n                this.$router.push({\r\n                    name:'StuDiscussionView',\r\n                    params:{\r\n                        discussionId:row.discussionId,\r\n                    }\r\n                })\r\n            },\r\n            // 查看讨论\r\n            viewDiscussion(row){\r\n                this.$router.push({\r\n                    name:'StuDiscussionView',\r\n                    params:{\r\n                        discussionId:row.discussionId,\r\n                    }\r\n                })\r\n            },\r\n            // 删除讨论\r\n            deleteDiscussion(row){\r\n                // 弹框确认\r\n                this.$confirm('此操作将删除该讨论, 是否继续?', '提示', {\r\n                    confirmButtonText: '确定',\r\n                    cancelButtonText: '取消',\r\n                    type: 'warning'\r\n                }).then(() => {\r\n                    let discussion = {discussionId:row.discussionId};\r\n                    // 执行删除\r\n                    this.$axios.post(\"/Discussion/deleteDiscussionById\",discussion).then(resp=>{\r\n                        if(resp.data.flag){\r\n                            // 删除成功，刷新数据\r\n                            this.getDiscussionByTitle();\r\n                            this.$message.success('删除成功！');\r\n                        }else{\r\n                            this.$message.error('删除失败！');\r\n                        }\r\n                    })\r\n                }).catch(() => {\r\n                    // 取消删除\r\n                    this.$message.info('取消删除');\r\n                });\r\n            },\r\n            // 分页大小变化\r\n            discussionHandleSizeChange(val) {\r\n                this.pageSize = val;\r\n                // 查询所有讨论\r\n                this.getDiscussionByTitle();\r\n            },\r\n            // 当前页变化\r\n            discussionHandleCurrentChange(val) {\r\n                this.currentPage = val;\r\n                // 查询所有讨论\r\n                this.getDiscussionByTitle();\r\n            },\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    /* 输入框标题 */\r\n    .discussionInput{\r\n        margin: 20px;\r\n        font-size: 16px;\r\n    }\r\n    /* 编辑通知标题 */\r\n    #createDiscussionTitle,#updateDiscussionTitle{\r\n        font-size: 18px;\r\n        color: #000000;\r\n        height: 70px;\r\n    }\r\n    /* 表格文字大小 */\r\n    .el-table{\r\n        font-size: 17px;\r\n    }\r\n    /* 表格行高控制 */\r\n    ::v-deep .el-table .el-table__cell{\r\n        padding: 9px 0;\r\n    }\r\n    #pageBar{\r\n        margin-top: 20px;\r\n    }\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}