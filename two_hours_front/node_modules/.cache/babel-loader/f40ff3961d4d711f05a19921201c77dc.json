{"ast":null,"code":"import \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\n\nvar DndPanel =\n/** @class */\nfunction () {\n  function DndPanel(_a) {\n    var _this = this;\n\n    var lf = _a.lf;\n    this.lf = lf;\n\n    this.lf.setPatternItems = function (shapeList) {\n      _this.setPatternItems(shapeList);\n    };\n  }\n\n  DndPanel.prototype.render = function (lf, domContainer) {\n    var _this = this;\n\n    this.destroy();\n\n    if (!this.shapeList || this.shapeList.length === 0) {\n      // 首次render后失败后，后续调用setPatternItems支持渲染\n      this.domContainer = domContainer;\n      return;\n    }\n\n    this.panelEl = document.createElement('div');\n    this.panelEl.className = 'lf-dndpanel';\n    this.shapeList.forEach(function (shapeItem) {\n      _this.panelEl.appendChild(_this.createDndItem(shapeItem));\n    });\n    domContainer.appendChild(this.panelEl);\n    this.domContainer = domContainer;\n  };\n\n  DndPanel.prototype.destroy = function () {\n    if (this.domContainer && this.panelEl && this.domContainer.contains(this.panelEl)) {\n      this.domContainer.removeChild(this.panelEl);\n    }\n  };\n\n  DndPanel.prototype.setPatternItems = function (shapeList) {\n    this.shapeList = shapeList; // 支持渲染后重新设置拖拽面板\n\n    if (this.domContainer) {\n      this.render(this.lf, this.domContainer);\n    }\n  };\n\n  DndPanel.prototype.createDndItem = function (shapeItem) {\n    var _this = this;\n\n    var el = document.createElement('div');\n    el.className = shapeItem.className ? \"lf-dnd-item \" + shapeItem.className : 'lf-dnd-item';\n    var shape = document.createElement('div');\n    shape.className = 'lf-dnd-shape';\n\n    if (shapeItem.icon) {\n      shape.style.backgroundImage = \"url(\" + shapeItem.icon + \")\";\n    }\n\n    el.appendChild(shape);\n\n    if (shapeItem.label) {\n      var text = document.createElement('div');\n      text.innerText = shapeItem.label;\n      text.className = 'lf-dnd-text';\n      el.appendChild(text);\n    }\n\n    el.onmousedown = function () {\n      if (shapeItem.type) {\n        _this.lf.dnd.startDrag({\n          type: shapeItem.type,\n          properties: shapeItem.properties,\n          text: shapeItem.text\n        });\n      }\n\n      if (shapeItem.callback) {\n        shapeItem.callback(_this.lf, _this.domContainer);\n      }\n    };\n\n    return el;\n  };\n\n  DndPanel.pluginName = 'dndPanel';\n  return DndPanel;\n}();\n\nexport { DndPanel };","map":{"version":3,"sources":["F:/Desktop/two_hours_front/node_modules/@logicflow/extension/es/components/dnd-panel/index.js"],"names":["DndPanel","_a","_this","lf","setPatternItems","shapeList","prototype","render","domContainer","destroy","length","panelEl","document","createElement","className","forEach","shapeItem","appendChild","createDndItem","contains","removeChild","el","shape","icon","style","backgroundImage","label","text","innerText","onmousedown","type","dnd","startDrag","properties","callback","pluginName"],"mappings":"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","sourcesContent":["var DndPanel = /** @class */ (function () {\n    function DndPanel(_a) {\n        var _this = this;\n        var lf = _a.lf;\n        this.lf = lf;\n        this.lf.setPatternItems = function (shapeList) {\n            _this.setPatternItems(shapeList);\n        };\n    }\n    DndPanel.prototype.render = function (lf, domContainer) {\n        var _this = this;\n        this.destroy();\n        if (!this.shapeList || this.shapeList.length === 0) {\n            // 首次render后失败后，后续调用setPatternItems支持渲染\n            this.domContainer = domContainer;\n            return;\n        }\n        this.panelEl = document.createElement('div');\n        this.panelEl.className = 'lf-dndpanel';\n        this.shapeList.forEach(function (shapeItem) {\n            _this.panelEl.appendChild(_this.createDndItem(shapeItem));\n        });\n        domContainer.appendChild(this.panelEl);\n        this.domContainer = domContainer;\n    };\n    DndPanel.prototype.destroy = function () {\n        if (this.domContainer && this.panelEl && this.domContainer.contains(this.panelEl)) {\n            this.domContainer.removeChild(this.panelEl);\n        }\n    };\n    DndPanel.prototype.setPatternItems = function (shapeList) {\n        this.shapeList = shapeList;\n        // 支持渲染后重新设置拖拽面板\n        if (this.domContainer) {\n            this.render(this.lf, this.domContainer);\n        }\n    };\n    DndPanel.prototype.createDndItem = function (shapeItem) {\n        var _this = this;\n        var el = document.createElement('div');\n        el.className = shapeItem.className ? \"lf-dnd-item \" + shapeItem.className : 'lf-dnd-item';\n        var shape = document.createElement('div');\n        shape.className = 'lf-dnd-shape';\n        if (shapeItem.icon) {\n            shape.style.backgroundImage = \"url(\" + shapeItem.icon + \")\";\n        }\n        el.appendChild(shape);\n        if (shapeItem.label) {\n            var text = document.createElement('div');\n            text.innerText = shapeItem.label;\n            text.className = 'lf-dnd-text';\n            el.appendChild(text);\n        }\n        el.onmousedown = function () {\n            if (shapeItem.type) {\n                _this.lf.dnd.startDrag({\n                    type: shapeItem.type,\n                    properties: shapeItem.properties,\n                    text: shapeItem.text,\n                });\n            }\n            if (shapeItem.callback) {\n                shapeItem.callback(_this.lf, _this.domContainer);\n            }\n        };\n        return el;\n    };\n    DndPanel.pluginName = 'dndPanel';\n    return DndPanel;\n}());\nexport { DndPanel, };\n"]},"metadata":{},"sourceType":"module"}