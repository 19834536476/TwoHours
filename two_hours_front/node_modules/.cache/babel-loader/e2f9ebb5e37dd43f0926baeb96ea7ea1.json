{"ast":null,"code":"import \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\n\nvar SelectionSelect =\n/** @class */\nfunction () {\n  function SelectionSelect(_a) {\n    var _this = this;\n\n    var lf = _a.lf;\n    this.__disabled = false;\n    this.isDefalutStopMoveGraph = false;\n    this.isWholeNode = true;\n    this.isWholeEdge = true;\n\n    this.__draw = function (ev) {\n      var _a = _this.lf.getPointByClient(ev.clientX, ev.clientY).domOverlayPosition,\n          x1 = _a.x,\n          y1 = _a.y;\n\n      _this.endPoint = {\n        x: x1,\n        y: y1\n      };\n      var _b = _this.startPoint,\n          x = _b.x,\n          y = _b.y;\n      var style = _this.wrapper.style;\n      var left = x;\n      var top = y;\n      var width = x1 - x;\n      var height = y1 - y;\n\n      if (x1 < x) {\n        left = x1;\n        width = x - x1;\n      }\n\n      if (y1 < y) {\n        top = y1;\n        height = y - y1;\n      }\n\n      style.left = left + \"px\";\n      style.top = top + \"px\";\n      style.width = width + \"px\";\n      style.height = height + \"px\";\n    };\n\n    this.__drawOff = function () {\n      document.removeEventListener('mousemove', _this.__draw);\n      document.removeEventListener('mouseup', _this.__drawOff);\n\n      _this.__domContainer.removeChild(_this.wrapper);\n\n      var _a = _this.startPoint,\n          x = _a.x,\n          y = _a.y;\n      var _b = _this.endPoint,\n          x1 = _b.x,\n          y1 = _b.y; // 选区太小的情况就忽略\n\n      if (Math.abs(x1 - x) < 10 && Math.abs(y1 - y) < 10) {\n        return;\n      }\n\n      var lt = [Math.min(x, x1), Math.min(y, y1)];\n      var rt = [Math.max(x, x1), Math.max(y, y1)];\n\n      var elements = _this.lf.getAreaElement(lt, rt, _this.isWholeEdge, _this.isWholeNode);\n\n      elements.forEach(function (element) {\n        _this.lf.selectElementById(element.id, true);\n      });\n\n      _this.lf.emit('selection:selected', elements);\n    };\n\n    this.lf = lf; // 初始化isDefalutStopMoveGraph取值\n\n    var stopMoveGraph = lf.getEditConfig().stopMoveGraph;\n    this.isDefalutStopMoveGraph = stopMoveGraph;\n\n    lf.openSelectionSelect = function () {\n      _this.openSelectionSelect();\n    };\n\n    lf.closeSelectionSelect = function () {\n      _this.closeSelectionSelect();\n    };\n  }\n\n  SelectionSelect.prototype.render = function (lf, domContainer) {\n    var _this = this;\n\n    this.__domContainer = domContainer;\n    lf.on('blank:mousedown', function (_a) {\n      var e = _a.e;\n      var config = lf.getEditConfig(); // 鼠标控制滚动移动画布的时候，不能选区。\n\n      if (!config.stopMoveGraph || _this.__disabled) {\n        return;\n      }\n\n      var _b = lf.getPointByClient(e.clientX, e.clientY).domOverlayPosition,\n          x = _b.x,\n          y = _b.y;\n      _this.startPoint = {\n        x: x,\n        y: y\n      };\n      _this.endPoint = {\n        x: x,\n        y: y\n      };\n      var wrapper = document.createElement('div');\n      wrapper.className = 'lf-selection-select';\n      wrapper.style.top = _this.startPoint.y + \"px\";\n      wrapper.style.left = _this.startPoint.x + \"px\";\n      domContainer.appendChild(wrapper);\n      _this.wrapper = wrapper;\n      document.addEventListener('mousemove', _this.__draw);\n      document.addEventListener('mouseup', _this.__drawOff);\n    });\n  };\n  /**\n   * 设置选中的灵敏度\n   * @param isWholeEdge 是否要边的起点终点都在选区范围才算选中。默认true\n   * @param isWholeNode 是否要节点的全部点都在选区范围才算选中。默认true\n   */\n\n\n  SelectionSelect.prototype.setSelectionSense = function (isWholeEdge, isWholeNode) {\n    if (isWholeEdge === void 0) {\n      isWholeEdge = true;\n    }\n\n    if (isWholeNode === void 0) {\n      isWholeNode = true;\n    }\n\n    this.isWholeEdge = isWholeEdge;\n    this.isWholeNode = isWholeNode;\n  };\n  /**\n   * 开启选区\n   */\n\n\n  SelectionSelect.prototype.openSelectionSelect = function () {\n    var stopMoveGraph = this.lf.getEditConfig().stopMoveGraph;\n\n    if (!stopMoveGraph) {\n      this.isDefalutStopMoveGraph = false;\n      this.lf.updateEditConfig({\n        stopMoveGraph: true\n      });\n    }\n\n    this.open();\n  };\n  /**\n   * 关闭选区\n   */\n\n\n  SelectionSelect.prototype.closeSelectionSelect = function () {\n    if (!this.isDefalutStopMoveGraph) {\n      this.lf.updateEditConfig({\n        stopMoveGraph: false\n      });\n    }\n\n    this.close();\n  };\n\n  SelectionSelect.prototype.open = function () {\n    this.__disabled = false;\n  };\n\n  SelectionSelect.prototype.close = function () {\n    this.__disabled = true;\n  };\n\n  SelectionSelect.pluginName = 'selectionSelect';\n  return SelectionSelect;\n}();\n\nexport { SelectionSelect };","map":{"version":3,"sources":["F:/Desktop/two_hours_front/node_modules/@logicflow/extension/es/components/selection-select/index.js"],"names":["SelectionSelect","_a","_this","lf","__disabled","isDefalutStopMoveGraph","isWholeNode","isWholeEdge","__draw","ev","getPointByClient","clientX","clientY","domOverlayPosition","x1","x","y1","y","endPoint","_b","startPoint","style","wrapper","left","top","width","height","__drawOff","document","removeEventListener","__domContainer","removeChild","Math","abs","lt","min","rt","max","elements","getAreaElement","forEach","element","selectElementById","id","emit","stopMoveGraph","getEditConfig","openSelectionSelect","closeSelectionSelect","prototype","render","domContainer","on","e","config","createElement","className","appendChild","addEventListener","setSelectionSense","updateEditConfig","open","close","pluginName"],"mappings":"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","sourcesContent":["var SelectionSelect = /** @class */ (function () {\n    function SelectionSelect(_a) {\n        var _this = this;\n        var lf = _a.lf;\n        this.__disabled = false;\n        this.isDefalutStopMoveGraph = false;\n        this.isWholeNode = true;\n        this.isWholeEdge = true;\n        this.__draw = function (ev) {\n            var _a = _this.lf.getPointByClient(ev.clientX, ev.clientY).domOverlayPosition, x1 = _a.x, y1 = _a.y;\n            _this.endPoint = { x: x1, y: y1 };\n            var _b = _this.startPoint, x = _b.x, y = _b.y;\n            var style = _this.wrapper.style;\n            var left = x;\n            var top = y;\n            var width = x1 - x;\n            var height = y1 - y;\n            if (x1 < x) {\n                left = x1;\n                width = x - x1;\n            }\n            if (y1 < y) {\n                top = y1;\n                height = y - y1;\n            }\n            style.left = left + \"px\";\n            style.top = top + \"px\";\n            style.width = width + \"px\";\n            style.height = height + \"px\";\n        };\n        this.__drawOff = function () {\n            document.removeEventListener('mousemove', _this.__draw);\n            document.removeEventListener('mouseup', _this.__drawOff);\n            _this.__domContainer.removeChild(_this.wrapper);\n            var _a = _this.startPoint, x = _a.x, y = _a.y;\n            var _b = _this.endPoint, x1 = _b.x, y1 = _b.y;\n            // 选区太小的情况就忽略\n            if (Math.abs(x1 - x) < 10 && Math.abs(y1 - y) < 10) {\n                return;\n            }\n            var lt = [Math.min(x, x1), Math.min(y, y1)];\n            var rt = [Math.max(x, x1), Math.max(y, y1)];\n            var elements = _this.lf.getAreaElement(lt, rt, _this.isWholeEdge, _this.isWholeNode);\n            elements.forEach(function (element) {\n                _this.lf.selectElementById(element.id, true);\n            });\n            _this.lf.emit('selection:selected', elements);\n        };\n        this.lf = lf;\n        // 初始化isDefalutStopMoveGraph取值\n        var stopMoveGraph = lf.getEditConfig().stopMoveGraph;\n        this.isDefalutStopMoveGraph = stopMoveGraph;\n        lf.openSelectionSelect = function () {\n            _this.openSelectionSelect();\n        };\n        lf.closeSelectionSelect = function () {\n            _this.closeSelectionSelect();\n        };\n    }\n    SelectionSelect.prototype.render = function (lf, domContainer) {\n        var _this = this;\n        this.__domContainer = domContainer;\n        lf.on('blank:mousedown', function (_a) {\n            var e = _a.e;\n            var config = lf.getEditConfig();\n            // 鼠标控制滚动移动画布的时候，不能选区。\n            if (!config.stopMoveGraph || _this.__disabled) {\n                return;\n            }\n            var _b = lf.getPointByClient(e.clientX, e.clientY).domOverlayPosition, x = _b.x, y = _b.y;\n            _this.startPoint = { x: x, y: y };\n            _this.endPoint = { x: x, y: y };\n            var wrapper = document.createElement('div');\n            wrapper.className = 'lf-selection-select';\n            wrapper.style.top = _this.startPoint.y + \"px\";\n            wrapper.style.left = _this.startPoint.x + \"px\";\n            domContainer.appendChild(wrapper);\n            _this.wrapper = wrapper;\n            document.addEventListener('mousemove', _this.__draw);\n            document.addEventListener('mouseup', _this.__drawOff);\n        });\n    };\n    /**\n     * 设置选中的灵敏度\n     * @param isWholeEdge 是否要边的起点终点都在选区范围才算选中。默认true\n     * @param isWholeNode 是否要节点的全部点都在选区范围才算选中。默认true\n     */\n    SelectionSelect.prototype.setSelectionSense = function (isWholeEdge, isWholeNode) {\n        if (isWholeEdge === void 0) { isWholeEdge = true; }\n        if (isWholeNode === void 0) { isWholeNode = true; }\n        this.isWholeEdge = isWholeEdge;\n        this.isWholeNode = isWholeNode;\n    };\n    /**\n     * 开启选区\n     */\n    SelectionSelect.prototype.openSelectionSelect = function () {\n        var stopMoveGraph = this.lf.getEditConfig().stopMoveGraph;\n        if (!stopMoveGraph) {\n            this.isDefalutStopMoveGraph = false;\n            this.lf.updateEditConfig({\n                stopMoveGraph: true,\n            });\n        }\n        this.open();\n    };\n    /**\n     * 关闭选区\n     */\n    SelectionSelect.prototype.closeSelectionSelect = function () {\n        if (!this.isDefalutStopMoveGraph) {\n            this.lf.updateEditConfig({\n                stopMoveGraph: false,\n            });\n        }\n        this.close();\n    };\n    SelectionSelect.prototype.open = function () {\n        this.__disabled = false;\n    };\n    SelectionSelect.prototype.close = function () {\n        this.__disabled = true;\n    };\n    SelectionSelect.pluginName = 'selectionSelect';\n    return SelectionSelect;\n}());\nexport { SelectionSelect };\n"]},"metadata":{},"sourceType":"module"}