{"ast":null,"code":"//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport SearchBox from \"@/components/SearchBox\";\nexport default {\n  name: \"ExamTab\",\n  components: {\n    SearchBox: SearchBox\n  },\n  data: function data() {\n    return {\n      // 当前页码\n      currentPage: 1,\n      // 分页大小\n      pageSize: 10,\n      // 总页码数\n      totalCount: 1,\n      // 内置查询模型\n      searchTitle: {\n        title: ''\n      },\n      // 考试数据\n      examData: []\n    };\n  },\n  created: function created() {\n    this.getExam();\n  },\n  methods: {\n    // 查询考试数据\n    getExam: function getExam() {\n      var _this = this;\n\n      this.searchTitle[\"pageSize\"] = this.pageSize;\n      this.searchTitle[\"currentPage\"] = this.currentPage;\n      this.$axios.post(\"/Exam/getExam\", this.searchTitle).then(function (res) {\n        if (res.data.flag) {\n          /* 保存公告数据 */\n          _this.examData = res.data.data.records;\n          /* 保存分页数据 */\n\n          _this.totalCount = res.data.data.total;\n          _this.currentPage = res.data.data.current;\n          _this.pageSize = res.data.data.size;\n        } else {\n          // 服务故障\n          _this.$message.error(\"信息获取失败！\");\n        }\n      });\n    },\n    // 提交搜索\n    searchExam: function searchExam(title) {\n      this.searchTitle.title = title;\n      this.getExam();\n    },\n    // 表格颜色控制\n    tableRowClassName: function tableRowClassName(_ref) {\n      var row = _ref.row,\n          rowIndex = _ref.rowIndex;\n\n      if (rowIndex % 4 === 1) {\n        return 'warning-row';\n      } else if (rowIndex % 4 === 3) {\n        return 'success-row';\n      }\n\n      return '';\n    },\n    // 当某行数据被点击\n    rowClick: function rowClick(row, column) {\n      if (column.label === '操作') return; // 检查考试是否开始\n\n      var currentDate = new Date(); // Date.parse将字符串转为日期类，否则无法比较\n\n      if (currentDate > Date.parse(row.beginDate) && currentDate < Date.parse(row.endDate)) {\n        // 打开考试页面\n        this.$router.push({\n          name: 'StuExamDoing',\n          params: {\n            examId: row.examId\n          }\n        });\n      } else {\n        this.$message.error(\"考试未开放！\");\n      }\n    },\n    // 查看考试结果\n    showMyScore: function showMyScore(row) {\n      // 检查考试是否结束\n      var currentDate = new Date();\n\n      if (currentDate > Date.parse(row.endDate)) {\n        // 打开结果查看页面\n        this.$router.push({\n          name: 'StuExamScore',\n          params: {\n            examId: row.examId\n          }\n        });\n      } else {\n        this.$message.error(\"考试结束后才能查看考试结果\");\n      }\n    },\n    // 分页大小变化\n    handleSizeChange: function handleSizeChange(val) {\n      this.pageSize = val; // 查询所有考试\n\n      this.getExam();\n    },\n    // 当前页变化\n    handleCurrentChange: function handleCurrentChange(val) {\n      this.currentPage = val; // 查询所有考试\n\n      this.getExam();\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsEA;AACA;AACAA,iBADA;AAEAC;AACAC;AADA,GAFA;AAKAC,MALA,kBAKA;AACA;AACA;AACAC,oBAFA;AAGA;AACAC,kBAJA;AAKA;AACAC,mBANA;AAOA;AACAC;AACAC;AADA,OARA;AAWA;AACAC;AAZA;AAcA,GApBA;AAqBAC,SArBA,qBAqBA;AACA;AACA,GAvBA;AAwBAC;AACA;AACAC,WAFA,qBAEA;AAAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA,SAPA,MAOA;AACA;AACA;AACA;AACA,OAZA;AAaA,KAlBA;AAmBA;AACAC,cApBA,sBAoBAL,KApBA,EAoBA;AACA;AACA;AACA,KAvBA;AAwBA;AACAM,qBAzBA,mCAyBA;AAAA;AAAA;;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;;AACA;AACA,KAhCA;AAiCA;AACAC,YAlCA,oBAkCAC,GAlCA,EAkCAC,MAlCA,EAkCA;AACA,wCADA,CAEA;;AACA,mCAHA,CAIA;;AACA;AACA;AACA;AACAjB,8BADA;AAEAkB;AACAC;AADA;AAFA;AAMA,OARA,MAQA;AACA;AACA;AACA,KAlDA;AAmDA;AACAC,eApDA,uBAoDAJ,GApDA,EAoDA;AACA;AACA;;AACA;AACA;AACA;AACAhB,8BADA;AAEAkB;AACAC;AADA;AAFA;AAMA,OARA,MAQA;AACA;AACA;AACA,KAlEA;AAmEA;AACAE,oBApEA,4BAoEAC,GApEA,EAoEA;AACA,0BADA,CAEA;;AACA;AACA,KAxEA;AAyEA;AACAC,uBA1EA,+BA0EAD,GA1EA,EA0EA;AACA,6BADA,CAEA;;AACA;AACA;AA9EA;AAxBA","names":["name","components","SearchBox","data","currentPage","pageSize","totalCount","searchTitle","title","examData","created","methods","getExam","searchExam","tableRowClassName","rowClick","row","column","params","examId","showMyScore","handleSizeChange","val","handleCurrentChange"],"sourceRoot":"src/pages/user/studentComponents","sources":["StuExamTab.vue"],"sourcesContent":["<template>\r\n    <div>\r\n        <!-- 功能菜单 -->\r\n        <el-row style=\"position: relative; height: 90px\">\r\n            <!--搜索表单-->\r\n            <el-col :span=\"8\">\r\n                <search-box id=\"SearchBox\" @onSubmit=\"searchExam\"></search-box>\r\n            </el-col>\r\n        </el-row>\r\n\r\n        <!--　考试信息　-->\r\n        <div>\r\n            <template>\r\n                <el-table\r\n                        :data=\"examData\"\r\n                        style=\"width: 100%\"\r\n                        @row-click=\"rowClick\"\r\n                        :row-class-name=\"tableRowClassName\">\r\n                    <el-table-column\r\n                            label=\"序号\"\r\n                            type=\"index\"\r\n                            width=\"100\"\r\n                            align=\"center\">\r\n                    </el-table-column>\r\n\r\n                    <el-table-column\r\n                            prop=\"title\"\r\n                            label=\"名称\"\r\n                            align=\"center\"\r\n                            width=\"700\">\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                            prop=\"formatBeginDate\"\r\n                            label=\"开始日期\"\r\n                            align=\"center\"\r\n                            sortable>\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                            prop=\"formatEndDate\"\r\n                            label=\"截止日期\"\r\n                            align=\"center\"\r\n                            sortable>\r\n                    </el-table-column>\r\n                    <el-table-column\r\n                            align=\"center\"\r\n                            label=\"操作\">\r\n                        <template slot-scope=\"scope\">\r\n                            <el-button type=\"primary\" style=\"font-size: 16px\" @click=\"showMyScore(scope.row)\">查看结果</el-button>\r\n                        </template>\r\n                    </el-table-column>\r\n                </el-table>\r\n            </template>\r\n        </div>\r\n\r\n        <!-- 分页工具条 数据小于10条不展示 -->\r\n        <el-pagination\r\n                id=\"pageBar\"\r\n                v-show=\"totalCount >= 10\"\r\n                @size-change=\"handleSizeChange\"\r\n                @current-change=\"handleCurrentChange\"\r\n                :current-page=\"currentPage\"\r\n                :page-sizes=\"[5, 10, 15, 20, 50, 100]\"\r\n                :page-size=\"pageSize\"\r\n                layout=\"total, sizes, prev, pager, next, jumper\"\r\n                :total=\"totalCount\">\r\n        </el-pagination>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import SearchBox from \"@/components/SearchBox\";\r\n    export default {\r\n        name: \"ExamTab\",\r\n        components:{\r\n            SearchBox,\r\n        },\r\n        data(){\r\n            return{\r\n                // 当前页码\r\n                currentPage: 1,\r\n                // 分页大小\r\n                pageSize: 10,\r\n                // 总页码数\r\n                totalCount: 1,\r\n                // 内置查询模型\r\n                searchTitle:{\r\n                    title:'',\r\n                },\r\n                // 考试数据\r\n                examData:[],\r\n            }\r\n        },\r\n        created() {\r\n            this.getExam();\r\n        },\r\n        methods:{\r\n            // 查询考试数据\r\n            getExam(){\r\n                this.searchTitle[\"pageSize\"]=this.pageSize;\r\n                this.searchTitle[\"currentPage\"]=this.currentPage;\r\n                this.$axios.post(\"/Exam/getExam\",this.searchTitle).then((res)=>{\r\n                    if(res.data.flag){\r\n                        /* 保存公告数据 */\r\n                        this.examData = res.data.data.records;\r\n                        /* 保存分页数据 */\r\n                        this.totalCount = res.data.data.total;\r\n                        this.currentPage = res.data.data.current;\r\n                        this.pageSize = res.data.data.size;\r\n                    }else{\r\n                        // 服务故障\r\n                        this.$message.error(\"信息获取失败！\");\r\n                    }\r\n                });\r\n            },\r\n            // 提交搜索\r\n            searchExam(title){\r\n                this.searchTitle.title = title;\r\n                this.getExam();\r\n            },\r\n            // 表格颜色控制\r\n            tableRowClassName({row, rowIndex}) {\r\n                if (rowIndex%4 === 1) {\r\n                    return 'warning-row';\r\n                } else if (rowIndex%4 === 3) {\r\n                    return 'success-row';\r\n                }\r\n                return '';\r\n            },\r\n            // 当某行数据被点击\r\n            rowClick(row,column){\r\n                if(column.label === '操作')return;\r\n                // 检查考试是否开始\r\n                let currentDate = new Date();\r\n                // Date.parse将字符串转为日期类，否则无法比较\r\n                if(currentDate > Date.parse(row.beginDate) && currentDate < Date.parse(row.endDate)){\r\n                    // 打开考试页面\r\n                    this.$router.push({\r\n                        name:'StuExamDoing',\r\n                        params:{\r\n                            examId:row.examId,\r\n                        }\r\n                    })\r\n                }else{\r\n                    this.$message.error(\"考试未开放！\");\r\n                }\r\n            },\r\n            // 查看考试结果\r\n            showMyScore(row){\r\n                // 检查考试是否结束\r\n                let currentDate = new Date();\r\n                if(currentDate > Date.parse(row.endDate)){\r\n                    // 打开结果查看页面\r\n                    this.$router.push({\r\n                        name:'StuExamScore',\r\n                        params:{\r\n                            examId:row.examId,\r\n                        }\r\n                    })\r\n                }else{\r\n                    this.$message.error(\"考试结束后才能查看考试结果\");\r\n                }\r\n            },\r\n            // 分页大小变化\r\n            handleSizeChange(val) {\r\n                this.pageSize = val;\r\n                // 查询所有考试\r\n                this.getExam();\r\n            },\r\n            // 当前页变化\r\n            handleCurrentChange(val) {\r\n                this.currentPage = val;\r\n                // 查询所有考试\r\n                this.getExam();\r\n            },\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    /* 搜索栏 */\r\n    #SearchBox{\r\n        left: 198.7%;\r\n        position: relative;\r\n        margin-top: 1.25em;\r\n    }\r\n    /* 表格字体 */\r\n    .el-table{\r\n        font-size: 17px;\r\n    }\r\n\r\n</style>"]},"metadata":{},"sourceType":"module"}